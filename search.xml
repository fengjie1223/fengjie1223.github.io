<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>光源控制器</title>
      <link href="/2026/01/14/HID%E4%BA%A7%E5%93%81/%E5%85%89%E6%BA%90%E6%8E%A7%E5%88%B6%E5%99%A8/"/>
      <url>/2026/01/14/HID%E4%BA%A7%E5%93%81/%E5%85%89%E6%BA%90%E6%8E%A7%E5%88%B6%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="开关电源直连测试"><a href="#开关电源直连测试" class="headerlink" title="开关电源直连测试"></a>开关电源直连测试</h1><p>5us曝光</p><p>22V反射开关电源,2.8米,条纹情况</p><p><img src="/../../images/%E5%85%89%E6%BA%90%E6%8E%A7%E5%88%B6%E5%99%A8/1765430924043.png" alt="1765430924043"></p><p>22V反射开关电源,1.4米光源条纹情况</p><p><img src="/../../images/%E5%85%89%E6%BA%90%E6%8E%A7%E5%88%B6%E5%99%A8/1765431212119.png" alt="1765431212119"></p><p>20V补光开关电源,1.4米光源条纹情况</p><p><img src="/../../images/%E5%85%89%E6%BA%90%E6%8E%A7%E5%88%B6%E5%99%A8/1765431516321.png" alt="1765431516321"></p><p>海康相机曝光5us,行频4000,拍照条纹情况(无)</p><p><img src="/../../images/%E5%85%89%E6%BA%90%E6%8E%A7%E5%88%B6%E5%99%A8/1765438483396.bmp" alt="1765438483396"></p>]]></content>
      
      
      <categories>
          
          <category> HID产品 </category>
          
          <category> 光源控制器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 光源控制器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>输出电路设计</title>
      <link href="/2026/01/14/%E5%B5%8C%E5%85%A5%E5%BC%8F/%E8%BE%93%E5%87%BA%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1/"/>
      <url>/2026/01/14/%E5%B5%8C%E5%85%A5%E5%BC%8F/%E8%BE%93%E5%87%BA%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1/</url>
      
        <content type="html"><![CDATA[<h1 id="输出电路设计"><a href="#输出电路设计" class="headerlink" title="输出电路设计"></a>输出电路设计</h1><h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><ol><li>负载短路保护</li><li>小功率频闪(1US)(直接1A输出,和负载短路限流电阻)</li><li>感性负载(电磁阀)关断窜电流</li><li>12~16路</li></ol><h2 id="图腾柱结构MOS"><a href="#图腾柱结构MOS" class="headerlink" title="图腾柱结构MOS"></a>图腾柱结构MOS</h2><ul><li>由两个NMOS组成,输出信号和输入信号为同向.与之相比较的是推挽电路mos.</li></ul><h2 id="推挽电路MOS"><a href="#推挽电路MOS" class="headerlink" title="推挽电路MOS"></a>推挽电路MOS</h2><ul><li>由一个NMOS和一个PMOS组成,输出信号和输入信号为反向,与之相比较的是图腾柱结构mos</li></ul>]]></content>
      
      
      <categories>
          
          <category> 嵌入式 </category>
          
          <category> 输出电路 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术 </tag>
            
            <tag> 输出电路 </tag>
            
            <tag> 短路保护 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>EIP</title>
      <link href="/2025/05/09/HID%E4%BA%A7%E5%93%81/EIP/"/>
      <url>/2025/05/09/HID%E4%BA%A7%E5%93%81/EIP/</url>
      
        <content type="html"><![CDATA[<h1 id="EIP"><a href="#EIP" class="headerlink" title="EIP"></a>EIP</h1><h2 id="设计步骤"><a href="#设计步骤" class="headerlink" title="设计步骤"></a>设计步骤</h2><ol><li>创建modbusserver服务器</li><li>创建数据容器存储数据,QHash&lt;QString,QString&gt;</li><li>创建1s定时器,用于心跳反转</li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>度申相机</title>
      <link href="/2025/05/09/%E5%B7%A5%E4%B8%9A%E7%9B%B8%E6%9C%BA/%E5%BA%A6%E7%94%B3/"/>
      <url>/2025/05/09/%E5%B7%A5%E4%B8%9A%E7%9B%B8%E6%9C%BA/%E5%BA%A6%E7%94%B3/</url>
      
        <content type="html"><![CDATA[<h1 id="度申相机"><a href="#度申相机" class="headerlink" title="度申相机"></a>度申相机</h1><p>[TOC]</p><h2 id="分时频闪"><a href="#分时频闪" class="headerlink" title="分时频闪"></a>分时频闪</h2><h3 id="一-功能简介"><a href="#一-功能简介" class="headerlink" title="一.功能简介"></a>一.功能简介</h3><pre><code>该功能用于线扫相机,每个行触发有效,执行一次分时曝光,每个分时曝光可以设置不同的曝光时间,独立的光源触发,以此获得一台相机拍出不同光源角度的图像.</code></pre><h3 id="二-分时曝光时序图"><a href="#二-分时曝光时序图" class="headerlink" title="二.分时曝光时序图"></a>二.分时曝光时序图</h3><p><img src="/../../images/%E5%BA%A6%E7%94%B3/1733728604852.png" alt="1733728604852"></p><h3 id="三-行序列分离"><a href="#三-行序列分离" class="headerlink" title="三.行序列分离"></a>三.行序列分离</h3><p><img src="/../../images/%E5%BA%A6%E7%94%B3/1733727397629.png" alt="1733727397629"></p><h3 id="四-分时拍照原图为按照分时曝光顺序拍出的图像"><a href="#四-分时拍照原图为按照分时曝光顺序拍出的图像" class="headerlink" title="四.分时拍照原图为按照分时曝光顺序拍出的图像"></a>四.分时拍照原图为按照分时曝光顺序拍出的图像</h3><p><img src="/../../images/%E5%BA%A6%E7%94%B3/1733727480883.png" alt="1733727480883"></p><h3 id="五-开启行序列分离功能-则会将分时拍出的图像按顺序排列组合"><a href="#五-开启行序列分离功能-则会将分时拍出的图像按顺序排列组合" class="headerlink" title="五.开启行序列分离功能,则会将分时拍出的图像按顺序排列组合"></a>五.开启行序列分离功能,则会将分时拍出的图像按顺序排列组合</h3><p><img src="/../../images/%E5%BA%A6%E7%94%B3/1733727552771.png" alt="1733727552771"></p><h3 id="六-设置分时曝光次数"><a href="#六-设置分时曝光次数" class="headerlink" title="六.设置分时曝光次数"></a>六.设置分时曝光次数</h3><ul><li>Disable为关闭多次曝光,MultiExp1为1次曝光,MultiExp2为2次曝光,MultiExp3为3次曝光,MultiExp4为4次曝光.这里我们选MultiExp2,即2次曝光.</li></ul><p><img src="/../../images/%E5%BA%A6%E7%94%B3/1733728805286.png" alt="1733728805286"></p><h3 id="七-分时曝光控制光源设置"><a href="#七-分时曝光控制光源设置" class="headerlink" title="七.分时曝光控制光源设置"></a>七.分时曝光控制光源设置</h3><ul><li>数字IO控制器,IO线路选择输出IO,Line4,选择IO线路信号源SequenceStrobe1,为触发第一次分时曝光的光源控制引脚.</li><li>数字IO控制器,IO线路选择输出IO,Line5,选择IO线路信号源SequenceStrobe2,为触发第二次分时曝光的光源控制引脚.</li></ul><p><img src="/../../images/%E5%BA%A6%E7%94%B3/1733729248402.png" alt="1733729248402"><br><img src="/../../images/%E5%BA%A6%E7%94%B3/1733729219706.png" alt="1733729219706"></p><h3 id="八-案例"><a href="#八-案例" class="headerlink" title="八.案例"></a>八.案例</h3><p><strong>举例:<br>    1000编码器<br>    992图像高度<br>    2分时</strong></p><ul><li>设置图像高度为1984,获得一张高度为1984的图像,其中0-991为1分时拍出的照片,992-1983为2分时拍出的照片.如下图所示:<br><img src="/../../images/%E5%BA%A6%E7%94%B3/1733728075105.png" alt="1733728075105"><br><img src="/../../images/%E5%BA%A6%E7%94%B3/1733727230564.png" alt="1733727230564"></li><li>若设置的图像高度为992,则只会拍出产品的一半.即0-495为1分时拍出的照片,496-991为2分时拍出的照片.如下图所示:<br><img src="/../../images/%E5%BA%A6%E7%94%B3/1733728100320.png" alt="1733728100320"><br><img src="/../../images/%E5%BA%A6%E7%94%B3/1733727194355.png" alt="1733727194355"></li></ul><h3 id="九-其它"><a href="#九-其它" class="headerlink" title="九.其它"></a>九.其它</h3><ul><li>分时1控制的光源如果熄灭速度不够快,则可能会影响到分时2的曝光拍照.可以增加分时2的曝光延时时间,以待分时1控制的光源完全熄灭.<br><img src="/../../images/%E5%BA%A6%E7%94%B3/1733727761430.png" alt="1733727761430"></li><li>关于频闪节拍:可以使用相机多次曝光闪光灯自动跟随功能(即闪灯时长随曝光时间变化),也可以自己设置频闪节拍</li></ul>]]></content>
      
      
      <categories>
          
          <category> 工业相机 </category>
          
          <category> 度申 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>vcpkg</title>
      <link href="/2025/05/09/%E7%BB%BC%E5%90%88/vcpkg/"/>
      <url>/2025/05/09/%E7%BB%BC%E5%90%88/vcpkg/</url>
      
        <content type="html"><![CDATA[<h1 id="vcpkg"><a href="#vcpkg" class="headerlink" title="vcpkg"></a>vcpkg</h1><p>需要先准备git,vs2017&#x2F;vs2019必须安装了英文语言包的</p><h2 id="1-安装"><a href="#1-安装" class="headerlink" title="1. 安装"></a>1. 安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/Microsoft/vcpkg.git</span><br><span class="line"><span class="built_in">cd</span> vcpkg</span><br><span class="line">./bootstrap-vcpkg.sh</span><br><span class="line">./vcpkg integrate install</span><br></pre></td></tr></table></figure><p>克隆仓库后把根目录添加到系统环境变量</p><h2 id="加速"><a href="#加速" class="headerlink" title="加速"></a>加速</h2><p>设置git的代理加速,对http和https都生效.ssh无效</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git config --global http.proxy &quot;http://127.0.0.1:1080&quot;</span><br><span class="line">git config --global https.proxy &quot;https://127.0.0.1:1080&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>除了设置代理，我们还可以设置 hosts</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">192.30.253.112    github.com</span><br><span class="line">192.30.253.113    github.com</span><br><span class="line">151.101.185.194   github.global.ssl.fastly.net</span><br></pre></td></tr></table></figure><h2 id="梯子"><a href="#梯子" class="headerlink" title="梯子"></a>梯子</h2><p>可以使用梯子加速下载<br>开启clash verge,tun模式,git的代理指向clash verge端口7890,127.0.0.1:7890<br>或修改clash verge的端口为代理后git的端口1080<strong>修改完代理后,重启clash verge,以及git终端</strong></p><h2 id="2-添加库"><a href="#2-添加库" class="headerlink" title="2. 添加库"></a>2. 添加库</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vcpkg install &lt;package&gt;:&lt;triplet&gt;</span><br></pre></td></tr></table></figure><h2 id="添加opencv"><a href="#添加opencv" class="headerlink" title="添加opencv"></a>添加opencv</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vcpkg install opencv4[contrib,world]:x64-windows --debug --recurse</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">指定版本 --&gt;<span class="number">4.8</span><span class="number">.0</span> <span class="punctuation">,</span>使用json配置文件</span><br><span class="line"></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;my-project&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;opencv4&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;version&gt;=&quot;</span><span class="punctuation">:</span> <span class="string">&quot;4.8.0&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="添加Qt5"><a href="#添加Qt5" class="headerlink" title="添加Qt5"></a>添加Qt5</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">vcpkg install qt5:x64-windows //完整版</span><br><span class="line"></span><br><span class="line">vcpkg install qt5-base:x64-windows --recurse  //基础版</span><br><span class="line">vcpkg install qt-tools:x64-windows //工具designer</span><br><span class="line">vcpkg install qt5-serialport:x64-windows //串口</span><br><span class="line">vcpkg install qt5-serialbus:x64-windows //can</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="添加Simpleini"><a href="#添加Simpleini" class="headerlink" title="添加Simpleini"></a>添加Simpleini</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vcpkg install simpleini</span><br><span class="line">include_directories(<span class="variable">$&#123;SIMPLEINI_INCLUDE_DIR&#125;</span>)</span><br><span class="line">target_link_libraries(main <span class="variable">$&#123;SIMPLEINI_LIBRARY&#125;</span>)</span><br></pre></td></tr></table></figure><h2 id="CMake使用vcpkg"><a href="#CMake使用vcpkg" class="headerlink" title="CMake使用vcpkg"></a>CMake使用vcpkg</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置 vcpkg 工具链路径</span></span><br><span class="line"><span class="built_in">set</span>(CMAKE_TOOLCHAIN_FILE <span class="string">&quot;path/to/vcpkg/scripts/buildsystems/vcpkg.cmake&quot;</span></span><br><span class="line">    CACHE STRING <span class="string">&quot;VCPKG toolchain file&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">set</span>(OpenCV_ROOT <span class="string">&quot;<span class="variable">$&#123;VCPKG_INSTALLED_DIR&#125;</span>/x64-windows/share/opencv4&quot;</span>)</span><br><span class="line">    find_package(OpenCV REQUIRED)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> vcpkg </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dalsa</title>
      <link href="/2024/12/12/%E5%B7%A5%E4%B8%9A%E7%9B%B8%E6%9C%BA/Dalsa/"/>
      <url>/2024/12/12/%E5%B7%A5%E4%B8%9A%E7%9B%B8%E6%9C%BA/Dalsa/</url>
      
        <content type="html"><![CDATA[<h2 id="下载SDK"><a href="#下载SDK" class="headerlink" title="下载SDK"></a>下载SDK</h2><p><a href="http://teledynedalsa.com/sapera-lt-dl/?dl=1&pkg=SDKWOW64&key=BezZNB87ZcwFO7mZ1Neb1g==">Sapera LT 8.73 SDK (WoW64)</a></p><p><a href="http://teledynedalsa.com/sapera-lt-dl/?dl=1&pkg=SDK&key=BezZNB87ZcwFO7mZ1Neb1g==">Sapera LT 8.73 SDK For Developers</a></p><h2 id="8K线扫-LA-GM-08K08A-00-R-Linea-M8192-7um-1"><a href="#8K线扫-LA-GM-08K08A-00-R-Linea-M8192-7um-1" class="headerlink" title="8K线扫(LA-GM-08K08A-00-R&#x2F;Linea_M8192-7um_1)"></a>8K线扫(LA-GM-08K08A-00-R&#x2F;Linea_M8192-7um_1)</h2><h3 id="接口-引脚定义"><a href="#接口-引脚定义" class="headerlink" title="接口&#x2F;引脚定义"></a>接口&#x2F;引脚定义</h3><p><img src="/../../images/Dalsa/1711533769128.png" alt="1711533769128"></p><h3 id="倍频设置（编码器型号500，设置2000）"><a href="#倍频设置（编码器型号500，设置2000）" class="headerlink" title="倍频设置（编码器型号500，设置2000）"></a>倍频设置（编码器型号500，设置2000）</h3><ol><li>点击show more<br><img src="/../../images/Dalsa/1711533779034.png" alt="1711533779034"></li><li>Trigger Selector 选择 Single Line Trigger（Start）</li><li>Trigger Mode 选择 On</li><li>Trigger Source 选择 Rotary Encoder   （触发源选择编码器模式）</li><li>Trigger Overlap 选择 Readout</li><li>Rotary Encoder Output Mode 选择 Motion   （编码器方向：忽略方向）</li><li>Rotary Encoder Input A Source 选择 Line1 （编码器A）</li><li>Rotary Encoder Input B Source 选择 Line2 （编码器B）</li><li>Rotary Encoder Source Activation 选择 Any Edge   （边沿触发）</li><li>Rotary Encoder Multiplier 选择 1    （倍频）</li><li>Rotary Encoder Divider 选择 1   （分频）</li><li>Line Selector 选择 Line1    （设置Line1滤波）</li><li>Input Line Debouncing Period（in us）设置5  （滤波设置5us）</li><li>Line Selector 选择 Line2    （设置Line2滤波）</li><li>Input Line Debouncing Period（in us）设置5  （滤波设置5us）</li></ol><p><img src="/../../images/Dalsa/1711533787467.png" alt="1711533787467"></p>]]></content>
      
      
      <categories>
          
          <category> 工业相机 </category>
          
          <category> Dalsa </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Basler</title>
      <link href="/2024/12/12/%E5%B7%A5%E4%B8%9A%E7%9B%B8%E6%9C%BA/Basler/"/>
      <url>/2024/12/12/%E5%B7%A5%E4%B8%9A%E7%9B%B8%E6%9C%BA/Basler/</url>
      
        <content type="html"><![CDATA[<h2 id="下载SDK"><a href="#下载SDK" class="headerlink" title="下载SDK"></a>下载SDK</h2><p><a href="https://www.baslerweb.com/cn/downloads/software-downloads/#type=pylonsoftware;os=windows;version=all">Basler Pylon 下载链接</a></p><h2 id="2K线扫（ral2048-48gm）"><a href="#2K线扫（ral2048-48gm）" class="headerlink" title="2K线扫（ral2048_48gm）"></a>2K线扫（ral2048_48gm）</h2><h3 id="接口定义"><a href="#接口定义" class="headerlink" title="接口定义"></a>接口定义</h3><p><img src="/../../images/Basler/1711533696881.png" alt="1711533696881"></p><h3 id="引脚定义"><a href="#引脚定义" class="headerlink" title="引脚定义"></a>引脚定义</h3><p><img src="/../../images/Basler/1711533704889.png" alt="1711533704889"></p><p><img src="/../../images/Basler/1711533712878.png" alt="1711533712878"></p><h3 id="倍频设置-已验证成功"><a href="#倍频设置-已验证成功" class="headerlink" title="倍频设置    (已验证成功)"></a>倍频设置    (已验证成功)</h3><p><strong>简述</strong>：倍频模式只需要编码器一相输入即可，不需要AB两相。</p><ol><li>Trigger Selector选择Line Start</li><li>Trigger Mode 选择On</li><li>Trigger Source选择Frequency Converter</li><li>类别Digital I&#x2F;O Controls下Line Selector选择Line1（用哪个选哪个）</li><li>Line Debouncer Time Abs[us] 输入10，滤波10us</li><li>类别-&gt;Frequency Converter下Input Source选择Line 1（用哪个选哪个）</li><li>Signal Alignment选择Rising Edge</li><li>Multiplier输入需要倍频的系数</li><li>Prevent Overtrigger 打上对勾</li></ol><p><img src="/../../images/Basler/1711533723238.png" alt="1711533723238"></p><p><img src="/../../images/Basler/1711533730769.png" alt="1711533730769"></p><p><img src="/../../images/Basler/1711533739383.png" alt="1711533739383"></p><h4 id="调试过程中遇到的问题"><a href="#调试过程中遇到的问题" class="headerlink" title="调试过程中遇到的问题"></a>调试过程中遇到的问题</h4><ul><li>连接相机后立即且一直出图。<br>  解决办法：Line Debouncer Time Abs设置滤波解决</li></ul><h3 id="编码器模式-已验证成功"><a href="#编码器模式-已验证成功" class="headerlink" title="编码器模式  (已验证成功)"></a>编码器模式  (已验证成功)</h3><p><strong>简述</strong>：编码器模式正向拍照，反向不拍照且计数，恢复正向后到开始反向的位置则继续拍照。(相当于直接4倍频)</p><ol><li>Trigger Selector选择Line Start</li><li>Trigger Mode 选择On</li><li>Trigger Source选择Shaft Encoder Module Out</li><li>类别Digital I&#x2F;O Controls下Line Selector选择Line1（用哪个选哪个）</li><li>Line Debouncer Time Abs[us] 输入10，滤波10us</li><li>类别-&gt;Shaft Encoder Module Out下Shaft Encoder Module Line Selector选择Phase A</li><li>Shaft Encoder Module Line选择Line1(接线哪个选哪个)</li><li>Shaft Encoder Module Out下Shaft Encoder Module Line Selector选择Phase B</li><li>Shaft Encoder Module Line选择Line3(接线哪个选哪个)</li><li>Shaft Encoder Module Trigger Mode Any Direction 开启任意方向滴答计数</li><li>Shaft Encoder Module Counter Mode 选择Follow Direction 开启反转负计数</li><li>Shaft Encoder Module Max Reverse Counter 负计数最大值，设置为32767</li><li><strong>注意</strong>：两个计数，最大值是32767，最小值是0，若向上超过最大值则变成0开始计数，向下超过0，则变成32767</li></ol><p><img src="/../../images/Basler/1711533748800.png" alt="1711533748800"></p><p>思考：若使用到检测停机中，配合采集触发就绪功能，则可以解决干扰以及正反转的问题</p><h3 id="输出IO-采集就绪输出信号，未验证"><a href="#输出IO-采集就绪输出信号，未验证" class="headerlink" title="输出IO (采集就绪输出信号，未验证)"></a>输出IO (采集就绪输出信号，未验证)</h3><p><strong>简述</strong>：可以作为图像结束信号，对齐图像工位，避免受到干扰造成的影响（手册中，在线文档中都没有该功能的描述，因为要代码设置参数，且需要写下位机程序验证，需要花费较长的时间，故此没有验证，此处仅简单记录）</p><p>部分功能验证，输出IO有效</p><ol><li>类别Diagital I&#x2F;O Controls 下 Line Selector 选择 Output Line 1</li><li>Line Source 选择 Acquisition Trigger Ready</li><li>Line Output Pulse Min.Width[us] 设置为100us（似乎是最大值）</li></ol><p><img src="/../../images/Basler/1711533759425.png" alt="1711533759425"></p><p>备注：Line Source 只能通过代码设置选择 Acquisition Trigger Ready，相机驱动中没有提供该功能的选项</p>]]></content>
      
      
      <categories>
          
          <category> 工业相机 </category>
          
          <category> Basler </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>FPGA</title>
      <link href="/2024/12/12/%E5%B5%8C%E5%85%A5%E5%BC%8F/FPGA/"/>
      <url>/2024/12/12/%E5%B5%8C%E5%85%A5%E5%BC%8F/FPGA/</url>
      
        <content type="html"><![CDATA[<h1 id="Artix7"><a href="#Artix7" class="headerlink" title="Artix7"></a>Artix7</h1><h2 id="XC7A100T"><a href="#XC7A100T" class="headerlink" title="XC7A100T"></a>XC7A100T</h2><h3 id="vivado-代码固化"><a href="#vivado-代码固化" class="headerlink" title="vivado&#x2F;代码固化"></a>vivado&#x2F;代码固化</h3><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><pre><code>vivado2019.2</code></pre><ol><li>双击xsetup.exe（安装包不可以放在中文路径下）</li><li>基本无脑下一步，遇到agree就勾选，遇到路径自己选</li><li>选择版次，Vivado HL System Editiom</li><li>安装时间较长耐心等待，安装完成后弹出license manger 2019.2,点击左侧load license，选择license文件。</li></ol><h3 id="verilog"><a href="#verilog" class="headerlink" title="verilog"></a>verilog</h3><h4 id="进制格式"><a href="#进制格式" class="headerlink" title="进制格式"></a>进制格式</h4><p>二进制表示：4’b0000<br>十进制表示：4’d0<br>十六进制表示：4’h0</p><h4 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h4><p>寄存器类型<br>    reg [31:0] a;<br>线网类型<br>    wire [31:0] a;<br>参数类型<br>    parameter [31:0] a &#x3D; 32’d100;</p><h4 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h4><p>加减乘除取余+ - * &#x2F; %<br>位与或异或取反&amp; | ^ ~<br>小于 小于等于 大于 大于等于&lt; &lt;&#x3D; &gt; &gt;&#x3D;<br>等于 不等 &#x3D;&#x3D; !&#x3D;<br>与或非&amp;&amp; || !</p><h4 id="语句"><a href="#语句" class="headerlink" title="语句"></a>语句</h4><h5 id="条件语句"><a href="#条件语句" class="headerlink" title="条件语句"></a>条件语句</h5><p>if (a &#x3D;&#x3D; 100)<br>    b &#x3D; 1;  </p><p>if(a&#x3D;&#x3D;100)begin<br>    b &#x3D; 1;<br>    b&#x3D;2;<br>end</p><h3 id="IO-INPUT-OUTPUT"><a href="#IO-INPUT-OUTPUT" class="headerlink" title="IO&#x2F;INPUT&#x2F;OUTPUT"></a>IO&#x2F;INPUT&#x2F;OUTPUT</h3><h3 id="时钟"><a href="#时钟" class="headerlink" title="时钟"></a>时钟</h3><p>bufg 全局时钟 可以控制FPGA任何的资源</p><p>Clock Region 局域时钟 IO 逻辑资源</p><p>bufr 区域时钟 控制一个区域的时钟</p><h4 id="代码编辑相关"><a href="#代码编辑相关" class="headerlink" title="代码编辑相关"></a>代码编辑相关</h4><ol><li>verilog-format   格式化配置简单，效果一般</li><li>iStyle           格式化需要下载源码，编译出二进制文件，效果较好（推荐使用该方式）</li><li>verible-verilog-format 格式化配置简单，效果较好    （但同一文件内出现多个always语句块时则无法格式化，故此推荐使用iStyle）</li></ol><p>三者都有相应的格式化功能，只是相应的格式化规则略有不同。</p><p>vscode编辑器 插件 Verilog-HDL&#x2F;System Verilog&#x2F;*****（支持代码关键字高亮，支持多种代码格式化）</p>]]></content>
      
      
      <categories>
          
          <category> 嵌入式 </category>
          
          <category> FPGA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> FPGA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RT_Thread</title>
      <link href="/2024/05/06/%E5%B5%8C%E5%85%A5%E5%BC%8F/RT_Thread/"/>
      <url>/2024/05/06/%E5%B5%8C%E5%85%A5%E5%BC%8F/RT_Thread/</url>
      
        <content type="html"><![CDATA[<p>RT-Thread 是一个开源的实时操作系统，支持多种 CPU 架构，包括 ARM、MIPS、X86 等。</p><h1 id="RT-Thread"><a href="#RT-Thread" class="headerlink" title="RT_Thread"></a>RT_Thread</h1><h2 id="工程创建"><a href="#工程创建" class="headerlink" title="工程创建"></a>工程创建</h2><h2 id="包-组件管理"><a href="#包-组件管理" class="headerlink" title="包&#x2F;组件管理"></a>包&#x2F;组件管理</h2><h2 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h2><h2 id="IO中断"><a href="#IO中断" class="headerlink" title="IO中断"></a>IO中断</h2><h2 id="定时器"><a href="#定时器" class="headerlink" title="定时器"></a>定时器</h2><h3 id="软件定时器"><a href="#软件定时器" class="headerlink" title="软件定时器"></a>软件定时器</h3><h3 id="硬件定时器"><a href="#硬件定时器" class="headerlink" title="硬件定时器"></a>硬件定时器</h3><h2 id="串口中断"><a href="#串口中断" class="headerlink" title="串口中断"></a>串口中断</h2><h2 id="SPI设备注册"><a href="#SPI设备注册" class="headerlink" title="SPI设备注册"></a>SPI设备注册</h2><h2 id="常用API"><a href="#常用API" class="headerlink" title="常用API"></a>常用API</h2><h2 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h2>]]></content>
      
      
      <categories>
          
          <category> 嵌入式 </category>
          
          <category> RT_Thread </category>
          
      </categories>
      
      
        <tags>
            
            <tag> stm32 </tag>
            
            <tag> RT_Thread </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++</title>
      <link href="/2024/04/09/%E8%BD%AF%E4%BB%B6%E7%BC%96%E7%A8%8B/C++/"/>
      <url>/2024/04/09/%E8%BD%AF%E4%BB%B6%E7%BC%96%E7%A8%8B/C++/</url>
      
        <content type="html"><![CDATA[<h1 id="23种设计模式"><a href="#23种设计模式" class="headerlink" title="23种设计模式"></a>23种设计模式</h1><p><a href="https://mp.weixin.qq.com/s/g5rL3ZhghB8zpdQqVuZIBQ">参考连接</a></p><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>创建型模式</p><p>设计模式 | 工厂&amp;抽象工厂模式<br>设计模式 | 生成器模式<br>设计模式 | 原型模式<br>设计模式 | 单例模式<br>结构型模式</p><p>设计模式 | 适配器模式<br>设计模式 | 桥接模式<br>设计模式 | 组合模式<br>设计模式 | 装饰模式<br>设计模式 | 外观模式<br>设计模式 | 享元模式<br>设计模式 | 代理模式<br>行为型模式</p><p>设计模式 | 责任链模式<br>设计模式 | 命令模式<br>设计模式 | 迭代器模式<br>设计模式 | 中介者模式<br>设计模式 | 备忘录模式<br>设计模式 | 观察者模式<br>设计模式 | 状态模式<br>设计模式 | 策略模式<br>设计模式 | 模板方法模式<br>设计模式 | 访问者模式</p><h2 id="常用模式"><a href="#常用模式" class="headerlink" title="常用模式"></a>常用模式</h2><ol><li>单例模式</li><li>观察者模式</li><li>策略模式</li></ol><h1 id="C-泛编程"><a href="#C-泛编程" class="headerlink" title="C++_泛编程"></a>C++_泛编程</h1><h2 id="自动类型推导"><a href="#自动类型推导" class="headerlink" title="自动类型推导"></a>自动类型推导</h2><ul><li>auto关键字可以自动推导类型，可以省略类型，但是不能省略变量名</li><li>不要滥用auto关键字</li><li>不要用auto作为形参</li><li>推荐用auto作为函数指针的类型声明.举例如下</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">fun_c</span><span class="params">(<span class="type">int</span> c)</span></span>&#123;</span><br><span class="line">    cout &lt;&lt; c &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> fun = fun_c;   <span class="comment">//等效于void fun(int c)&#123;...&#125;    </span></span><br><span class="line">    <span class="built_in">fun</span>(<span class="number">10</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="函数模板"><a href="#函数模板" class="headerlink" title="函数模板"></a>函数模板</h2><h2 id="类模板"><a href="#类模板" class="headerlink" title="类模板"></a>类模板</h2><h1 id="ini读写"><a href="#ini读写" class="headerlink" title="ini读写"></a>ini读写</h1><h2 id="SimpleIni"><a href="#SimpleIni" class="headerlink" title="SimpleIni"></a>SimpleIni</h2><ul><li>相对好用的库</li><li>与opencv的ACCESS_MASK冲突<ul><li>1.不使用命名空间</li><li>2.引用头文件的时候先引用SimpleIni.h,后使用#undef ACCESS_MASK解除冲突再引用opencv.h</li></ul></li></ul><h2 id="ini读写库"><a href="#ini读写库" class="headerlink" title="ini读写库"></a>ini读写库</h2><ul><li>[inih]    可读参数且支持注释，不可写参数（需要使用c语言结构体，数据结构管理的方式）</li><li>[inicpp]  可读参数且支持注释，可写参数且支持注释，注释必须为单独的行，不可与参数在同一行  <!-- 若包含hpp文件后编译报错，则在该文件中添加头文件#include <array> --></li><li>[QSettings]   可读参数且支持注释，写参数会消除注释</li><li>[SimpleIni]   可读参数且支持注释，写参数会消除注释</li><li>[IniParser]  可读参数且支持注释，写参数会消除注释(可能对linux支持更好)</li></ul><h2 id="inicpp示例程序"><a href="#inicpp示例程序" class="headerlink" title="inicpp示例程序"></a>inicpp示例程序</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;inicpp.hpp&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iomanip&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* compile: g++ -I../ -std=c++11 main.cpp -o iniExample */</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// Load the INI file.</span></span><br><span class="line"> inicpp::IniManager _ini(<span class="string">&quot;config.ini&quot;</span>);      <span class="comment">//可以用指针，实例化的时候传入路径，后面读取参数用QString::fromstdstring((*ini)[&quot;rtsp&quot;][&quot;port&quot;]))</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">// Check if the key exists.</span></span><br><span class="line"> <span class="keyword">if</span> (!_ini[<span class="string">&quot;rtsp&quot;</span>].<span class="built_in">isKeyExist</span>(<span class="string">&quot;port&quot;</span>))</span><br><span class="line"> &#123;</span><br><span class="line">  std::cout &lt;&lt; <span class="string">&quot;rtsp.port is not exist!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// Modify or add key-value pairs.</span></span><br><span class="line"> _ini.<span class="built_in">modify</span>(<span class="string">&quot;rtsp&quot;</span>, <span class="string">&quot;port&quot;</span>, <span class="string">&quot;554&quot;</span>);</span><br><span class="line"></span><br><span class="line"> <span class="comment">// Use key-value pairs directly.</span></span><br><span class="line"> std::string rtsp_port = _ini[<span class="string">&quot;rtsp&quot;</span>][<span class="string">&quot;port&quot;</span>];</span><br><span class="line"></span><br><span class="line"> <span class="comment">// You can write section-key-value.</span></span><br><span class="line"> _ini.<span class="built_in">modify</span>(<span class="string">&quot;rtsp&quot;</span>, <span class="string">&quot;port&quot;</span>, <span class="string">&quot;554&quot;</span>);</span><br><span class="line"></span><br><span class="line"> <span class="comment">// Add a comment.</span></span><br><span class="line"> _ini.<span class="built_in">modify</span>(<span class="string">&quot;rtsp&quot;</span>, <span class="string">&quot;port&quot;</span>, <span class="string">&quot;554&quot;</span>, <span class="string">&quot;this is the listen port for http server&quot;</span>);</span><br><span class="line"></span><br><span class="line"> <span class="comment">// Modify the comment.</span></span><br><span class="line"> _ini.<span class="built_in">modifyComment</span>(<span class="string">&quot;rtsp&quot;</span>, <span class="string">&quot;port&quot;</span>, <span class="string">&quot;this is the listen port for rtsp server ***&quot;</span>);</span><br><span class="line"></span><br><span class="line"> <span class="comment">// Try to modify or add more.</span></span><br><span class="line"> _ini.<span class="built_in">modify</span>(<span class="string">&quot;math&quot;</span>, <span class="string">&quot;PI&quot;</span>, <span class="string">&quot;3.1415926&quot;</span>, <span class="string">&quot;This is pi in mathematics.&quot;</span>);</span><br><span class="line"></span><br><span class="line"> <span class="comment">// You have obtained the key-value pair and saved it to your config file.</span></span><br><span class="line"> std::cout &lt;&lt; <span class="string">&quot;to string:\trtsp.port = &quot;</span> &lt;&lt; _ini[<span class="string">&quot;rtsp&quot;</span>][<span class="string">&quot;port&quot;</span>] &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// Convert to string, default is string</span></span><br><span class="line"> std::string http_port_s = _ini[<span class="string">&quot;math&quot;</span>].<span class="built_in">toString</span>(<span class="string">&quot;PI&quot;</span>);</span><br><span class="line"> std::cout &lt;&lt; <span class="string">&quot;to string:\tmath.PI   = &quot;</span> &lt;&lt; http_port_s &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// Convert to double</span></span><br><span class="line"> <span class="type">double</span> http_port_d = _ini[<span class="string">&quot;math&quot;</span>].<span class="built_in">toDouble</span>(<span class="string">&quot;PI&quot;</span>);</span><br><span class="line"> std::cout &lt;&lt; <span class="string">&quot;to double:\tmath.PI   = &quot;</span> &lt;&lt; std::<span class="built_in">setprecision</span>(<span class="number">10</span>) &lt;&lt; http_port_d &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// Convert to int</span></span><br><span class="line"> <span class="type">int</span> http_port_i = _ini[<span class="string">&quot;math&quot;</span>].<span class="built_in">toInt</span>(<span class="string">&quot;PI&quot;</span>);</span><br><span class="line"> std::cout &lt;&lt; <span class="string">&quot;to int:\t\tmath.PI   = &quot;</span> &lt;&lt; http_port_i &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="常用API"><a href="#常用API" class="headerlink" title="常用API"></a>常用API</h2><h3 id="实例化"><a href="#实例化" class="headerlink" title="实例化"></a>实例化</h3><p> inicpp::IniManager _ini(“config.ini”);      &#x2F;&#x2F;可以用指针，实例化的时候传入路</p><p> Qt实例化<br> <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> QString inistr=<span class="string">&quot;参数管理/复卷检测.ini&quot;</span>;</span><br><span class="line"><span class="comment">// inistr.toLocal8Bit();</span></span><br><span class="line">_ini=<span class="keyword">new</span> inicpp::<span class="built_in">IniManager</span>(inistr.<span class="built_in">toLocal8Bit</span>().<span class="built_in">toStdString</span>());</span><br></pre></td></tr></table></figure></p><h3 id="写参数值"><a href="#写参数值" class="headerlink" title="写参数值"></a>写参数值</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">modify</span>()        <span class="comment">//修改参数值，如果参数不存在，会自动创建</span></span><br><span class="line"><span class="built_in">modifyComment</span>() <span class="comment">//修改注释，如果注释不存在，会自动创建</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">// 写参数.</span></span><br><span class="line"> _ini.<span class="built_in">modify</span>(<span class="string">&quot;rtsp&quot;</span>, <span class="string">&quot;port&quot;</span>, <span class="string">&quot;554&quot;</span>);</span><br><span class="line"></span><br><span class="line"> <span class="comment">// 写参数同时添加注释.</span></span><br><span class="line"> _ini.<span class="built_in">modify</span>(<span class="string">&quot;rtsp&quot;</span>, <span class="string">&quot;port&quot;</span>, <span class="string">&quot;554&quot;</span>, <span class="string">&quot;this is the listen port for http server&quot;</span>);</span><br><span class="line"></span><br><span class="line"> <span class="comment">// 修改注释.</span></span><br><span class="line"> _ini.<span class="built_in">modifyComment</span>(<span class="string">&quot;rtsp&quot;</span>, <span class="string">&quot;port&quot;</span>, <span class="string">&quot;this is the listen port for rtsp server ***&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="读参数值"><a href="#读参数值" class="headerlink" title="读参数值"></a>读参数值</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">string std = _ini[<span class="string">&quot;section&quot;</span>][<span class="string">&quot;key&quot;</span>]</span><br><span class="line">QString::<span class="built_in">fromstdstring</span>(_ini[<span class="string">&quot;section&quot;</span>][<span class="string">&quot;key&quot;</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">qDebug</span>()&lt;&lt;<span class="string">&quot;PLC1:IP:&quot;</span>&lt;&lt;QString::<span class="built_in">fromStdString</span>((*_ini)[str_key.<span class="built_in">toLocal8Bit</span>().<span class="built_in">toStdString</span>()][<span class="string">&quot;IP&quot;</span>]);</span><br></pre></td></tr></table></figure><h2 id="重要说明"><a href="#重要说明" class="headerlink" title="重要说明"></a>重要说明</h2><ul><li>该库支持中文，包括字段，键，值都可以使用中文</li><li>注释必须为单独的行，不可与参数在同一行，若为同一行，写参数会消除参数同一行后面的注释</li><li>读写参数值时，必须使用string类型，不能使用QString类型，否则会出错</li><li>读写参数前，必须先确保有相应的段，否则会出错（首次创建段之后，重启程序，则不会异常）</li></ul>]]></content>
      
      
      <categories>
          
          <category> 软件编程 </category>
          
          <category> C++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术 </tag>
            
            <tag> C++ </tag>
            
            <tag> 设计模式 </tag>
            
            <tag> 泛编程 </tag>
            
            <tag> ini读写 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OpenCV</title>
      <link href="/2024/02/02/%E8%BD%AF%E4%BB%B6%E7%BC%96%E7%A8%8B/OpenCV/"/>
      <url>/2024/02/02/%E8%BD%AF%E4%BB%B6%E7%BC%96%E7%A8%8B/OpenCV/</url>
      
        <content type="html"><![CDATA[<h1 id="OpenCV"><a href="#OpenCV" class="headerlink" title="OpenCV"></a>OpenCV</h1><h2 id="OpenCV-常用算子"><a href="#OpenCV-常用算子" class="headerlink" title="OpenCV_常用算子"></a>OpenCV_常用算子</h2><h2 id="OpenCV-源码编译"><a href="#OpenCV-源码编译" class="headerlink" title="OpenCV_源码编译"></a>OpenCV_源码编译</h2><h3 id="windows"><a href="#windows" class="headerlink" title="windows"></a>windows</h3><h3 id="1-下载源码"><a href="#1-下载源码" class="headerlink" title="1.下载源码"></a>1.下载源码</h3><h3 id="linux"><a href="#linux" class="headerlink" title="linux"></a>linux</h3>]]></content>
      
      
      <categories>
          
          <category> 软件编程 </category>
          
          <category> OpenCV </category>
          
      </categories>
      
      
        <tags>
            
            <tag> opencv </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C</title>
      <link href="/2024/01/25/%E5%B5%8C%E5%85%A5%E5%BC%8F/C/"/>
      <url>/2024/01/25/%E5%B5%8C%E5%85%A5%E5%BC%8F/C/</url>
      
        <content type="html"><![CDATA[<h1 id="C-回调函数带参数"><a href="#C-回调函数带参数" class="headerlink" title="C_回调函数带参数"></a>C_回调函数带参数</h1><h2 id="回调函数带参数示例"><a href="#回调函数带参数示例" class="headerlink" title="回调函数带参数示例"></a>回调函数带参数示例</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="type">int</span> <span class="title function_">Callback_1</span><span class="params">(<span class="type">int</span> x)</span> <span class="comment">// Callback Function 1</span></span><br><span class="line"> </span><br><span class="line">&#123;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Hello, this is Callback_1: x = %d &quot;</span>, x);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">Handle</span><span class="params">(<span class="type">int</span> y, <span class="type">int</span> (*Callback)(<span class="type">int</span>))</span></span><br><span class="line"> </span><br><span class="line">&#123;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Entering Handle Function. &quot;</span>);</span><br><span class="line"> </span><br><span class="line">Callback(y);</span><br><span class="line"> </span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Leaving Handle Function. &quot;</span>);</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">    Handle(<span class="number">10</span>, Callback_1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//运行结果:</span></span><br><span class="line"><span class="comment">//Entering Handle Function. Hello, this is Callback_1: x = 10 Leaving Handle Function.</span></span><br></pre></td></tr></table></figure><h1 id="define"><a href="#define" class="headerlink" title="define"></a>define</h1><p>1.一个宏定义多行,每行末尾使用   \   符号,即可实现,可用来定义函数等</p><h1 id="C-数据结构-链表"><a href="#C-数据结构-链表" class="headerlink" title="C_数据结构_链表"></a>C_数据结构_链表</h1><h2 id="创建链表"><a href="#创建链表" class="headerlink" title="创建链表"></a>创建链表</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义结构体,包含一个指向自己的结构体指针</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">student</span>&#123;</span></span><br><span class="line"><span class="type">int</span> score;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">student</span> *<span class="title">next</span>;</span></span><br><span class="line">&#125; LinkList;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">LinkList *<span class="title function_">creat</span><span class="params">(<span class="type">int</span> n)</span>&#123;</span><br><span class="line">LinkList *head, *node, *end;<span class="comment">//定义头节点，普通节点，尾部节点；</span></span><br><span class="line">head = (LinkList*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LinkList));<span class="comment">//分配地址</span></span><br><span class="line">end = head;         <span class="comment">//若是空链表则头尾节点一样</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">node = (LinkList*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LinkList));</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;node-&gt;score);</span><br><span class="line">end-&gt;next = node;</span><br><span class="line">end = node;</span><br><span class="line">&#125;</span><br><span class="line">end-&gt;next = <span class="literal">NULL</span>;<span class="comment">//结束创建</span></span><br><span class="line"><span class="keyword">return</span> head;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="修改链表节点值"><a href="#修改链表节点值" class="headerlink" title="修改链表节点值"></a>修改链表节点值</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">change</span><span class="params">(LinkList *<span class="built_in">list</span>,<span class="type">int</span> n)</span> &#123;<span class="comment">//n为第n个节点</span></span><br><span class="line">LinkList *t = <span class="built_in">list</span>;</span><br><span class="line"><span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (i &lt; n &amp;&amp; t != <span class="literal">NULL</span>) &#123;</span><br><span class="line">t = t-&gt;next;</span><br><span class="line">i++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (t != <span class="literal">NULL</span>) &#123;</span><br><span class="line"><span class="built_in">puts</span>(<span class="string">&quot;输入要修改的值&quot;</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;t-&gt;score);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="built_in">puts</span>(<span class="string">&quot;节点不存在&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="删除链表节点"><a href="#删除链表节点" class="headerlink" title="删除链表节点"></a>删除链表节点</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">delet</span><span class="params">(LinkList *<span class="built_in">list</span>, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">LinkList *t = <span class="built_in">list</span>, *in;</span><br><span class="line"><span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (i &lt; n &amp;&amp; t != <span class="literal">NULL</span>) &#123;</span><br><span class="line">in = t;</span><br><span class="line">t = t-&gt;next;</span><br><span class="line">i++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (t != <span class="literal">NULL</span>) &#123;</span><br><span class="line">in-&gt;next = t-&gt;next;</span><br><span class="line"><span class="built_in">free</span>(t);    <span class="comment">//释放节点</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="built_in">puts</span>(<span class="string">&quot;节点不存在&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="插入链表节点"><a href="#插入链表节点" class="headerlink" title="插入链表节点"></a>插入链表节点</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">insert</span><span class="params">(LinkList *<span class="built_in">list</span>, <span class="type">int</span> n)</span> &#123;</span><br><span class="line">LinkList *t = <span class="built_in">list</span>, *in;</span><br><span class="line"><span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (i &lt; n &amp;&amp; t != <span class="literal">NULL</span>) &#123;</span><br><span class="line">t = t-&gt;next;</span><br><span class="line">i++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (t != <span class="literal">NULL</span>) &#123;</span><br><span class="line">in = (LinkList*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LinkList));</span><br><span class="line"><span class="built_in">puts</span>(<span class="string">&quot;输入要插入的值&quot;</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;in-&gt;score);</span><br><span class="line">in-&gt;next = t-&gt;next;<span class="comment">//填充in节点的指针域，也就是说把in的指针域指向t的下一个节点</span></span><br><span class="line">t-&gt;next = in;<span class="comment">//填充t节点的指针域，把t的指针域重新指向in</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="built_in">puts</span>(<span class="string">&quot;节点不存在&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="输出链表-遍历链表"><a href="#输出链表-遍历链表" class="headerlink" title="输出链表(遍历链表)"></a>输出链表(遍历链表)</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">       <span class="keyword">while</span> (h-&gt;next != <span class="literal">NULL</span>) &#123;</span><br><span class="line">       <span class="built_in">printf</span>(<span class="string">&quot;%d  &quot;</span>, h-&gt;score);</span><br><span class="line">h = h-&gt;next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="命名规则"><a href="#命名规则" class="headerlink" title="命名规则"></a>命名规则</h1><p><a href="https://mp.weixin.qq.com/s/7174gKcN6fQqkVtdvj7gug">参考链接</a></p>]]></content>
      
      
      <categories>
          
          <category> 嵌入式 </category>
          
          <category> C </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术 </tag>
            
            <tag> C </tag>
            
            <tag> 回调函数 </tag>
            
            <tag> define </tag>
            
            <tag> 数据结构_链表 </tag>
            
            <tag> 命名规则 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nssm</title>
      <link href="/2023/12/14/%E7%BB%BC%E5%90%88/nssm/"/>
      <url>/2023/12/14/%E7%BB%BC%E5%90%88/nssm/</url>
      
        <content type="html"><![CDATA[<h1 id="nssm"><a href="#nssm" class="headerlink" title="nssm"></a>nssm</h1><h2 id="下载nssm"><a href="#下载nssm" class="headerlink" title="下载nssm"></a>下载nssm</h2><h2 id="安装nssm"><a href="#安装nssm" class="headerlink" title="安装nssm"></a>安装nssm</h2><h2 id="nssm查看已经安装的服务"><a href="#nssm查看已经安装的服务" class="headerlink" title="nssm查看已经安装的服务"></a>nssm查看已经安装的服务</h2><ul><li>打开powershell,输入</li><li><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Get-WmiObject win32_service | ?&#123;$_.PathName -like &#x27;*nssm*&#x27;&#125; | select Name, DisplayName, State, PathName</span><br></pre></td></tr></table></figure></li></ul><h2 id="nssm安装服务"><a href="#nssm安装服务" class="headerlink" title="nssm安装服务"></a>nssm安装服务</h2><ul><li>打开powershell,输入</li><li><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nssm install &lt;服务名&gt; &lt;路径&gt;</span><br></pre></td></tr></table></figure></li><li>例如<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nssm install myservice &quot;C:\Program Files\myservice\myservice.exe&quot;</span><br></pre></td></tr></table></figure></li><li>注意: 路径中不能有空格</li></ul><h2 id="nssm卸载服务"><a href="#nssm卸载服务" class="headerlink" title="nssm卸载服务"></a>nssm卸载服务</h2><ul><li>打开powershell,输入</li><li><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nssm remove &lt;服务名&gt;</span><br></pre></td></tr></table></figure></li><li>例如<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nssm remove myservice</span><br></pre></td></tr></table></figure></li></ul><h2 id="编辑已安装的服务"><a href="#编辑已安装的服务" class="headerlink" title="编辑已安装的服务"></a>编辑已安装的服务</h2><ul><li>打开powershell,输入</li><li><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nssm edit &lt;服务名&gt;</span><br></pre></td></tr></table></figure></li><li>例如<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nssm edit myservice</span><br></pre></td></tr></table></figure></li><li>编辑后,按下ctrl+s保存</li></ul><h2 id="启动已安装的服务"><a href="#启动已安装的服务" class="headerlink" title="启动已安装的服务"></a>启动已安装的服务</h2><ul><li>打开powershell,输入</li><li></li></ul><pre><code>nssm start &lt;服务名&gt;</code></pre>]]></content>
      
      
      <categories>
          
          <category> 综合 </category>
          
          <category> 博客 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客 </tag>
            
            <tag> 环境 </tag>
            
            <tag> 启动 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MDK</title>
      <link href="/2023/12/12/%E5%B5%8C%E5%85%A5%E5%BC%8F/MDK_keil/"/>
      <url>/2023/12/12/%E5%B5%8C%E5%85%A5%E5%BC%8F/MDK_keil/</url>
      
        <content type="html"><![CDATA[<h1 id="MDK编码"><a href="#MDK编码" class="headerlink" title="MDK编码"></a>MDK编码</h1><h2 id="MDK使用utf-8"><a href="#MDK使用utf-8" class="headerlink" title="MDK使用utf-8"></a>MDK使用utf-8</h2><h3 id="设置项目编码为utf-8"><a href="#设置项目编码为utf-8" class="headerlink" title="设置项目编码为utf-8"></a>设置项目编码为utf-8</h3><blockquote><p><img src="/../../images/MDK/1711533489853.png" alt="1711533489853"></p></blockquote><h3 id="设置编译格式为utf-8"><a href="#设置编译格式为utf-8" class="headerlink" title="设置编译格式为utf-8"></a>设置编译格式为utf-8</h3><blockquote><p><img src="/../../images/MDK/1711533503607.png" alt="1711533503607"></p></blockquote><h2 id="编译优化"><a href="#编译优化" class="headerlink" title="编译优化"></a>编译优化</h2><ul><li>修改编译等级可以明显提升性能,但也需要注意编译等级过高可能会导致部分功能失效</li><li>  <img src="/../../images/MDK_keil/2026-01-15-11-04-10.png" alt="2026-01-15-11-04-10.png"></li></ul>]]></content>
      
      
      <categories>
          
          <category> 嵌入式 </category>
          
          <category> STM32 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MDK </tag>
            
            <tag> keil </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>yolov8</title>
      <link href="/2023/12/05/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/yolov8/"/>
      <url>/2023/12/05/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/yolov8/</url>
      
        <content type="html"><![CDATA[<h1 id="yolov8"><a href="#yolov8" class="headerlink" title="yolov8"></a>yolov8</h1><h2 id="1-环境配置"><a href="#1-环境配置" class="headerlink" title="1. 环境配置"></a>1. 环境配置</h2><h1 id="Nvidia"><a href="#Nvidia" class="headerlink" title="Nvidia"></a>Nvidia</h1><h2 id="显卡驱动"><a href="#显卡驱动" class="headerlink" title="显卡驱动"></a>显卡驱动</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><ol><li>安装驱动stuido版本，不安装game</li><li>安装visual studio 2022</li><li>安装cuda11.6</li><li>安装cudnn</li></ol><h2 id="CUDA"><a href="#CUDA" class="headerlink" title="CUDA"></a>CUDA</h2><p><a href="https://blog.csdn.net/chen565884393/article/details/127905428">CUDA,cudnn,版本对应，参考文档</a></p><h2 id="cudnn"><a href="#cudnn" class="headerlink" title="cudnn"></a>cudnn</h2><h2 id="安装完重启电脑"><a href="#安装完重启电脑" class="headerlink" title="安装完重启电脑"></a>安装完重启电脑</h2><h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><ol><li>visual studio 创建cuda runtime项目，直接运行</li><li>终端窗口弹出数组计算结果</li></ol><h2 id="安装conda"><a href="#安装conda" class="headerlink" title="安装conda"></a>安装conda</h2><p><a href="https://www.anaconda.com/download/">conda官网下载</a></p><ul><li>下载windows版</li><li>安装要点：<br><img src="/../../images/yolov8/1711531751763.png" alt="1711531751763"></li><li>安装位置：随意<br><img src="/../../images/yolov8/1711531760380.png" alt="1711531760380"></li></ul><h2 id="安装pycharm社区版"><a href="#安装pycharm社区版" class="headerlink" title="安装pycharm社区版"></a>安装pycharm社区版</h2><p><a href="https://www.jetbrains.com/pycharm/download/?section=windows">pycharm官网下载</a></p><ul><li>下载社区版</li></ul><p><img src="/../../images/yolov8/1711531770497.png" alt="1711531770497"></p><ul><li>若有需要勾选的，全部勾选</li></ul><h3 id="创建conda的yolov8虚拟环境"><a href="#创建conda的yolov8虚拟环境" class="headerlink" title="创建conda的yolov8虚拟环境"></a>创建conda的yolov8虚拟环境</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">conda create -n yolov8 python=3.10</span><br><span class="line">conda activate yolov8</span><br></pre></td></tr></table></figure><h3 id="1-3-安装pytorch"><a href="#1-3-安装pytorch" class="headerlink" title="1.3 安装pytorch"></a>1.3 安装pytorch</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install pytorch torchvision torchaudio cudatoolkit=11.3 -c pytorch</span><br></pre></td></tr></table></figure><h3 id="1-4-安装yolov8"><a href="#1-4-安装yolov8" class="headerlink" title="1.4 安装yolov8"></a>1.4 安装yolov8</h3><p>先安装pytorch，后安装yolov8，否则会被先安装一个pytorch-cpu</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install ultralytics</span><br></pre></td></tr></table></figure><h2 id="2-使用yolov8"><a href="#2-使用yolov8" class="headerlink" title="2. 使用yolov8"></a>2. 使用yolov8</h2><h3 id="2-1-训练模型"><a href="#2-1-训练模型" class="headerlink" title="2.1 训练模型"></a>2.1 训练模型</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">from</span> ultralytics <span class="keyword">import</span> YOLO</span><br><span class="line"></span><br><span class="line">model = YOLO(<span class="string">&quot;yolov8n.yaml&quot;</span>)</span><br><span class="line">model = YOLO(<span class="string">&quot;yolov8n.pt&quot;</span>)</span><br><span class="line">model = YOLO(<span class="string">&quot;yolov8n.yaml&quot;</span>).load(<span class="string">&quot;yolov8n.pt&quot;</span>)</span><br><span class="line"></span><br><span class="line">model.train(data=<span class="string">&quot;C:/Users/fengj/Desktop/demo2/data.yaml&quot;</span>,epochs=<span class="number">100</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-2-模型预测"><a href="#2-2-模型预测" class="headerlink" title="2.2 模型预测"></a>2.2 模型预测</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">from</span> ultralytics <span class="keyword">import</span> YOLO</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加载模型</span></span><br><span class="line"><span class="comment"># model = YOLO(&#x27;yolov8n.pt&#x27;)  # 加载官方模型</span></span><br><span class="line">model = YOLO(<span class="string">&#x27;best.pt&#x27;</span>, task=<span class="string">&quot;detect&quot;</span>)  <span class="comment"># 加载自定义模型</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用模型进行预测</span></span><br><span class="line">results = model(<span class="string">&quot;C:/Users/fengj/Desktop/demo2/val/images/&quot;</span>, save = <span class="literal">True</span> , conf = <span class="number">0.25</span>)  <span class="comment"># 对图像进行预测</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="3-重要参数"><a href="#3-重要参数" class="headerlink" title="3. 重要参数"></a>3. 重要参数</h2><p>batch</p><ul><li>训练时，batch_size的大小，越大越快，但是占用内存也会变大</li><li>预测时，batch_size的大小，越大越快，但是占用内存也会变大</li><li>一般情况下，batch_size&#x3D;64</li></ul><p>epochs</p><ul><li>训练时，迭代次数，越大越快，但是精度也会变低</li><li>预测时，迭代次数，越大越快，但是占用内存也会变大</li><li>一般情况下，epochs&#x3D;100</li></ul><p>conf</p><ul><li>预测时，置信度阈值，越大越精准，但是占用内存也会变大</li><li>一般情况下，conf&#x3D;0.25</li></ul><h2 id="4-训练数据准备"><a href="#4-训练数据准备" class="headerlink" title="4. 训练数据准备"></a>4. 训练数据准备</h2><h3 id="4-1-训练数据格式"><a href="#4-1-训练数据格式" class="headerlink" title="4.1 训练数据格式"></a>4.1 训练数据格式</h3><ul><li>使用labelme，无需转换格式</li><li>使用labelimg，需要转换格式</li></ul><h3 id="4-2-训练数据标注"><a href="#4-2-训练数据标注" class="headerlink" title="4.2 训练数据标注"></a>4.2 训练数据标注</h3><ul><li>标注工具：labelme</li><li>标注步骤：<ul><li>打开labelme，点击文件-&gt;打开数据集</li><li>选择数据集，点击打开</li><li>标注数据，点击标注</li><li>标注完成，点击保存</li><li>导出数据，点击导出数据集</li><li>选择数据集，点击保存</li><li>选择保存路径，点击保存</li><li>选择格式，选择yolo</li><li>选择保存路径，点击保存</li></ul></li><li></li></ul>]]></content>
      
      
      <categories>
          
          <category> 深度学习 </category>
          
          <category> yolov8 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> conda </tag>
            
            <tag> python </tag>
            
            <tag> yolov8 </tag>
            
            <tag> Nvidia </tag>
            
            <tag> GPU </tag>
            
            <tag> CUDA </tag>
            
            <tag> cudnn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python</title>
      <link href="/2023/12/05/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/Python/"/>
      <url>/2023/12/05/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/Python/</url>
      
        <content type="html"><![CDATA[<h1 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h1><h2 id="1-基本数据类型"><a href="#1-基本数据类型" class="headerlink" title="1. 基本数据类型"></a>1. 基本数据类型</h2><ul><li>整型：int</li><li>浮点型：float</li><li>字符串：str</li><li>布尔型：bool</li><li>列表：list</li><li>元组：tuple</li><li>字典：dict</li><li>集合：set</li><li>字典推导式：dict comprehension</li><li>集合推导式：set comprehension</li><li>列表推导式：list comprehension</li><li>元组推导式：tuple comprehension</li><li>字符串格式化：string formatting</li><li>字符串拼接：string concatenation</li><li>字符串切片：string slicing</li><li>字符串切片：string slicing</li></ul><h2 id="2-变量"><a href="#2-变量" class="headerlink" title="2. 变量"></a>2. 变量</h2><ul><li>变量名必须以字母或下划线开头，后面可以跟任意的字母、数字或下划线</li><li>变量名不能是关键字</li><li>变量名区分大小写</li><li>变量名不能是Python的保留字</li><li>变量名不能是数字开头</li></ul><h1 id="conda随手记"><a href="#conda随手记" class="headerlink" title="conda随手记"></a>conda随手记</h1><h2 id="创建虚拟环境"><a href="#创建虚拟环境" class="headerlink" title="创建虚拟环境"></a>创建虚拟环境</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda create -n env_name python=3.8</span><br></pre></td></tr></table></figure><h2 id="激活虚拟环境"><a href="#激活虚拟环境" class="headerlink" title="激活虚拟环境"></a>激活虚拟环境</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda activate env_name</span><br></pre></td></tr></table></figure><h2 id="退出虚拟环境"><a href="#退出虚拟环境" class="headerlink" title="退出虚拟环境"></a>退出虚拟环境</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda deactivate</span><br></pre></td></tr></table></figure><h2 id="删除虚拟环境"><a href="#删除虚拟环境" class="headerlink" title="删除虚拟环境"></a>删除虚拟环境</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda remove -n env_name --all</span><br></pre></td></tr></table></figure><h2 id="查看已创建的虚拟环境"><a href="#查看已创建的虚拟环境" class="headerlink" title="查看已创建的虚拟环境"></a>查看已创建的虚拟环境</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda env list</span><br></pre></td></tr></table></figure><h2 id="安装包"><a href="#安装包" class="headerlink" title="安装包"></a>安装包</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install package_name</span><br></pre></td></tr></table></figure><h2 id="更新包"><a href="#更新包" class="headerlink" title="更新包"></a>更新包</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda update package_name</span><br></pre></td></tr></table></figure><h2 id="删除包"><a href="#删除包" class="headerlink" title="删除包"></a>删除包</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda remove package_name</span><br></pre></td></tr></table></figure><h2 id="安装pip包"><a href="#安装pip包" class="headerlink" title="安装pip包"></a>安装pip包</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install package_name</span><br></pre></td></tr></table></figure><h2 id="更新pip包"><a href="#更新pip包" class="headerlink" title="更新pip包"></a>更新pip包</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -U package_name</span><br></pre></td></tr></table></figure><h2 id="删除pip包"><a href="#删除pip包" class="headerlink" title="删除pip包"></a>删除pip包</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip uninstall package_name</span><br></pre></td></tr></table></figure><h2 id="安装jupyter"><a href="#安装jupyter" class="headerlink" title="安装jupyter"></a>安装jupyter</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install jupyter</span><br></pre></td></tr></table></figure><h2 id="安装jupyterlab"><a href="#安装jupyterlab" class="headerlink" title="安装jupyterlab"></a>安装jupyterlab</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install jupyterlab</span><br></pre></td></tr></table></figure><h2 id="安装jupyterlab-git"><a href="#安装jupyterlab-git" class="headerlink" title="安装jupyterlab-git"></a>安装jupyterlab-git</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install -c conda-forge jupyterlab-git</span><br></pre></td></tr></table></figure><h2 id="pycharm加载conda虚拟环境"><a href="#pycharm加载conda虚拟环境" class="headerlink" title="pycharm加载conda虚拟环境"></a>pycharm加载conda虚拟环境</h2>]]></content>
      
      
      <categories>
          
          <category> 深度学习 </category>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> conda </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vscode</title>
      <link href="/2023/11/17/%E8%BD%AF%E4%BB%B6%E7%BC%96%E7%A8%8B/vscode/"/>
      <url>/2023/11/17/%E8%BD%AF%E4%BB%B6%E7%BC%96%E7%A8%8B/vscode/</url>
      
        <content type="html"><![CDATA[<h1 id="VScode"><a href="#VScode" class="headerlink" title="VScode"></a>VScode</h1><h2 id="配置VScode语言"><a href="#配置VScode语言" class="headerlink" title="配置VScode语言"></a>配置VScode语言</h2><ol><li>调出命令框（Ctrl+Shift+P）</li><li>输入language</li><li>选择configure display language</li><li>选择en（英文），zH-cn（中文简体）</li></ol><h2 id="格式化文本"><a href="#格式化文本" class="headerlink" title="格式化文本"></a>格式化文本</h2><ol><li>安装插件Clang-Format（写文档的时候，不确定是否一定要安装这个插件）</li><li>clang-Format 下载LLVM，并安装。（还需要在vs中设置google格式化规则）<ol><li>Ctrl + ,， 打开设置</li><li>输入 clang-format</li><li>将C_Cpp.clang_format_fallbackStyle值从Visual Studio改为 Google</li><li>如图<img src="/../../images/vscode/1711531685606.png" alt="1711531685606"></li></ol></li><li>默认格式化配置<ol><li>右键-&gt;使用…格式化-&gt;选择clang-Format（google格式），也可以选择系统默认格式化。</li></ol></li></ol><h2 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h2><ol><li>C&#x2F;C++</li><li>ChatGPT-中文版 （注册账号可以免费使用gpt-3.5）</li><li>Chinese（简体中文）</li><li>Clang-Format   （代码google格式化规则）</li><li>Code Runner    （运行多种语言代码）</li><li>Keil Assistant    （MDK开发支持）</li><li>Markdown PDF</li><li>Markdown All in One</li><li>Markdown Preview Enhanced （预览可以有目录）</li><li>markdownlint  （检查md语法格式，格式化）</li><li>Typora</li><li>python</li><li>Var Conversion （变量名称转换）</li><li>verilog-HDL&#x2F;System Verilog&#x2F;Bluespec SystemVerilog（verilog语法高亮，格式化）</li><li>vscode-icons （图标）</li><li>vscode-mindmap   (思维导图，文件名*.km可以使用)</li><li>Qt tools   （备选，扫描套件用，不建议工程使用）</li><li>Qt Configure （备选，可以用vscode新建并开发qt程序，需要注意，尽量不要用qt creator 大量改动文件结构，不建议工程使用）</li><li>GitHub Copilot （很好用的代码AI提示，需要付费，会严重拖慢VScode的启动速度</li><li>Tabnine AI ***** （免费的代码AI提示，相对不那么智能，会严重拖慢VScode的启动速度</li><li>markmap (好用的markdown转思维导图工具)</li><li>var-translate-en (好用的中文翻译工具)</li></ol><h2 id="C-C"><a href="#C-C" class="headerlink" title="C++&#x2F;C"></a>C++&#x2F;C</h2><h3 id="C-C-Themes"><a href="#C-C-Themes" class="headerlink" title="C&#x2F;C++ Themes"></a>C&#x2F;C++ Themes</h3><ul><li>编写C项目代码，可以使用该插件设置主题颜色。针对C代码的高亮更完善。</li><li>设置-&gt;代码格式设置-&gt;找到format相关字样的，设置为Google即可使用google格式化，设置为visual studio则使用vs格式化。无需再下载clang format插件</li></ul><h3 id="1-keil记录"><a href="#1-keil记录" class="headerlink" title="1. keil记录"></a>1. keil记录</h3><ul><li>启用C++&#x2F;C插件，写keil程序，会头文件报错</li><li>报错内容为：typedef redefinition with different types (‘unsigned int’ vs ‘unsigned long long’)，大意为vacode判断会出现编译异常。</li><li>此时，只需要直接右键该报错内容，禁用此类报错,禁用代码分析即可。不影响编译。</li><li>C++插件中找到代码分析，找到Run Automatlcally 设置为false<br><img src="/../../images/vscode/1711531710320.png" alt="1711531710320"></li><li>若需要启用代码分析，则按下快捷键Ctrl+Shift+P，输入C++：run Code Analysis，即可启用代码分析。<br><img src="/../../images/vscode/1711531719781.png" alt="1711531719781"></li></ul><h2 id="问题记录"><a href="#问题记录" class="headerlink" title="问题记录"></a>问题记录</h2><ul><li><input checked disabled type="checkbox"> 快捷键失效,可能是其它软件快捷键冲突,或者</li></ul><h2 id="8-将Qt项目移植到vscode"><a href="#8-将Qt项目移植到vscode" class="headerlink" title="8. 将Qt项目移植到vscode"></a>8. 将Qt项目移植到vscode</h2><ul><li><input checked disabled type="checkbox"> 复制vs-qt项目的.vs文件夹,scripts文件夹</li><li><input checked disabled type="checkbox"> .vs文件夹下launch.json文件中,修改”program”: “${workspaceRoot}&#x2F;build&#x2F;release&#x2F;<em><strong>.exe”,其中的</strong></em>.exe填写生成的进程名</li><li><input checked disabled type="checkbox"> scripts文件夹下两个bat文件,分别是debug和release,修改文件中含***.pro,***.exe相应的地方</li></ul><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> QT_DIR=d:\Qt\<span class="number">6</span>.<span class="number">7</span>.<span class="number">3</span>\msvc2019_64</span><br><span class="line"><span class="built_in">set</span> SRC_DIR=<span class="variable">%cd%</span></span><br><span class="line"><span class="built_in">set</span> BUILD_DIR=<span class="variable">%cd%</span>\build</span><br><span class="line">::只修改下述两个宏即可</span><br><span class="line">:: ProName是pro文件的名字</span><br><span class="line"><span class="built_in">set</span> ProName=RewindingDetection_V3</span><br><span class="line">:: SoftWareName是生成exe文件的名字   </span><br><span class="line"><span class="built_in">set</span> SoftWareName=RewindingDetection_V3</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exist</span> <span class="variable">%QT_DIR%</span> <span class="keyword">exit</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exist</span> <span class="variable">%SRC_DIR%</span> <span class="keyword">exit</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exist</span> <span class="variable">%BUILD_DIR%</span> <span class="built_in">md</span> <span class="variable">%BUILD_DIR%</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> build</span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> &quot;C:\Program Files (x86)\Microsoft Visual Studio\<span class="number">2019</span>\Community\VC\Auxiliary\Build\vcvarsall.bat&quot; x64</span><br><span class="line"></span><br><span class="line"><span class="variable">%QT_DIR%</span>\bin\qmake.exe <span class="variable">%SRC_DIR%</span>\<span class="variable">%ProName%</span>.pro -spec win32-msvc  &quot;CONFIG+=release&quot;</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">exist</span> <span class="variable">%BUILD_DIR%</span>\release\<span class="variable">%SoftWareName%</span>.exe <span class="built_in">del</span> <span class="variable">%BUILD_DIR%</span>\release\<span class="variable">%SoftWareName%</span>.exe</span><br><span class="line">nmake Release</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exist</span> <span class="variable">%BUILD_DIR%</span>\release\Qt5Core.dll (</span><br><span class="line">  <span class="variable">%QT_DIR%</span>\bin\windeployqt.exe <span class="variable">%BUILD_DIR%</span>\release\<span class="variable">%SoftWareName%</span>.exe</span><br><span class="line">)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 综合 </category>
          
          <category> vscode </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 环境搭建 </tag>
            
            <tag> vscode </tag>
            
            <tag> 编程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows</title>
      <link href="/2023/11/17/%E7%BB%BC%E5%90%88/Windows/"/>
      <url>/2023/11/17/%E7%BB%BC%E5%90%88/Windows/</url>
      
        <content type="html"><![CDATA[<h1 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h1><h2 id="系统语言"><a href="#系统语言" class="headerlink" title="系统语言"></a>系统语言</h2><p>系统语言选择English，地区选择china，格式选择chinese<br><img src="/../../images/Windows/1711531646844.png" alt="1711531646844"></p><h2 id="通用软件语言"><a href="#通用软件语言" class="headerlink" title="通用软件语言"></a>通用软件语言</h2><p>部分软件乱码解决办法<br><img src="/../../images/Windows/1711531653790.png" alt="1711531653790"></p><h1 id="windows局域网共享文件以及远程控制"><a href="#windows局域网共享文件以及远程控制" class="headerlink" title="windows局域网共享文件以及远程控制"></a>windows局域网共享文件以及远程控制</h1><blockquote><p>简介:局域网操作,静态IP,支持设置网关,只要ping通即可</p></blockquote><h2 id="一-开启网络共享和网络发现"><a href="#一-开启网络共享和网络发现" class="headerlink" title="一. 开启网络共享和网络发现"></a>一. 开启网络共享和网络发现</h2><p><img src="/../../images/Windows/1711534038627.png" alt="1711534038627"></p><h2 id="二-共享的文件属性设置共享"><a href="#二-共享的文件属性设置共享" class="headerlink" title="二.共享的文件属性设置共享"></a>二.共享的文件属性设置共享</h2><p><img src="/../../images/Windows/1711534046031.png" alt="1711534046031"></p><p><img src="/../../images/Windows/1711534053663.png" alt="1711534053663"></p><h2 id="三-系统属性设置允许远程连接到此电脑"><a href="#三-系统属性设置允许远程连接到此电脑" class="headerlink" title="三.系统属性设置允许远程连接到此电脑"></a>三.系统属性设置允许远程连接到此电脑</h2><p><img src="/../../images/Windows/1711534062578.png" alt="1711534062578"></p><h2 id="四-设置无密码远程连接-Win-R打开运行输入指令gpedit-msc-打开-本地策略"><a href="#四-设置无密码远程连接-Win-R打开运行输入指令gpedit-msc-打开-本地策略" class="headerlink" title="四.设置无密码远程连接,Win+R打开运行输入指令gpedit.msc,打开:本地策略"></a>四.设置无密码远程连接,Win+R打开运行输入指令gpedit.msc,打开:本地策略</h2><p><img src="/../../images/Windows/1711534070035.png" alt="1711534070035"></p><p><img src="/../../images/Windows/1711534076800.png" alt="1711534076800"></p><h2 id="五-切换到远程电脑-打开网络-则会自动搜索到该计算机-若没有搜索到-则在资源管理器的地址栏中输入-192-168-这里的-号是静态IP-则会进入-两个反斜杠不可以少"><a href="#五-切换到远程电脑-打开网络-则会自动搜索到该计算机-若没有搜索到-则在资源管理器的地址栏中输入-192-168-这里的-号是静态IP-则会进入-两个反斜杠不可以少" class="headerlink" title="五. 切换到远程电脑,打开网络,则会自动搜索到该计算机,若没有搜索到,则在资源管理器的地址栏中输入\192.168..(这里的*号是静态IP),则会进入.两个反斜杠不可以少"></a>五. 切换到远程电脑,打开网络,则会自动搜索到该计算机,若没有搜索到,则在资源管理器的地址栏中输入\192.168.<em>.</em>(这里的*号是静态IP),则会进入.两个反斜杠不可以少</h2><p><img src="/../../images/Windows/1711534086956.png" alt="1711534086956"></p><h2 id="六-远程桌面控制连接-输入静态IP-弹出输入凭证-只需输入用户名-密码一栏不用填写-点击确认即可"><a href="#六-远程桌面控制连接-输入静态IP-弹出输入凭证-只需输入用户名-密码一栏不用填写-点击确认即可" class="headerlink" title="六. 远程桌面控制连接,输入静态IP,弹出输入凭证,只需输入用户名,密码一栏不用填写.点击确认即可"></a>六. 远程桌面控制连接,输入静态IP,弹出输入凭证,只需输入用户名,密码一栏不用填写.点击确认即可</h2><p><img src="/../../images/Windows/1711534096654.png" alt="1711534096654"></p><p><img src="/../../images/Windows/1711534104299.png" alt="1711534104299"></p><p><img src="/../../images/Windows/1711534111276.png" alt="1711534111276"></p><p>评价:</p><p>该方法可以在局域网内连接另一台电脑,作为服务器或者资料存储盘,再配合搭建一个http服务器,即可很方便管理,下载大文件.不会有云盘的限速问题.</p><pre><code>(本次的被控对象已经搭建了git服务器以及http服务器&lt;用于下载文件&gt;,远程操作软件使用的todesk(传输大文件很慢),搭建完成后即可使用windows远程桌面服务)</code></pre><h1 id="windows永久激活"><a href="#windows永久激活" class="headerlink" title="windows永久激活"></a>windows永久激活</h1><ol><li>打开PowerShell（管理员）</li><li>输入代码 irm <a href="https://massgrave.dev/get|iex">https://massgrave.dev/get|iex</a>   <img src="/../../images/windows/1709982831315.png" alt="1709982831315"></li><li>等待联网并弹出黑框   <img src="/../../images/windows/1709983115117.png" alt="1709983115117"></li><li>弹出黑框，有几个选项，输入1，激活windows。（输入2激活offce等）</li><li>等待出现Permanently字样的提示，就激活成功了      <img src="/../../images/windows/1709983145593.png" alt="1709983145593"></li><li>激活成功后重启电脑，即完成</li></ol><h1 id="Potplayer"><a href="#Potplayer" class="headerlink" title="Potplayer"></a>Potplayer</h1><h2 id="界面卡顿-更换解码方式"><a href="#界面卡顿-更换解码方式" class="headerlink" title="界面卡顿(更换解码方式)"></a>界面卡顿(更换解码方式)</h2><ul><li>左上角菜单（播放页面内右键）-&gt;滤镜-&gt;使用内置DXVA视频解码器</li><li>左上角菜单（播放页面内右键）-&gt;选项-&gt;声音-&gt;语言&#x2F;同步&#x2F;其他-&gt;同步调整单位（毫秒）：50-&gt;默认同步(毫秒)：50-&gt;次设备输出同步(毫秒):50</li></ul><h1 id="ResilioSync-同步盘"><a href="#ResilioSync-同步盘" class="headerlink" title="ResilioSync_同步盘"></a>ResilioSync_同步盘</h1><h2 id="下载安装"><a href="#下载安装" class="headerlink" title="下载安装"></a>下载安装</h2><p><a href="https://www.resilio.com/download/">ResilioSync地址</a></p><ul><li>下载Home版,个人免费版</li><li>双击安装,不勾选注册为服务</li></ul><h2 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h2><ul><li>左上角加号可以设置文件夹映射,可以共享密钥</li><li>其它拥有ResilioSync的电脑,可以从左上角加号,输入密钥或链接,后同步该文件夹</li></ul><h2 id="基本测试"><a href="#基本测试" class="headerlink" title="基本测试"></a>基本测试</h2><ul><li>局域网内同步效果非常好</li><li>公网同步效果差,接近不可用</li><li>若同文件冲突,会自动创建多个</li></ul><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul><li>好用,推荐</li></ul><h1 id="服务器服务"><a href="#服务器服务" class="headerlink" title="服务器服务"></a>服务器服务</h1><ol><li>monio</li><li>gitea</li><li>syncthing （文件同步，相当于本地云盘）</li><li>nodebb   （论坛）</li></ol><p>以上服务均已安装，并试用，效果满意</p><p>服务管理</p><ol><li>nssm （服务管理，启动运行，死机自动重启）</li><li>ngix （域名解析，网址索引）</li></ol>]]></content>
      
      
      <categories>
          
          <category> 综合 </category>
          
          <category> 办公 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows </tag>
            
            <tag> 环境搭建 </tag>
            
            <tag> 局域网 </tag>
            
            <tag> 共享 </tag>
            
            <tag> 永久激活 </tag>
            
            <tag> potplayer </tag>
            
            <tag> 同步盘 </tag>
            
            <tag> ResilioSync </tag>
            
            <tag> 服务器部署 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Altium</title>
      <link href="/2023/11/17/%E5%B5%8C%E5%85%A5%E5%BC%8F/Altium/"/>
      <url>/2023/11/17/%E5%B5%8C%E5%85%A5%E5%BC%8F/Altium/</url>
      
        <content type="html"><![CDATA[<h1 id="Altium"><a href="#Altium" class="headerlink" title="Altium"></a>Altium</h1><h2 id="安装Altium"><a href="#安装Altium" class="headerlink" title="安装Altium"></a>安装Altium</h2><h2 id="集成库"><a href="#集成库" class="headerlink" title="集成库"></a>集成库</h2><h3 id="新建集成库"><a href="#新建集成库" class="headerlink" title="新建集成库"></a>新建集成库</h3><h3 id="绘制原理图库"><a href="#绘制原理图库" class="headerlink" title="绘制原理图库"></a>绘制原理图库</h3><h3 id="绘制PCB元件库"><a href="#绘制PCB元件库" class="headerlink" title="绘制PCB元件库"></a>绘制PCB元件库</h3><h3 id="PCB封装添加3D元件"><a href="#PCB封装添加3D元件" class="headerlink" title="PCB封装添加3D元件"></a>PCB封装添加3D元件</h3><h2 id="原理图"><a href="#原理图" class="headerlink" title="原理图"></a>原理图</h2><h3 id="新建工程"><a href="#新建工程" class="headerlink" title="新建工程"></a>新建工程</h3><h3 id="新建原理图"><a href="#新建原理图" class="headerlink" title="新建原理图"></a>新建原理图</h3><h3 id="调用集成库"><a href="#调用集成库" class="headerlink" title="调用集成库"></a>调用集成库</h3><h3 id="绘制原理图"><a href="#绘制原理图" class="headerlink" title="绘制原理图"></a>绘制原理图</h3><h3 id="图块复用"><a href="#图块复用" class="headerlink" title="图块复用"></a>图块复用</h3><h3 id="网络标签"><a href="#网络标签" class="headerlink" title="网络标签"></a>网络标签</h3><h3 id="通用NO-ERC符号"><a href="#通用NO-ERC符号" class="headerlink" title="通用NO ERC符号"></a>通用NO ERC符号</h3><h3 id="模块电路绘制线条框"><a href="#模块电路绘制线条框" class="headerlink" title="模块电路绘制线条框"></a>模块电路绘制线条框</h3><h3 id="标注标号"><a href="#标注标号" class="headerlink" title="标注标号"></a>标注标号</h3><h3 id="从原理图中更新封装库元件"><a href="#从原理图中更新封装库元件" class="headerlink" title="从原理图中更新封装库元件"></a>从原理图中更新封装库元件</h3><h3 id="修改原理图"><a href="#修改原理图" class="headerlink" title="修改原理图"></a>修改原理图</h3><h3 id="从PCB中选中跳转到原理图"><a href="#从PCB中选中跳转到原理图" class="headerlink" title="从PCB中选中跳转到原理图"></a>从PCB中选中跳转到原理图</h3><h2 id="PCB"><a href="#PCB" class="headerlink" title="PCB"></a>PCB</h2><h3 id="新建pcb"><a href="#新建pcb" class="headerlink" title="新建pcb"></a>新建pcb</h3><h3 id="滴泪"><a href="#滴泪" class="headerlink" title="滴泪"></a>滴泪</h3><h3 id="隐藏-显示网络"><a href="#隐藏-显示网络" class="headerlink" title="隐藏&#x2F;显示网络"></a>隐藏&#x2F;显示网络</h3><h3 id="从原理图中选中跳转到PCB中"><a href="#从原理图中选中跳转到PCB中" class="headerlink" title="从原理图中选中跳转到PCB中"></a>从原理图中选中跳转到PCB中</h3><h3 id="移动-跳转-对齐"><a href="#移动-跳转-对齐" class="headerlink" title="移动,跳转,对齐"></a>移动,跳转,对齐</h3><h3 id="切换单位"><a href="#切换单位" class="headerlink" title="切换单位"></a>切换单位</h3><h3 id="绘制板框"><a href="#绘制板框" class="headerlink" title="绘制板框"></a>绘制板框</h3><h4 id="板框绘制圆角"><a href="#板框绘制圆角" class="headerlink" title="板框绘制圆角"></a>板框绘制圆角</h4><h4 id="切割圆孔"><a href="#切割圆孔" class="headerlink" title="切割圆孔"></a>切割圆孔</h4><h3 id="规则设置"><a href="#规则设置" class="headerlink" title="规则设置"></a>规则设置</h3><h3 id="网络表"><a href="#网络表" class="headerlink" title="网络表"></a>网络表</h3><h3 id="运行DRC检查"><a href="#运行DRC检查" class="headerlink" title="运行DRC检查"></a>运行DRC检查</h3><h3 id="从板框创建铺铜"><a href="#从板框创建铺铜" class="headerlink" title="从板框创建铺铜"></a>从板框创建铺铜</h3><h3 id="创建-打散元件组合"><a href="#创建-打散元件组合" class="headerlink" title="创建&#x2F;打散元件组合"></a>创建&#x2F;打散元件组合</h3><h3 id="创建多层板"><a href="#创建多层板" class="headerlink" title="创建多层板"></a>创建多层板</h3><h3 id="布局-元件旋转"><a href="#布局-元件旋转" class="headerlink" title="布局-元件旋转"></a>布局-元件旋转</h3><h3 id="布局-标注"><a href="#布局-标注" class="headerlink" title="布局-标注"></a>布局-标注</h3><h3 id="根据数据手册绘制封装"><a href="#根据数据手册绘制封装" class="headerlink" title="根据数据手册绘制封装"></a>根据数据手册绘制封装</h3><h3 id="从封装库中更新原理图元件"><a href="#从封装库中更新原理图元件" class="headerlink" title="从封装库中更新原理图元件"></a>从封装库中更新原理图元件</h3><h2 id="导出文件"><a href="#导出文件" class="headerlink" title="导出文件"></a>导出文件</h2><h3 id="生成BOM表"><a href="#生成BOM表" class="headerlink" title="生成BOM表"></a>生成BOM表</h3><h3 id="输出Gerber文件"><a href="#输出Gerber文件" class="headerlink" title="输出Gerber文件"></a>输出Gerber文件</h3><h3 id="导出机械尺寸图"><a href="#导出机械尺寸图" class="headerlink" title="导出机械尺寸图"></a>导出机械尺寸图</h3><h3 id="导出元件位置标号图"><a href="#导出元件位置标号图" class="headerlink" title="导出元件位置标号图"></a>导出元件位置标号图</h3><h2 id="解决异常"><a href="#解决异常" class="headerlink" title="解决异常"></a>解决异常</h2><h3 id="原理图更新PCB失败的处理方法"><a href="#原理图更新PCB失败的处理方法" class="headerlink" title="原理图更新PCB失败的处理方法"></a>原理图更新PCB失败的处理方法</h3><h2 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h2><p>点开菜单,按住Ctrl键单击要设置快捷键的功能,即可设置快捷键</p><p><img src="/../../images/Altium/1678849398876.png" alt="1678849398876"></p><p>凡亿推荐快捷键设置</p><p><img src="/../../images/Altium/1678849334283.png" alt="1678849334283"></p><h3 id="选中整条线"><a href="#选中整条线" class="headerlink" title="选中整条线"></a>选中整条线</h3><h2 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h2><h3 id="从零散电路原理图-PCB中获取元件原理图以及封装"><a href="#从零散电路原理图-PCB中获取元件原理图以及封装" class="headerlink" title="从零散电路原理图&#x2F;PCB中获取元件原理图以及封装"></a>从零散电路原理图&#x2F;PCB中获取元件原理图以及封装</h3><h3 id="走线宽度计算"><a href="#走线宽度计算" class="headerlink" title="走线宽度计算"></a>走线宽度计算</h3><h3 id="焊盘过孔大小计算"><a href="#焊盘过孔大小计算" class="headerlink" title="焊盘过孔大小计算"></a>焊盘过孔大小计算</h3><h3 id="第三方获取封装"><a href="#第三方获取封装" class="headerlink" title="第三方获取封装"></a>第三方获取封装</h3><h3 id="复位DRC错误标志"><a href="#复位DRC错误标志" class="headerlink" title="复位DRC错误标志"></a>复位DRC错误标志</h3><p>描述:执行DRC后,有一些白色的线,线中间有双斜杠,移动元件,线条不动.误以为是飞线,隐藏网络也不管用.<br>解决办法:工具-&gt;复位错误标志</p>]]></content>
      
      
      <categories>
          
          <category> 嵌入式 </category>
          
          <category> Altium </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Altium </tag>
            
            <tag> PCB </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>InnoSetup</title>
      <link href="/2023/11/17/%E8%BD%AF%E4%BB%B6%E7%BC%96%E7%A8%8B/InnoSetup/"/>
      <url>/2023/11/17/%E8%BD%AF%E4%BB%B6%E7%BC%96%E7%A8%8B/InnoSetup/</url>
      
        <content type="html"><![CDATA[<h1 id="Inno-Setup"><a href="#Inno-Setup" class="headerlink" title="Inno Setup"></a>Inno Setup</h1><h2 id="向导创建"><a href="#向导创建" class="headerlink" title="向导创建"></a>向导创建</h2><h3 id="制作安装包"><a href="#制作安装包" class="headerlink" title="制作安装包"></a>制作安装包</h3><p>简述:Inno Setup有两种方式可以制作安装包</p><p>图片</p><p>使用向导方式制作,优点:简单快捷.缺点:仅基础安装,很多功能向导不提供</p><p>编写脚本,优点:可定制化程度高.缺点:需要一定的学习成本</p><p>制作过程如下:</p><p>一. 向导制作安装包</p><p> 点击新建,创建一个带向导的文件,点击OK</p><p><img src="/../../images/InnoSetup/1711534316925.png" alt="1711534316925"></p><p>点击下一步</p><p><img src="/../../images/InnoSetup/1711534324969.png" alt="1711534324969"></p><p>输入软件名称,软件版本(也可使用默认不填),应用网址</p><p><img src="/../../images/InnoSetup/1711534334328.png" alt="1711534334328"></p><p>下一步,选择自定义默认输出路径</p><p><img src="/../../images/InnoSetup/1711534342781.png" alt="1711534342781"></p><p>下一步,选择要封装的软件的路径,other application files:选择要封装的依赖文件</p><p><img src="/../../images/InnoSetup/1711534351173.png" alt="1711534351173"></p><p>下一步</p><p><img src="/../../images/InnoSetup/1711534359466.png" alt="1711534359466"></p><p>默认勾选创建菜单快捷方式以及桌面快捷方式,下一步</p><p><img src="/../../images/InnoSetup/1711534367913.png" alt="1711534367913"></p><p>根据需要是否加入安装前显示文本文件或安装后显示文本文件,下一步</p><p><img src="/../../images/InnoSetup/1711534376607.png" alt="1711534376607"></p><p>默认管理安装,下一步</p><p><img src="/../../images/InnoSetup/1711534384920.png" alt="1711534384920"></p><p>安装语言文件选择,中文,下一步</p><p><img src="/../../images/InnoSetup/1711534392677.png" alt="1711534392677"></p><p>图标文件和密码可以不填</p><p><img src="/../../images/InnoSetup/1711534401263.png" alt="1711534401263"></p><p>下一步</p><p><img src="/../../images/InnoSetup/1711534409426.png" alt="1711534409426"></p><p>完成</p><p><img src="/../../images/InnoSetup/1711534437191.png" alt="1711534437191"></p><p>立即编译脚本</p><p><img src="/../../images/InnoSetup/1711534492010.png" alt="1711534492010"></p><p>保存脚本文件,选择是</p><p><img src="/../../images/InnoSetup/1711534425859.png" alt="1711534425859"></p><p>保存文件</p><p><img src="/../../images/InnoSetup/1711534500456.png" alt="1711534500456"></p><p>编译完成</p><p><img src="/../../images/InnoSetup/1711534509173.png" alt="1711534509173"></p><p>输出路径找到生成的安装包</p><p><img src="/../../images/InnoSetup/1711534518361.png" alt="1711534518361"></p><p>评价:</p><p>用向导制作可以快速完成一个软件安装包的制作,但若想要添加环境变量,根据选择安装语言实现软件语言包的相应安装,美化界面等定制化功能,则需要使用inno setup的脚本语言(下篇记录脚本语言).</p><h2 id="脚本定制"><a href="#脚本定制" class="headerlink" title="脚本定制"></a>脚本定制</h2><h3 id="添加和卸载环境变量"><a href="#添加和卸载环境变量" class="headerlink" title="添加和卸载环境变量"></a>添加和卸载环境变量</h3><figure class="highlight pascal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[Code]</span><br><span class="line"><span class="comment">// 设置环境变量函数</span></span><br><span class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">SetEnv</span><span class="params">(aEnvName, aEnvValue: <span class="keyword">string</span>; aIsInstall, aIsInsForAllUser: Boolean)</span>;</span></span><br><span class="line"><span class="keyword">var</span></span><br><span class="line">sOrgValue: <span class="keyword">string</span>;</span><br><span class="line">sFileName: <span class="keyword">string</span>;</span><br><span class="line">S1: AnsiString;                                                  <span class="comment">//注意类型是AnsiString,不是string</span></span><br><span class="line">bRetValue, bInsForAllUser: Boolean;</span><br><span class="line">SL: TStringList;</span><br><span class="line">x: integer;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">bInsForAllUser := aIsInsForAllUser;</span><br><span class="line"><span class="keyword">if</span> UsingWinNT <span class="keyword">then</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">if</span> bInsForAllUser <span class="keyword">then</span></span><br><span class="line">      bRetValue := RegQueryStringValue(HKEY_LOCAL_MACHINE, <span class="string">&#x27;SYSTEM\CurrentControlSet\Control\Session Manager\Environment&#x27;</span>, aEnvName, sOrgValue)</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      bRetValue := RegQueryStringValue(HKEY_CURRENT_USER, <span class="string">&#x27;Environment&#x27;</span>, aEnvName, sOrgValue);</span><br><span class="line">    sOrgValue := Trim(sOrgValue);</span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">      S1 := aEnvValue;</span><br><span class="line">      <span class="keyword">if</span> pos(Uppercase(s1), Uppercase(sOrgValue)) = <span class="number">0</span> <span class="keyword">then</span> <span class="comment">//还没有加入</span></span><br><span class="line">      <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span> aIsInstall <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">begin</span></span><br><span class="line">          x := Length(sOrgValue);</span><br><span class="line">          <span class="keyword">if</span> (x &gt; <span class="number">0</span>) <span class="keyword">and</span> (StringOfChar(sOrgValue[x], <span class="number">1</span>) &lt;&gt; <span class="string">&#x27;;&#x27;</span>) <span class="keyword">then</span></span><br><span class="line">            sOrgValue := sOrgValue + <span class="string">&#x27;;&#x27;</span>;</span><br><span class="line">          sOrgValue := sOrgValue + S1;</span><br><span class="line">        <span class="keyword">end</span>;</span><br><span class="line">      <span class="keyword">end</span> <span class="keyword">else</span></span><br><span class="line">      <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> aIsInstall <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">begin</span></span><br><span class="line">          StringChangeEx(sOrgValue, S1 + <span class="string">&#x27;;&#x27;</span>, <span class="string">&#x27;&#x27;</span>, True);</span><br><span class="line">          StringChangeEx(sOrgValue, S1, <span class="string">&#x27;&#x27;</span>, True);</span><br><span class="line">        <span class="keyword">end</span>;</span><br><span class="line">      <span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> bInsForAllUser <span class="keyword">then</span></span><br><span class="line">        RegWriteStringValue(HKEY_LOCAL_MACHINE, <span class="string">&#x27;SYSTEM\CurrentControlSet\Control\Session Manager\Environment&#x27;</span>, aEnvName, sOrgValue)</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">      <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">not</span> aIsInstall) <span class="keyword">and</span> (Trim(sOrgValue) = <span class="string">&#x27;&#x27;</span>) <span class="keyword">then</span></span><br><span class="line">          RegDeleteValue(HKEY_CURRENT_USER, <span class="string">&#x27;Environment&#x27;</span>, aEnvName)</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">          RegWriteStringValue(HKEY_CURRENT_USER, <span class="string">&#x27;Environment&#x27;</span>, aEnvName, sOrgValue);</span><br><span class="line">      <span class="keyword">end</span>;</span><br><span class="line">    <span class="keyword">end</span>;</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">else</span> <span class="comment">//非NT 系统,如Win98</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    SL := TStringList.Create;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">      sFileName := ExpandConstant(<span class="string">&#x27;&#123;sd&#125;\autoexec.bat&#x27;</span>);</span><br><span class="line">      LoadStringFromFile(sFileName, S1);</span><br><span class="line">      SL.Text := s1;</span><br><span class="line">      s1 :=   <span class="string">&#x27;&quot;&#x27;</span> + aEnvValue + <span class="string">&#x27;&quot;&#x27;</span>;</span><br><span class="line">      s1 := <span class="string">&#x27;set &#x27;</span>+aEnvName +<span class="string">&#x27;=%path%;&#x27;</span> + s1 ;</span><br><span class="line"></span><br><span class="line">      bRetValue := False;</span><br><span class="line">      x := SL.IndexOf(s1);</span><br><span class="line">      <span class="keyword">if</span> x = -<span class="number">1</span> <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span> aIsInstall <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">begin</span></span><br><span class="line">          SL.Add(s1);</span><br><span class="line">          bRetValue := True;</span><br><span class="line">        <span class="keyword">end</span>;</span><br><span class="line">      <span class="keyword">end</span> <span class="keyword">else</span> <span class="comment">//还没添加</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> aIsInstall <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">begin</span></span><br><span class="line">          SL.Delete(x);</span><br><span class="line">          bRetValue := True;</span><br><span class="line">        <span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> bRetValue <span class="keyword">then</span></span><br><span class="line">        SL.SaveToFile(sFileName);</span><br><span class="line">    <span class="keyword">finally</span></span><br><span class="line">      SL.free;</span><br><span class="line">    <span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 安装前添加环境变量</span></span><br><span class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">CurStepChanged</span><span class="params">(CurStep: TSetupStep)</span>;</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">if</span> CurStep = ssInstall <span class="keyword">then</span>                        <span class="comment">//对于(ssInstall)这个变量可依据自身需要进行更改，帮助文档中有说明(也可是安装完成之后进行写入对应变量为ssDone)</span></span><br><span class="line">  <span class="keyword">begin</span></span><br><span class="line">  <span class="comment">// 将&#123;app&#125;路径添加到path环境变量中</span></span><br><span class="line">     <span class="comment">//SetEnv(&#x27;path&#x27;,ExpandConstant(&#x27;&#123;app&#125;;&#x27;),true,true); //对于添加多个环境变量需要注意要添加分割符号&quot;;&quot;,否则系统会认为是一个</span></span><br><span class="line">     SetEnv(<span class="string">&#x27;path&#x27;</span>,ExpandConstant(<span class="string">&#x27;&#123;app&#125;\bin\pylon&#x27;</span>),true,true); <span class="comment">//在这儿调用,一定在这儿调用,安装完无须重启,立即生效</span></span><br><span class="line">     SetEnv(<span class="string">&#x27;path&#x27;</span>,ExpandConstant(<span class="string">&#x27;&#123;app&#125;\bin\opencv&#x27;</span>),true,true); <span class="comment">//在这儿调用,一定在这儿调用,安装完无须重启,立即生效</span></span><br><span class="line">     <span class="comment">//SetEnv(&#x27;path&#x27;,ExpandConstant(&#x27;&#123;app&#125;\bin\x86&#x27;),true,true); //在这儿调用,一定在这儿调用,安装完无须重启,立即生效</span></span><br><span class="line">     SetEnv(<span class="string">&#x27;path&#x27;</span>,ExpandConstant(<span class="string">&#x27;&#123;app&#125;\bin\x64&#x27;</span>),true,true); <span class="comment">//在这儿调用,一定在这儿调用,安装完无须重启,立即生效</span></span><br><span class="line">  <span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//if CurStep = ssDone then                        //对于(ssInstall)这个变量可依据自身需要进行更改，帮助文档中有说明(也可是安装完成之后进行写入对应变量为ssDone)</span></span><br><span class="line">  <span class="comment">//begin</span></span><br><span class="line">  <span class="comment">// 将&#123;app&#125;路径添加到path环境变量中</span></span><br><span class="line">     <span class="comment">//SetEnv(&#x27;path&#x27;,ExpandConstant(&#x27;&#123;app&#125;;&#x27;),true,true); //对于添加多个环境变量需要注意要添加分割符号&quot;;&quot;,否则系统会认为是一个</span></span><br><span class="line">     <span class="comment">//SetEnv(&#x27;path&#x27;,ExpandConstant(&#x27;&#123;app&#125;\bin\pylon&#x27;),true,true); //在这儿调用,一定在这儿调用,安装完无须重启,立即生效</span></span><br><span class="line">     <span class="comment">//SetEnv(&#x27;path&#x27;,ExpandConstant(&#x27;&#123;app&#125;\bin\opencv&#x27;),true,true); //在这儿调用,一定在这儿调用,安装完无须重启,立即生效</span></span><br><span class="line">    <span class="comment">// SetEnv(&#x27;path&#x27;,ExpandConstant(&#x27;&#123;app&#125;\bin\x86&#x27;),true,true); //在这儿调用,一定在这儿调用,安装完无须重启,立即生效</span></span><br><span class="line">     <span class="comment">//SetEnv(&#x27;path&#x27;,ExpandConstant(&#x27;&#123;app&#125;\bin\x64&#x27;),true,true); //在这儿调用,一定在这儿调用,安装完无须重启,立即生效</span></span><br><span class="line">  <span class="comment">//end;</span></span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 卸载前删除环境变量</span></span><br><span class="line"><span class="function"><span class="keyword">procedure</span> <span class="title">CurUninstallStepChanged</span><span class="params">(CurUninstallStep: TUninstallStep)</span>;</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="comment">// 将&#123;app&#125;路径从path环境变量中删除</span></span><br><span class="line">  <span class="comment">//SetEnv(&#x27;path&#x27;,ExpandConstant(&#x27;&#123;app&#125;;&#x27;),false,true);</span></span><br><span class="line">  SetEnv(<span class="string">&#x27;path&#x27;</span>,ExpandConstant(<span class="string">&#x27;&#123;app&#125;\bin\pylon&#x27;</span>),false,true); <span class="comment">//卸载时所需要删除的环境变量需要与所添加的变量一致，以免误删除</span></span><br><span class="line">  SetEnv(<span class="string">&#x27;path&#x27;</span>,ExpandConstant(<span class="string">&#x27;&#123;app&#125;\bin\opencv&#x27;</span>),false,true); <span class="comment">//卸载时所需要删除的环境变量需要与所添加的变量一致，以免误删除</span></span><br><span class="line">  <span class="comment">//SetEnv(&#x27;path&#x27;,ExpandConstant(&#x27;&#123;app&#125;\bin\x86&#x27;),false,true); //卸载时所需要删除的环境变量需要与所添加的变量一致，以免误删除</span></span><br><span class="line">  SetEnv(<span class="string">&#x27;path&#x27;</span>,ExpandConstant(<span class="string">&#x27;&#123;app&#125;\bin\x64&#x27;</span>),false,true); <span class="comment">//卸载时所需要删除的环境变量需要与所添加的变量一致，以免误删除</span></span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="完整项目示例"><a href="#完整项目示例" class="headerlink" title="完整项目示例"></a>完整项目示例</h3><figure class="highlight pascal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br></pre></td><td class="code"><pre><span class="line">; Script generated by the Inno Setup Script Wizard.</span><br><span class="line">; SEE THE DOCUMENTATION <span class="keyword">FOR</span> DETAILS <span class="keyword">ON</span> CREATING INNO SETUP SCRIPT FILES!</span><br><span class="line"></span><br><span class="line">#define MyAppName &quot;恒意得上位机_230809&quot;</span><br><span class="line">#define MyAppVersion &quot;<span class="number">9.22</span>.<span class="number">10.26</span>&quot;</span><br><span class="line">#define MyAppPublisher &quot;HID&quot;</span><br><span class="line">#define MyAppURL &quot;https:<span class="comment">//www.hengideal.com/&quot;</span></span><br><span class="line">#define MyAppExeName &quot;controller.exe&quot;</span><br><span class="line"></span><br><span class="line">;标准控制器</span><br><span class="line">#define btn_Controller_V9</span><br><span class="line">;检测停机V3                             </span><br><span class="line">;#define btn_RewindDetectionShutdown_V3              </span><br><span class="line">;信号转换器</span><br><span class="line">;#define btn_InputSignalConverter                    </span><br><span class="line">;一体机</span><br><span class="line">;#define btn_YiTiJi                                  </span><br><span class="line">;复卷系统</span><br><span class="line">;#define btn_Rewinding_System                        </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">;****************我是分割线****************</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">;是否集成X线组件</span><br><span class="line">;#define btn_XLine                                   </span><br><span class="line">;定位转IO</span><br><span class="line">;#define btn_PositioningTo                           </span><br><span class="line">;检测停机V2</span><br><span class="line">;#define btn_RewindDetectionShutdown_V2              </span><br><span class="line">;光源控制器</span><br><span class="line">;#define btn_Light_source_controller                 </span><br><span class="line">;崇阳折叠机<span class="number">2</span>通道<span class="number">4</span>相机</span><br><span class="line">;#define btn_Gauze_2ch_4cam                          </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[Types]</span><br><span class="line"><span class="keyword">Name</span>: Compact ;Description:&quot;简洁安装&quot;;        </span><br><span class="line"><span class="keyword">Name</span>: Full ;Description:&quot;完全安装&quot;;    </span><br><span class="line"><span class="keyword">Name</span>: Custom; Description:&quot;自定义安装&quot;;       Flags: iscustom</span><br><span class="line">;上述代码会根据写代码顺序排列选择顺序,,,Flags:iscustom,为标记该类型为自定义安装.配合下述Components代码实现选择安装</span><br><span class="line"></span><br><span class="line">#ifdef  btn_Controller_V9</span><br><span class="line">[Components]</span><br><span class="line"><span class="keyword">Name</span>:control_v9;Description:&quot;标准控制器&quot;;Types:Full Compact Custom;</span><br><span class="line">[Files]</span><br><span class="line">Source: &quot;C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\Docs\标准控制器\*&quot;; DestDir: &quot;<span class="comment">&#123;app&#125;</span>\Docs\标准控制器&quot;; Flags: ignoreversion   ;Components: control_v9</span><br><span class="line">Source: &quot;C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\<span class="comment">&#123;#MyAppExeName&#125;</span>&quot;; DestDir: &quot;<span class="comment">&#123;app&#125;</span>&quot;; Flags: ignoreversion ; Components: control_v9</span><br><span class="line">;语句后增加 Flags:fixed 字段 可强制安装</span><br><span class="line">[Icons]</span><br><span class="line">;桌面快捷方式  </span><br><span class="line">;<span class="keyword">Name</span>: &quot;<span class="comment">&#123;autoprograms&#125;</span>\<span class="comment">&#123;#X_LineName&#125;</span>&quot;; Filename: &quot;<span class="comment">&#123;app&#125;</span>\<span class="comment">&#123;#X_LineExeName&#125;</span>&quot;      ;Components:X_Line</span><br><span class="line"><span class="keyword">Name</span>: &quot;<span class="comment">&#123;autodesktop&#125;</span>\<span class="comment">&#123;#MyAppName&#125;</span>&quot;; Filename: &quot;<span class="comment">&#123;app&#125;</span>\<span class="comment">&#123;#MyAppExeName&#125;</span>&quot;; Tasks: desktopicon      ;Components:control_v9</span><br><span class="line">[Run]</span><br><span class="line">Filename: &quot;<span class="comment">&#123;app&#125;</span>\<span class="comment">&#123;#MyAppExeName&#125;</span>&quot;; Description: &quot;<span class="comment">&#123;cm:LaunchProgram,&#123;#StringChange(MyAppName, &#x27;&amp;&#x27;, &#x27;&amp;&amp;&#x27;)&#125;</span>&#125;&quot;; Flags: nowait postinstall skipifsilent    ;Components:control_v9</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">;X线定义</span><br><span class="line">#ifdef btn_XLine</span><br><span class="line">#define X_LineName &quot;X线控制器&quot;</span><br><span class="line">#define X_LineExeName &quot;X_line.exe&quot;</span><br><span class="line">#define Xline_HMIName &quot;X线PLC设置&quot;</span><br><span class="line">#define Xline_HMIExeName &quot;Xline_HMI.exe&quot;</span><br><span class="line">[Components]</span><br><span class="line"><span class="keyword">Name</span>:X_Line;Description:<span class="comment">&#123;#X_LineName&#125;</span>;Types:Full;</span><br><span class="line">[Files]</span><br><span class="line">Source: &quot;C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\Docs\折叠机_X线\*&quot;; DestDir: &quot;<span class="comment">&#123;app&#125;</span>\Docs\折叠机_X线&quot;; Flags: ignoreversion   ;Components: X_Line</span><br><span class="line">Source: &quot;C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\<span class="comment">&#123;#X_LineExeName&#125;</span>&quot;; DestDir: &quot;<span class="comment">&#123;app&#125;</span>&quot;; Flags: ignoreversion; Components: X_Line</span><br><span class="line">Source: &quot;C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\<span class="comment">&#123;#Xline_HMIExeName&#125;</span>&quot;; DestDir: &quot;<span class="comment">&#123;app&#125;</span>&quot;; Flags: ignoreversion; Components: X_Line</span><br><span class="line">[Icons]</span><br><span class="line">;桌面快捷方式  </span><br><span class="line">;<span class="keyword">Name</span>: &quot;<span class="comment">&#123;autoprograms&#125;</span>\<span class="comment">&#123;#X_LineName&#125;</span>&quot;; Filename: &quot;<span class="comment">&#123;app&#125;</span>\<span class="comment">&#123;#X_LineExeName&#125;</span>&quot;      ;Components:X_Line</span><br><span class="line"><span class="keyword">Name</span>: &quot;<span class="comment">&#123;autodesktop&#125;</span>\<span class="comment">&#123;#X_LineName&#125;</span>&quot;; Filename: &quot;<span class="comment">&#123;app&#125;</span>\<span class="comment">&#123;#X_LineExeName&#125;</span>&quot;; Tasks: desktopicon      ;Components:X_Line</span><br><span class="line"><span class="keyword">Name</span>: &quot;<span class="comment">&#123;autodesktop&#125;</span>\<span class="comment">&#123;#Xline_HMIName&#125;</span>&quot;; Filename: &quot;<span class="comment">&#123;app&#125;</span>\<span class="comment">&#123;#Xline_HMIExeName&#125;</span>&quot;; Tasks: desktopicon      ;Components:X_Line</span><br><span class="line">[Run]</span><br><span class="line">Filename: &quot;<span class="comment">&#123;app&#125;</span>\<span class="comment">&#123;#X_LineExeName&#125;</span>&quot;; Description: &quot;<span class="comment">&#123;cm:LaunchProgram,&#123;#StringChange(X_LineName, &#x27;&amp;&#x27;, &#x27;&amp;&amp;&#x27;)&#125;</span>&#125;&quot;; Flags: nowait postinstall skipifsilent   ;Components:X_Line</span><br><span class="line">Filename: &quot;<span class="comment">&#123;app&#125;</span>\<span class="comment">&#123;#Xline_HMIExeName&#125;</span>&quot;; Description: &quot;<span class="comment">&#123;cm:LaunchProgram,&#123;#StringChange(Xline_HMIName, &#x27;&amp;&#x27;, &#x27;&amp;&amp;&#x27;)&#125;</span>&#125;&quot;; Flags: nowait postinstall skipifsilent     ;Components:X_Line</span><br><span class="line">;上述代码将在安装完成界面添加check选项框,是否运行,或者可以添加打开更新日志之类的功能</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">;一体机定义</span><br><span class="line">#ifdef btn_YiTiJi</span><br><span class="line">#define YiTiJiName &quot;一体机&quot;</span><br><span class="line">#define YiTiJiExeName &quot;YiTiJi.exe&quot;</span><br><span class="line">[Components]</span><br><span class="line"><span class="keyword">Name</span>:YiTiJi;Description:<span class="comment">&#123;#YiTiJiName&#125;</span>;Types:Full;</span><br><span class="line">[Files]</span><br><span class="line">Source: &quot;C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\Docs\包装检测一体机\*&quot;; DestDir: &quot;<span class="comment">&#123;app&#125;</span>\Docs\包装检测一体机&quot;; Flags: ignoreversion   ;Components: YiTiJi</span><br><span class="line">Source: &quot;C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\<span class="comment">&#123;#YiTiJiExeName&#125;</span>&quot;; DestDir: &quot;<span class="comment">&#123;app&#125;</span>&quot;; Flags: ignoreversion; Components: YiTiJi</span><br><span class="line">[Icons]</span><br><span class="line">;桌面快捷方式  </span><br><span class="line">;<span class="keyword">Name</span>: &quot;<span class="comment">&#123;autoprograms&#125;</span>\<span class="comment">&#123;#X_LineName&#125;</span>&quot;; Filename: &quot;<span class="comment">&#123;app&#125;</span>\<span class="comment">&#123;#X_LineExeName&#125;</span>&quot;      ;Components:X_Line</span><br><span class="line"><span class="keyword">Name</span>: &quot;<span class="comment">&#123;autodesktop&#125;</span>\<span class="comment">&#123;#YiTiJiName&#125;</span>&quot;; Filename: &quot;<span class="comment">&#123;app&#125;</span>\<span class="comment">&#123;#YiTiJiExeName&#125;</span>&quot;; Tasks: desktopicon      ;Components:YiTiJi</span><br><span class="line">[Run]</span><br><span class="line">Filename: &quot;<span class="comment">&#123;app&#125;</span>\<span class="comment">&#123;#YiTiJiExeName&#125;</span>&quot;; Description: &quot;<span class="comment">&#123;cm:LaunchProgram,&#123;#StringChange(YiTiJiName, &#x27;&amp;&#x27;, &#x27;&amp;&amp;&#x27;)&#125;</span>&#125;&quot;; Flags: nowait postinstall skipifsilent   ;Components:YiTiJi</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">;复卷系统定义</span><br><span class="line">#ifdef btn_Rewinding_System </span><br><span class="line">#define  Rewinding_SystemName &quot;复卷数据系统&quot;</span><br><span class="line">#define  Rewinding_SystemExeName &quot;复卷系统/复卷系统.exe&quot;</span><br><span class="line">[Components]</span><br><span class="line"><span class="keyword">Name</span>:Rewinding_System;Description:&quot;复卷系统&quot;;Types:Full;</span><br><span class="line">[Files]</span><br><span class="line">Source: &quot;C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\复卷系统\*&quot;; DestDir: &quot;<span class="comment">&#123;app&#125;</span>\复卷系统&quot;; Flags: ignoreversion   ;Components: Rewinding_System</span><br><span class="line">Source: &quot;C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\<span class="comment">&#123;#Rewinding_SystemExeName&#125;</span>&quot;; DestDir: &quot;<span class="comment">&#123;app&#125;</span>\复卷系统&quot;; Flags: ignoreversion; Components: Rewinding_System</span><br><span class="line">[Icons]</span><br><span class="line">;桌面快捷方式  </span><br><span class="line">;<span class="keyword">Name</span>: &quot;<span class="comment">&#123;autoprograms&#125;</span>\<span class="comment">&#123;#X_LineName&#125;</span>&quot;; Filename: &quot;<span class="comment">&#123;app&#125;</span>\<span class="comment">&#123;#X_LineExeName&#125;</span>&quot;      ;Components:X_Line</span><br><span class="line"><span class="keyword">Name</span>: &quot;<span class="comment">&#123;autodesktop&#125;</span>\<span class="comment">&#123;#Rewinding_SystemName&#125;</span>&quot;; Filename: &quot;<span class="comment">&#123;app&#125;</span>\<span class="comment">&#123;#Rewinding_SystemExeName&#125;</span>&quot;; Tasks: desktopicon      ;Components:Rewinding_System</span><br><span class="line">[Run]</span><br><span class="line">Filename: &quot;<span class="comment">&#123;app&#125;</span>\<span class="comment">&#123;#Rewinding_SystemExeName&#125;</span>&quot;; Description: &quot;<span class="comment">&#123;cm:LaunchProgram,&#123;#StringChange(Rewinding_SystemName, &#x27;&amp;&#x27;, &#x27;&amp;&amp;&#x27;)&#125;</span>&#125;&quot;; Flags: nowait postinstall skipifsilent    ;Components:Rewinding_System</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">;定位测量转IO定义</span><br><span class="line">#ifdef btn_PositioningTo </span><br><span class="line">#define  PositioningToIOName &quot;定位测量转IO&quot;</span><br><span class="line">#define  PositioningToIOExeName &quot;LocationToIO.exe&quot;</span><br><span class="line">[Components]</span><br><span class="line"><span class="keyword">Name</span>:PositioningToIO;Description:&quot;定位测量转IO&quot;;Types:Full;</span><br><span class="line">[Files]</span><br><span class="line">Source: &quot;C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\Docs\定位测量转IO\*&quot;; DestDir: &quot;<span class="comment">&#123;app&#125;</span>\Docs\定位测量转IO&quot;; Flags: ignoreversion   ;Components: PositioningToIO</span><br><span class="line">Source: &quot;C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\<span class="comment">&#123;#PositioningToIOExeName&#125;</span>&quot;; DestDir: &quot;<span class="comment">&#123;app&#125;</span>&quot;; Flags: ignoreversion; Components: PositioningToIO</span><br><span class="line">[Icons]</span><br><span class="line">;桌面快捷方式  </span><br><span class="line">;<span class="keyword">Name</span>: &quot;<span class="comment">&#123;autoprograms&#125;</span>\<span class="comment">&#123;#X_LineName&#125;</span>&quot;; Filename: &quot;<span class="comment">&#123;app&#125;</span>\<span class="comment">&#123;#X_LineExeName&#125;</span>&quot;      ;Components:X_Line</span><br><span class="line"><span class="keyword">Name</span>: &quot;<span class="comment">&#123;autodesktop&#125;</span>\<span class="comment">&#123;#PositioningToIOName&#125;</span>&quot;; Filename: &quot;<span class="comment">&#123;app&#125;</span>\<span class="comment">&#123;#PositioningToIOExeName&#125;</span>&quot;; Tasks: desktopicon      ;Components:PositioningToIO</span><br><span class="line">[Run]</span><br><span class="line">Filename: &quot;<span class="comment">&#123;app&#125;</span>\<span class="comment">&#123;#PositioningToIOExeName&#125;</span>&quot;; Description: &quot;<span class="comment">&#123;cm:LaunchProgram,&#123;#StringChange(PositioningToIOName, &#x27;&amp;&#x27;, &#x27;&amp;&amp;&#x27;)&#125;</span>&#125;&quot;; Flags: nowait postinstall skipifsilent     ;Components:PositioningToIO</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">;复卷检测停机V2定义</span><br><span class="line">#ifdef btn_RewindDetectionShutdown_V2</span><br><span class="line">#define  RewindDetectionShutdownNameV2 &quot;复卷检测停机V2&quot;</span><br><span class="line">#define  RewindDetectionShutdownExeNameV2 &quot;RewindingV2.exe&quot;</span><br><span class="line">[Components]</span><br><span class="line"><span class="keyword">Name</span>:RewindDetectionShutdownV2;Description:&quot;复卷检测停机V2&quot;;Types:Full;</span><br><span class="line">[Files]</span><br><span class="line">Source: &quot;C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\Docs\复卷检测停机\*&quot;; DestDir: &quot;<span class="comment">&#123;app&#125;</span>\Docs\复卷检测停机&quot;; Flags: ignoreversion recursesubdirs createallsubdirs  ;Components: RewindDetectionShutdownV2</span><br><span class="line">Source: &quot;C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\<span class="comment">&#123;#RewindDetectionShutdownExeNameV2&#125;</span>&quot;; DestDir: &quot;<span class="comment">&#123;app&#125;</span>&quot;; Flags: ignoreversion; Components: RewindDetectionShutdownV2</span><br><span class="line">[Icons]</span><br><span class="line">;桌面快捷方式  </span><br><span class="line">;<span class="keyword">Name</span>: &quot;<span class="comment">&#123;autoprograms&#125;</span>\<span class="comment">&#123;#X_LineName&#125;</span>&quot;; Filename: &quot;<span class="comment">&#123;app&#125;</span>\<span class="comment">&#123;#X_LineExeName&#125;</span>&quot;      ;Components:X_Line</span><br><span class="line"><span class="keyword">Name</span>: &quot;<span class="comment">&#123;autodesktop&#125;</span>\<span class="comment">&#123;#RewindDetectionShutdownNameV2&#125;</span>&quot;; Filename: &quot;<span class="comment">&#123;app&#125;</span>\<span class="comment">&#123;#RewindDetectionShutdownExeNameV2&#125;</span>&quot;; Tasks: desktopicon      ;Components:RewindDetectionShutdownV2</span><br><span class="line">[Run]</span><br><span class="line">Filename: &quot;<span class="comment">&#123;app&#125;</span>\<span class="comment">&#123;#RewindDetectionShutdownExeNameV2&#125;</span>&quot;; Description: &quot;<span class="comment">&#123;cm:LaunchProgram,&#123;#StringChange(RewindDetectionShutdownNameV2, &#x27;&amp;&#x27;, &#x27;&amp;&amp;&#x27;)&#125;</span>&#125;&quot;; Flags: nowait postinstall skipifsilent    ;Components:RewindDetectionShutdownV2</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">;复卷检测停机V3定义</span><br><span class="line">#ifdef btn_RewindDetectionShutdown_V3</span><br><span class="line">#define  RewindDetectionShutdownName &quot;复卷检测停机V3&quot;</span><br><span class="line">#define  RewindDetectionShutdownExeName &quot;RewindingDetectionV3.exe&quot;</span><br><span class="line">[Components]</span><br><span class="line"><span class="keyword">Name</span>:RewindDetectionShutdownV3;Description:&quot;复卷检测停机V3&quot;;Types:Full;</span><br><span class="line">[Files]</span><br><span class="line">Source: &quot;C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\Docs\复卷检测停机\*&quot;; DestDir: &quot;<span class="comment">&#123;app&#125;</span>\Docs\复卷检测停机&quot;; Flags: ignoreversion recursesubdirs createallsubdirs  ;Components: RewindDetectionShutdownV3</span><br><span class="line">Source: &quot;C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\<span class="comment">&#123;#RewindDetectionShutdownExeName&#125;</span>&quot;; DestDir: &quot;<span class="comment">&#123;app&#125;</span>&quot;; Flags: ignoreversion; Components: RewindDetectionShutdownV3</span><br><span class="line">[Icons]</span><br><span class="line">;桌面快捷方式  </span><br><span class="line">;<span class="keyword">Name</span>: &quot;<span class="comment">&#123;autoprograms&#125;</span>\<span class="comment">&#123;#X_LineName&#125;</span>&quot;; Filename: &quot;<span class="comment">&#123;app&#125;</span>\<span class="comment">&#123;#X_LineExeName&#125;</span>&quot;      ;Components:X_Line</span><br><span class="line"><span class="keyword">Name</span>: &quot;<span class="comment">&#123;autodesktop&#125;</span>\<span class="comment">&#123;#RewindDetectionShutdownName&#125;</span>&quot;; Filename: &quot;<span class="comment">&#123;app&#125;</span>\<span class="comment">&#123;#RewindDetectionShutdownExeName&#125;</span>&quot;; Tasks: desktopicon      ;Components:RewindDetectionShutdownV3</span><br><span class="line">[Run]</span><br><span class="line">Filename: &quot;<span class="comment">&#123;app&#125;</span>\<span class="comment">&#123;#RewindDetectionShutdownExeName&#125;</span>&quot;; Description: &quot;<span class="comment">&#123;cm:LaunchProgram,&#123;#StringChange(RewindDetectionShutdownName, &#x27;&amp;&#x27;, &#x27;&amp;&amp;&#x27;)&#125;</span>&#125;&quot;; Flags: nowait postinstall skipifsilent    ;Components:RewindDetectionShutdownV3</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">;光源控制器定义</span><br><span class="line">#ifdef btn_Light_source_controller </span><br><span class="line">#define  Light_source_controllerName &quot;光源控制器&quot;</span><br><span class="line">#define  Light_source_controllerExeName &quot;Light_source_controller.exe&quot;</span><br><span class="line">[Components]</span><br><span class="line"><span class="keyword">Name</span>:Light_source_controller;Description:&quot;光源控制器&quot;;Types:Full;</span><br><span class="line">[Files]</span><br><span class="line">Source: &quot;C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\Docs\光源控制器\*&quot;; DestDir: &quot;<span class="comment">&#123;app&#125;</span>\Docs\光源控制器&quot;; Flags: ignoreversion   ;Components: Light_source_controller</span><br><span class="line">Source: &quot;C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\<span class="comment">&#123;#Light_source_controllerExeName&#125;</span>&quot;; DestDir: &quot;<span class="comment">&#123;app&#125;</span>&quot;; Flags: ignoreversion; Components: Light_source_controller</span><br><span class="line">[Icons]</span><br><span class="line">;桌面快捷方式  </span><br><span class="line">;<span class="keyword">Name</span>: &quot;<span class="comment">&#123;autoprograms&#125;</span>\<span class="comment">&#123;#X_LineName&#125;</span>&quot;; Filename: &quot;<span class="comment">&#123;app&#125;</span>\<span class="comment">&#123;#X_LineExeName&#125;</span>&quot;      ;Components:X_Line</span><br><span class="line"><span class="keyword">Name</span>: &quot;<span class="comment">&#123;autodesktop&#125;</span>\<span class="comment">&#123;#Light_source_controllerName&#125;</span>&quot;; Filename: &quot;<span class="comment">&#123;app&#125;</span>\<span class="comment">&#123;#Light_source_controllerExeName&#125;</span>&quot;; Tasks: desktopicon      ;Components:Light_source_controller</span><br><span class="line">[Run]</span><br><span class="line">Filename: &quot;<span class="comment">&#123;app&#125;</span>\<span class="comment">&#123;#Light_source_controllerExeName&#125;</span>&quot;; Description: &quot;<span class="comment">&#123;cm:LaunchProgram,&#123;#StringChange(Light_source_controllerName, &#x27;&amp;&#x27;, &#x27;&amp;&amp;&#x27;)&#125;</span>&#125;&quot;; Flags: nowait postinstall skipifsilent    ;Components:Light_source_controller</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">;纱布折叠机_两通道_四相机定义</span><br><span class="line">#ifdef btn_Gauze_2ch_4cam </span><br><span class="line">#define  Gauze_2ch_4camName &quot;纱布折叠机_两通道_四相机&quot;</span><br><span class="line">#define  Gauze_2ch_4camExeName &quot;Gauze_2ch_4cam.exe&quot;</span><br><span class="line">[Components]</span><br><span class="line"><span class="keyword">Name</span>:Gauze_2ch_4cam;Description:&quot;纱布折叠机_两通道_四相机&quot;;Types:Full;</span><br><span class="line">[Files]</span><br><span class="line">Source: &quot;C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\Docs\折叠机_双通道四相机\*&quot;; DestDir: &quot;<span class="comment">&#123;app&#125;</span>\Docs\折叠机_双通道四相机&quot;; Flags: ignoreversion   ;Components: Gauze_2ch_4cam</span><br><span class="line">Source: &quot;C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\<span class="comment">&#123;#Gauze_2ch_4camExeName&#125;</span>&quot;; DestDir: &quot;<span class="comment">&#123;app&#125;</span>&quot;; Flags: ignoreversion; Components: Gauze_2ch_4cam</span><br><span class="line">[Icons]</span><br><span class="line">;桌面快捷方式  </span><br><span class="line">;<span class="keyword">Name</span>: &quot;<span class="comment">&#123;autoprograms&#125;</span>\<span class="comment">&#123;#X_LineName&#125;</span>&quot;; Filename: &quot;<span class="comment">&#123;app&#125;</span>\<span class="comment">&#123;#X_LineExeName&#125;</span>&quot;      ;Components:X_Line</span><br><span class="line"><span class="keyword">Name</span>: &quot;<span class="comment">&#123;autodesktop&#125;</span>\<span class="comment">&#123;#Gauze_2ch_4camName&#125;</span>&quot;; Filename: &quot;<span class="comment">&#123;app&#125;</span>\<span class="comment">&#123;#Gauze_2ch_4camExeName&#125;</span>&quot;; Tasks: desktopicon      ;Components:Gauze_2ch_4cam</span><br><span class="line">[Run]</span><br><span class="line">Filename: &quot;<span class="comment">&#123;app&#125;</span>\<span class="comment">&#123;#Gauze_2ch_4camExeName&#125;</span>&quot;; Description: &quot;<span class="comment">&#123;cm:LaunchProgram,&#123;#StringChange(Gauze_2ch_4camName, &#x27;&amp;&#x27;, &#x27;&amp;&amp;&#x27;)&#125;</span>&#125;&quot;; Flags: nowait postinstall skipifsilent        ;Components:Gauze_2ch_4cam</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">;产线信号转换器定义</span><br><span class="line">#ifdef btn_InputSignalConverter </span><br><span class="line">#define  ProductionLineSignalConverterName &quot;产线信号转换器&quot;</span><br><span class="line">#define  ProductionLineSignalConverterExeName &quot;&quot;</span><br><span class="line">[Components]</span><br><span class="line"><span class="keyword">Name</span>:ProductionLineSignalConverter;Description:&quot;产线信号转换器&quot;;Types:Full;</span><br><span class="line">[Files]</span><br><span class="line">Source: &quot;C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\Docs\产线信号转换器\*&quot;; DestDir: &quot;<span class="comment">&#123;app&#125;</span>\Docs\产线信号转换器&quot;; Flags: ignoreversion   ;Components: ProductionLineSignalConverter</span><br><span class="line">;Source: &quot;C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\<span class="comment">&#123;#ProductionLineSignalConverterExeName&#125;</span>&quot;; DestDir: &quot;<span class="comment">&#123;app&#125;</span>&quot;; Flags: ignoreversion; Components: ProductionLineSignalConverter</span><br><span class="line">[Icons]</span><br><span class="line">;桌面快捷方式  </span><br><span class="line">;<span class="keyword">Name</span>: &quot;<span class="comment">&#123;autoprograms&#125;</span>\<span class="comment">&#123;#X_LineName&#125;</span>&quot;; Filename: &quot;<span class="comment">&#123;app&#125;</span>\<span class="comment">&#123;#X_LineExeName&#125;</span>&quot;      ;Components:X_Line</span><br><span class="line">;<span class="keyword">Name</span>: &quot;<span class="comment">&#123;autodesktop&#125;</span>\<span class="comment">&#123;#ProductionLineSignalConverterName&#125;</span>&quot;; Filename: &quot;<span class="comment">&#123;app&#125;</span>\<span class="comment">&#123;#ProductionLineSignalConverterExeName&#125;</span>&quot;; Tasks: desktopicon      ;Components:ProductionLineSignalConverter</span><br><span class="line">[Run]</span><br><span class="line">;Filename: &quot;<span class="comment">&#123;app&#125;</span>\<span class="comment">&#123;#ProductionLineSignalConverterExeName&#125;</span>&quot;; Description: &quot;<span class="comment">&#123;cm:LaunchProgram,&#123;#StringChange(ProductionLineSignalConverterName, &#x27;&amp;&#x27;, &#x27;&amp;&amp;&#x27;)&#125;</span>&#125;&quot;; Flags: nowait postinstall skipifsilent</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">[Setup]</span><br><span class="line">; NOTE: The value <span class="keyword">of</span> AppId uniquely identifies this application. <span class="keyword">Do</span> <span class="keyword">not</span> use the same AppId value <span class="keyword">in</span> installers <span class="keyword">for</span> other applications.</span><br><span class="line">; (<span class="keyword">To</span> generate a new GUID, click Tools | Generate GUID inside the IDE.)</span><br><span class="line">AppId=<span class="comment">&#123;&#123;433F837C-1CBE-45B1-948F-B33CB8DC0191&#125;</span></span><br><span class="line">AppName=<span class="comment">&#123;#MyAppName&#125;</span></span><br><span class="line">AppVersion=<span class="comment">&#123;#MyAppVersion&#125;</span></span><br><span class="line">;AppVerName=<span class="comment">&#123;#MyAppName&#125;</span> <span class="comment">&#123;#MyAppVersion&#125;</span></span><br><span class="line">AppPublisher=<span class="comment">&#123;#MyAppPublisher&#125;</span></span><br><span class="line">AppPublisherURL=<span class="comment">&#123;#MyAppURL&#125;</span></span><br><span class="line">AppSupportURL=<span class="comment">&#123;#MyAppURL&#125;</span></span><br><span class="line">AppUpdatesURL=<span class="comment">&#123;#MyAppURL&#125;</span></span><br><span class="line">DefaultDirName=C:/恒意得上位机系统</span><br><span class="line">DisableProgramGroupPage=yes</span><br><span class="line">;InfoAfterFile=C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\Docs\更新日志.md</span><br><span class="line">; Uncomment the following line <span class="keyword">to</span> run <span class="keyword">in</span> non administrative install mode (install <span class="keyword">for</span> current user only.)</span><br><span class="line">;PrivilegesRequired=lowest</span><br><span class="line">OutputDir=C:\Users\fengj\OneDrive\Programs\Controller\Release_Installation_Package</span><br><span class="line">OutputBaseFilename=<span class="comment">&#123;#MyAppName&#125;</span>_setup_安装包</span><br><span class="line">SetupIconFile=C:\\Users\\fengj\\OneDrive\\Programs\\Controller\\Release\\Software_msvc\\source_material\\icon\\install.ico</span><br><span class="line">UninstallDisplayIcon=C:\\Users\\fengj\\OneDrive\\Programs\\Controller\\Release\\Software_msvc\\source_material\\icon\\install.ico</span><br><span class="line">Compression=lzma</span><br><span class="line">SolidCompression=yes</span><br><span class="line">WizardStyle=modern</span><br><span class="line">ChangesEnvironment=true</span><br><span class="line">UsePreviousAppDir=no</span><br><span class="line">;UsePreviousAppDir该字段设置为no则允许用户使用非覆盖的方式安装应用,若需要还原为覆盖安装则删除该字段即可</span><br><span class="line">ShowLanguageDialog=yes</span><br><span class="line">;上述语句为组件选择安装使用</span><br><span class="line">password=heng</span><br><span class="line">;上述语句用于添加安装密码</span><br><span class="line"></span><br><span class="line">;ChangesEnvironment=yes</span><br><span class="line">;上述语句用于环境变量相关</span><br><span class="line"></span><br><span class="line">;AlwaysRestart =yes</span><br><span class="line">;  上述 用于重启</span><br><span class="line"></span><br><span class="line">;RestartIfNeededByRun=yes</span><br><span class="line">;重启相关</span><br><span class="line"></span><br><span class="line">DefaultGroupName=<span class="comment">&#123;#MyAppName&#125;</span> </span><br><span class="line">;菜单栏创建文件夹</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[Languages]</span><br><span class="line"><span class="keyword">Name</span>: &quot;english&quot;; MessagesFile: &quot;compiler:<span class="keyword">Default</span>.isl&quot;</span><br><span class="line"><span class="keyword">Name</span>: &quot;chinesesimplified&quot;; MessagesFile: &quot;compiler:Languages\ChineseSimplified.isl&quot;</span><br><span class="line"></span><br><span class="line">[Tasks]</span><br><span class="line"><span class="keyword">Name</span>: &quot;desktopicon&quot;; Description: &quot;<span class="comment">&#123;cm:CreateDesktopIcon&#125;</span>&quot;; GroupDescription: &quot;<span class="comment">&#123;cm:AdditionalIcons&#125;</span>&quot;; Flags: checkablealone; </span><br><span class="line">;以上若需要默认不勾选安装快捷方式,则可以将flags替换为unchecked ,若默认需要勾选则为checkablealone</span><br><span class="line">; 只是在同级页面添加了选项.....<span class="keyword">Name</span>:&quot;YiTiJi&quot;;Description: &quot;测试&quot;;Flags:unchecked</span><br><span class="line">; 只是在同级页面添加了选项.....<span class="keyword">Name</span>:&quot;X_Line&quot;;Description:&quot;测试<span class="number">2</span>&quot;;Components:X_Line</span><br><span class="line"></span><br><span class="line">;<span class="keyword">Name</span>:&quot;RestartPC&quot;; Description:&quot;Restart the Computer&quot;; GroupDescription:&quot;Post Installation Options&quot;; Flags: unchecked;</span><br><span class="line">;上述代码用于设定安装完重启</span><br><span class="line"></span><br><span class="line">[Files]</span><br><span class="line">Source: &quot;C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\*.dll&quot;; DestDir: &quot;<span class="comment">&#123;app&#125;</span>&quot;; Flags: ignoreversion</span><br><span class="line">Source: &quot;C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\iconengines\*&quot;; DestDir: &quot;<span class="comment">&#123;app&#125;</span>\iconengines&quot;; Flags: ignoreversion</span><br><span class="line">Source: &quot;C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\imageformats\*&quot;; DestDir: &quot;<span class="comment">&#123;app&#125;</span>\imageformats&quot;; Flags: ignoreversion</span><br><span class="line">Source: &quot;C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\platforms\*&quot;; DestDir: &quot;<span class="comment">&#123;app&#125;</span>\platforms&quot;; Flags: ignoreversion</span><br><span class="line">Source: &quot;C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\styles\*&quot;; DestDir: &quot;<span class="comment">&#123;app&#125;</span>\styles&quot;; Flags: ignoreversion</span><br><span class="line">Source: &quot;C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\translations\*&quot;; DestDir: &quot;<span class="comment">&#123;app&#125;</span>\translations&quot;; Flags: ignoreversion                </span><br><span class="line">Source: &quot;C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\Skin\*&quot;; DestDir: &quot;<span class="comment">&#123;app&#125;</span>\Skin&quot;; Flags: ignoreversion</span><br><span class="line">Source: &quot;C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\参数管理\*&quot;; DestDir: &quot;<span class="comment">&#123;app&#125;</span>\参数管理&quot;; Flags: ignoreversion onlyifdoesntexist</span><br><span class="line">;Source: &quot;C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\Docs\dll修复工具\*&quot;; DestDir: &quot;<span class="comment">&#123;app&#125;</span>\Docs\dll修复工具&quot;; Flags: ignoreversion   recursesubdirs createallsubdirs</span><br><span class="line"></span><br><span class="line">;Source: &quot;C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\Docs\标准控制器\*&quot;; DestDir: &quot;<span class="comment">&#123;app&#125;</span>\Docs\标准控制器&quot;; Flags: ignoreversion</span><br><span class="line">;Source: &quot;C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\Docs\复卷检测\*&quot;; DestDir: &quot;<span class="comment">&#123;app&#125;</span>\Docs\复卷检测&quot;; Flags: ignoreversion   ;Components: Rewinding_System</span><br><span class="line">;Source: &quot;C:\Users\fengj\OneDrive\Programs\Controller\Release\Software_msvc\复卷系统\*&quot;; DestDir: &quot;<span class="comment">&#123;app&#125;</span>\复卷系统&quot;; Flags: ignoreversion recursesubdirs createallsubdirs;Components: Rewinding_System</span><br><span class="line">; NOTE: Don<span class="string">&#x27;t use &quot;Flags: ignoreversion&quot; on any shared system files</span></span><br><span class="line"><span class="string">;后缀加上 recursesubdirs createallsubdirs 可以包含文件夹下所有内容</span></span><br><span class="line"><span class="string">;后缀加上 onlyifdoesntexist 可以判断文件夹是否有该文件,若存在该文件则不替换</span></span><br><span class="line"><span class="string">;[Icons]</span></span><br><span class="line"><span class="string">;Name: &quot;&#123;autoprograms&#125;\&#123;#MyAppName&#125;&quot;; Filename: &quot;&#123;app&#125;\&#123;#MyAppExeName&#125;&quot;  </span></span><br><span class="line"><span class="string">;Name: &quot;&#123;autodesktop&#125;\&#123;#MyAppName&#125;&quot;; Filename: &quot;&#123;app&#125;\&#123;#MyAppExeName&#125;&quot;; Tasks: desktopicon </span></span><br><span class="line"><span class="string">;下述代码实现了安装完成后桌面显示多个快捷方式的功能</span></span><br><span class="line"><span class="string">;Name: &quot;&#123;autoprograms&#125;\&#123;#YiTiJiName&#125;&quot;; Filename: &quot;&#123;app&#125;\&#123;#YiTiJiExeName&#125;&quot;      ;Components:YiTiJi</span></span><br><span class="line"><span class="string">;Name: &quot;&#123;autodesktop&#125;\&#123;#YiTiJiName&#125;&quot;; Filename: &quot;&#123;app&#125;\&#123;#YiTiJiExeName&#125;&quot;; Tasks: desktopicon      ;Components:YiTiJi</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">;复卷系统的桌面快捷方式</span></span><br><span class="line"><span class="string">;Name: &quot;&#123;autoprograms&#125;\&#123;#Rewinding_SystemName&#125;&quot;; Filename: &quot;&#123;app&#125;\&#123;#Rewinding_SystemExeName&#125;&quot;      ;Components:Rewinding_System</span></span><br><span class="line"><span class="string">;Name: &quot;&#123;autodesktop&#125;\&#123;#Rewinding_SystemName&#125;&quot;; Filename: &quot;&#123;app&#125;\&#123;#Rewinding_SystemExeName&#125;&quot;; Tasks: desktopicon      ;Components:Rewinding_System</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">;菜单栏创建文件夹</span></span><br><span class="line"><span class="string">;Name: &quot;&#123;group&#125;\&#123;#MyAppName&#125;&quot;; Filename: &quot;&#123;app&#125;\&#123;#MyAppExeName&#125;&quot;; WorkingDir:&quot;&#123;app&#125;&quot;</span></span><br><span class="line"><span class="string">;Name: &quot;&#123;group&#125;\&#123;cm:UninstallProgram,&#123;#MyAppName&#125;&#125;&quot;; Filename: &quot;&#123;uninstallexe&#125;&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[Code]</span></span><br><span class="line"><span class="string">// 设置环境变量函数</span></span><br><span class="line"><span class="string">procedure SetEnv(aEnvName, aEnvValue: string; aIsInstall, aIsInsForAllUser: Boolean);</span></span><br><span class="line"><span class="string">var</span></span><br><span class="line"><span class="string">sOrgValue: string;</span></span><br><span class="line"><span class="string">sFileName: string;</span></span><br><span class="line"><span class="string">S1: AnsiString;                                                  //注意类型是AnsiString,不是string</span></span><br><span class="line"><span class="string">bRetValue, bInsForAllUser: Boolean;</span></span><br><span class="line"><span class="string">SL: TStringList;</span></span><br><span class="line"><span class="string">x: integer;</span></span><br><span class="line"><span class="string">begin</span></span><br><span class="line"><span class="string">bInsForAllUser := aIsInsForAllUser;</span></span><br><span class="line"><span class="string">if UsingWinNT then</span></span><br><span class="line"><span class="string">begin</span></span><br><span class="line"><span class="string">    if bInsForAllUser then</span></span><br><span class="line"><span class="string">      bRetValue := RegQueryStringValue(HKEY_LOCAL_MACHINE, &#x27;</span>SYSTEM\CurrentControlSet\Control\Session Manager\Environment<span class="string">&#x27;, aEnvName, sOrgValue)</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">      bRetValue := RegQueryStringValue(HKEY_CURRENT_USER, &#x27;</span>Environment<span class="string">&#x27;, aEnvName, sOrgValue);</span></span><br><span class="line"><span class="string">    sOrgValue := Trim(sOrgValue);</span></span><br><span class="line"><span class="string">    begin</span></span><br><span class="line"><span class="string">      S1 := aEnvValue;</span></span><br><span class="line"><span class="string">      if pos(Uppercase(s1), Uppercase(sOrgValue)) = 0 then //还没有加入</span></span><br><span class="line"><span class="string">      begin</span></span><br><span class="line"><span class="string">        if aIsInstall then</span></span><br><span class="line"><span class="string">        begin</span></span><br><span class="line"><span class="string">          x := Length(sOrgValue);</span></span><br><span class="line"><span class="string">          if (x &gt; 0) and (StringOfChar(sOrgValue[x], 1) &lt;&gt; &#x27;</span>;<span class="string">&#x27;) then</span></span><br><span class="line"><span class="string">            sOrgValue := sOrgValue + &#x27;</span>;<span class="string">&#x27;;</span></span><br><span class="line"><span class="string">          sOrgValue := sOrgValue + S1;</span></span><br><span class="line"><span class="string">        end;</span></span><br><span class="line"><span class="string">      end else</span></span><br><span class="line"><span class="string">      begin</span></span><br><span class="line"><span class="string">        if not aIsInstall then</span></span><br><span class="line"><span class="string">        begin</span></span><br><span class="line"><span class="string">          StringChangeEx(sOrgValue, S1 + &#x27;</span>;<span class="string">&#x27;, &#x27;&#x27;, True);</span></span><br><span class="line"><span class="string">          StringChangeEx(sOrgValue, S1, &#x27;&#x27;, True);</span></span><br><span class="line"><span class="string">        end;</span></span><br><span class="line"><span class="string">      end;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">      if bInsForAllUser then</span></span><br><span class="line"><span class="string">        RegWriteStringValue(HKEY_LOCAL_MACHINE, &#x27;</span>SYSTEM\CurrentControlSet\Control\Session Manager\Environment<span class="string">&#x27;, aEnvName, sOrgValue)</span></span><br><span class="line"><span class="string">      else</span></span><br><span class="line"><span class="string">      begin</span></span><br><span class="line"><span class="string">        if (not aIsInstall) and (Trim(sOrgValue) = &#x27;&#x27;) then</span></span><br><span class="line"><span class="string">          RegDeleteValue(HKEY_CURRENT_USER, &#x27;</span>Environment<span class="string">&#x27;, aEnvName)</span></span><br><span class="line"><span class="string">        else</span></span><br><span class="line"><span class="string">          RegWriteStringValue(HKEY_CURRENT_USER, &#x27;</span>Environment<span class="string">&#x27;, aEnvName, sOrgValue);</span></span><br><span class="line"><span class="string">      end;</span></span><br><span class="line"><span class="string">    end;</span></span><br><span class="line"><span class="string">end else //非NT 系统,如Win98</span></span><br><span class="line"><span class="string">begin</span></span><br><span class="line"><span class="string">    SL := TStringList.Create;</span></span><br><span class="line"><span class="string">    try</span></span><br><span class="line"><span class="string">      sFileName := ExpandConstant(&#x27;</span><span class="comment">&#123;sd&#125;</span>\autoexec.bat<span class="string">&#x27;);</span></span><br><span class="line"><span class="string">      LoadStringFromFile(sFileName, S1);</span></span><br><span class="line"><span class="string">      SL.Text := s1;</span></span><br><span class="line"><span class="string">      s1 :=   &#x27;</span>&quot;<span class="string">&#x27; + aEnvValue + &#x27;</span>&quot;<span class="string">&#x27;;</span></span><br><span class="line"><span class="string">      s1 := &#x27;</span><span class="keyword">set</span> <span class="string">&#x27;+aEnvName +&#x27;</span>=%path%;<span class="string">&#x27; + s1 ;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">      bRetValue := False;</span></span><br><span class="line"><span class="string">      x := SL.IndexOf(s1);</span></span><br><span class="line"><span class="string">      if x = -1 then</span></span><br><span class="line"><span class="string">      begin</span></span><br><span class="line"><span class="string">        if aIsInstall then</span></span><br><span class="line"><span class="string">        begin</span></span><br><span class="line"><span class="string">          SL.Add(s1);</span></span><br><span class="line"><span class="string">          bRetValue := True;</span></span><br><span class="line"><span class="string">        end;</span></span><br><span class="line"><span class="string">      end else //还没添加</span></span><br><span class="line"><span class="string">        if not aIsInstall then</span></span><br><span class="line"><span class="string">        begin</span></span><br><span class="line"><span class="string">          SL.Delete(x);</span></span><br><span class="line"><span class="string">          bRetValue := True;</span></span><br><span class="line"><span class="string">        end;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">      if bRetValue then</span></span><br><span class="line"><span class="string">        SL.SaveToFile(sFileName);</span></span><br><span class="line"><span class="string">    finally</span></span><br><span class="line"><span class="string">      SL.free;</span></span><br><span class="line"><span class="string">    end;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">end;</span></span><br><span class="line"><span class="string">end;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">// 安装前添加环境变量</span></span><br><span class="line"><span class="string">procedure CurStepChanged(CurStep: TSetupStep);</span></span><br><span class="line"><span class="string">begin</span></span><br><span class="line"><span class="string">  if CurStep = ssInstall then                        //对于(ssInstall)这个变量可依据自身需要进行更改，帮助文档中有说明(也可是安装完成之后进行写入对应变量为ssDone)</span></span><br><span class="line"><span class="string">  begin</span></span><br><span class="line"><span class="string">  // 将&#123;app&#125;路径添加到path环境变量中</span></span><br><span class="line"><span class="string">     //SetEnv(&#x27;</span>path<span class="string">&#x27;,ExpandConstant(&#x27;</span><span class="comment">&#123;app&#125;</span>;<span class="string">&#x27;),true,true); //对于添加多个环境变量需要注意要添加分割符号&quot;;&quot;,否则系统会认为是一个</span></span><br><span class="line"><span class="string">     SetEnv(&#x27;</span>path<span class="string">&#x27;,ExpandConstant(&#x27;</span><span class="comment">&#123;app&#125;</span>\bin\pylon<span class="string">&#x27;),true,true); //在这儿调用,一定在这儿调用,安装完无须重启,立即生效</span></span><br><span class="line"><span class="string">     SetEnv(&#x27;</span>path<span class="string">&#x27;,ExpandConstant(&#x27;</span><span class="comment">&#123;app&#125;</span>\bin\opencv<span class="string">&#x27;),true,true); //在这儿调用,一定在这儿调用,安装完无须重启,立即生效</span></span><br><span class="line"><span class="string">     //SetEnv(&#x27;</span>path<span class="string">&#x27;,ExpandConstant(&#x27;</span><span class="comment">&#123;app&#125;</span>\bin\x86<span class="string">&#x27;),true,true); //在这儿调用,一定在这儿调用,安装完无须重启,立即生效</span></span><br><span class="line"><span class="string">     SetEnv(&#x27;</span>path<span class="string">&#x27;,ExpandConstant(&#x27;</span><span class="comment">&#123;app&#125;</span>\bin\x64<span class="string">&#x27;),true,true); //在这儿调用,一定在这儿调用,安装完无须重启,立即生效</span></span><br><span class="line"><span class="string">  end;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  //if CurStep = ssDone then                        //对于(ssInstall)这个变量可依据自身需要进行更改，帮助文档中有说明(也可是安装完成之后进行写入对应变量为ssDone)</span></span><br><span class="line"><span class="string">  //begin</span></span><br><span class="line"><span class="string">  // 将&#123;app&#125;路径添加到path环境变量中</span></span><br><span class="line"><span class="string">     //SetEnv(&#x27;</span>path<span class="string">&#x27;,ExpandConstant(&#x27;</span><span class="comment">&#123;app&#125;</span>;<span class="string">&#x27;),true,true); //对于添加多个环境变量需要注意要添加分割符号&quot;;&quot;,否则系统会认为是一个</span></span><br><span class="line"><span class="string">     //SetEnv(&#x27;</span>path<span class="string">&#x27;,ExpandConstant(&#x27;</span><span class="comment">&#123;app&#125;</span>\bin\pylon<span class="string">&#x27;),true,true); //在这儿调用,一定在这儿调用,安装完无须重启,立即生效</span></span><br><span class="line"><span class="string">     //SetEnv(&#x27;</span>path<span class="string">&#x27;,ExpandConstant(&#x27;</span><span class="comment">&#123;app&#125;</span>\bin\opencv<span class="string">&#x27;),true,true); //在这儿调用,一定在这儿调用,安装完无须重启,立即生效</span></span><br><span class="line"><span class="string">    // SetEnv(&#x27;</span>path<span class="string">&#x27;,ExpandConstant(&#x27;</span><span class="comment">&#123;app&#125;</span>\bin\x86<span class="string">&#x27;),true,true); //在这儿调用,一定在这儿调用,安装完无须重启,立即生效</span></span><br><span class="line"><span class="string">     //SetEnv(&#x27;</span>path<span class="string">&#x27;,ExpandConstant(&#x27;</span><span class="comment">&#123;app&#125;</span>\bin\x64<span class="string">&#x27;),true,true); //在这儿调用,一定在这儿调用,安装完无须重启,立即生效</span></span><br><span class="line"><span class="string">  //end;</span></span><br><span class="line"><span class="string">end;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">// 卸载前删除环境变量</span></span><br><span class="line"><span class="string">procedure CurUninstallStepChanged(CurUninstallStep: TUninstallStep);</span></span><br><span class="line"><span class="string">begin</span></span><br><span class="line"><span class="string">  // 将&#123;app&#125;路径从path环境变量中删除</span></span><br><span class="line"><span class="string">  //SetEnv(&#x27;</span>path<span class="string">&#x27;,ExpandConstant(&#x27;</span><span class="comment">&#123;app&#125;</span>;<span class="string">&#x27;),false,true);</span></span><br><span class="line"><span class="string">  SetEnv(&#x27;</span>path<span class="string">&#x27;,ExpandConstant(&#x27;</span><span class="comment">&#123;app&#125;</span>\bin\pylon<span class="string">&#x27;),false,true); //卸载时所需要删除的环境变量需要与所添加的变量一致，以免误删除</span></span><br><span class="line"><span class="string">  SetEnv(&#x27;</span>path<span class="string">&#x27;,ExpandConstant(&#x27;</span><span class="comment">&#123;app&#125;</span>\bin\opencv<span class="string">&#x27;),false,true); //卸载时所需要删除的环境变量需要与所添加的变量一致，以免误删除</span></span><br><span class="line"><span class="string">  //SetEnv(&#x27;</span>path<span class="string">&#x27;,ExpandConstant(&#x27;</span><span class="comment">&#123;app&#125;</span>\bin\x86<span class="string">&#x27;),false,true); //卸载时所需要删除的环境变量需要与所添加的变量一致，以免误删除</span></span><br><span class="line"><span class="string">  SetEnv(&#x27;</span>path<span class="string">&#x27;,ExpandConstant(&#x27;</span><span class="comment">&#123;app&#125;</span>\bin\x64<span class="string">&#x27;),false,true); //卸载时所需要删除的环境变量需要与所添加的变量一致，以免误删除</span></span><br><span class="line"><span class="string">end;</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 软件编程 </category>
          
          <category> InnoSetup </category>
          
      </categories>
      
      
        <tags>
            
            <tag> InnoSetup </tag>
            
            <tag> 制作安装包 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git</title>
      <link href="/2023/11/17/%E7%BB%BC%E5%90%88/git/"/>
      <url>/2023/11/17/%E7%BB%BC%E5%90%88/git/</url>
      
        <content type="html"><![CDATA[<h1 id="git笔记"><a href="#git笔记" class="headerlink" title="git笔记"></a>git笔记</h1><h2 id="一-如何修改-gitignore"><a href="#一-如何修改-gitignore" class="headerlink" title="一. 如何修改.gitignore"></a>一. 如何修改.gitignore</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#add .gitignore</span><br><span class="line">#查看状态，是否忽略了指定的文件？ </span><br><span class="line">$ git status --ignored #查看状态，包括忽略的文件</span><br><span class="line"> </span><br><span class="line">#让其对已经跟踪的文件也起作用</span><br><span class="line">$ git rm -r --cached .  #清除缓存 -r 表示递归删除（如果有文件夹的话） . 表示所有文件</span><br><span class="line"> </span><br><span class="line">#查看一下具体效果</span><br><span class="line">$ git status --ignored</span><br><span class="line">$ git add .           #重新trace file</span><br><span class="line">$ git commit -m &quot;update .gitignore&quot;     #提交和注释</span><br></pre></td></tr></table></figure><h2 id="二-如何删除分支"><a href="#二-如何删除分支" class="headerlink" title="二. 如何删除分支"></a>二. 如何删除分支</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -d branch-name</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin --delete dev</span><br></pre></td></tr></table></figure><h2 id="三-合并指定文件夹"><a href="#三-合并指定文件夹" class="headerlink" title="三. 合并指定文件夹"></a>三. 合并指定文件夹</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout 分支名 根目录/demo1.txt    //指定文件</span><br><span class="line">git checkout dev lib/ui/pages/member/** //多级目录</span><br></pre></td></tr></table></figure><h2 id="四-强制推送分支"><a href="#四-强制推送分支" class="headerlink" title="四. 强制推送分支"></a>四. 强制推送分支</h2><ul><li>命令格式为:<br>git push &lt;远程名称&gt; &lt;本地分支名&gt;:&lt;远程分支名&gt;<br>例如,推送本地的 master 分支到远程的 master 分支,强制覆盖远程代码:<br>git push origin master:master -f</li></ul><h1 id="Gitea"><a href="#Gitea" class="headerlink" title="Gitea"></a>Gitea</h1><h2 id="下载安装"><a href="#下载安装" class="headerlink" title="下载安装"></a>下载安装</h2><p><a href="https://github.com/go-gitea/gitea">github链接</a></p><h2 id="配置服务器"><a href="#配置服务器" class="headerlink" title="配置服务器"></a>配置服务器</h2><ul><li>双击gieta.exe</li><li>打开网页</li><li>配置信息，数据库使用sqlite，路径地址使用相对地址</li></ul><h2 id="注册服务"><a href="#注册服务" class="headerlink" title="注册服务"></a>注册服务</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nssm install gitea</span><br><span class="line">nssm start gitea</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="配置发布版本附件大小以及数量"><a href="#配置发布版本附件大小以及数量" class="headerlink" title="配置发布版本附件大小以及数量"></a>配置发布版本附件大小以及数量</h2><p>custom文件夹-&gt;conf文件夹-&gt;app.ini</p><p>添加以下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[attachment]</span><br><span class="line">ENABLED=true</span><br><span class="line">ALLOWED_TYPES=*/*</span><br><span class="line">MAX_SIZE=1024</span><br><span class="line">MAX_FILES=10</span><br></pre></td></tr></table></figure><h1 id="Git笔记"><a href="#Git笔记" class="headerlink" title="Git笔记"></a>Git笔记</h1><h2 id="合并本次提交到上一次提交"><a href="#合并本次提交到上一次提交" class="headerlink" title="合并本次提交到上一次提交"></a>合并本次提交到上一次提交</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#如果一个功能或者版本开发完了 已经提交了commit ，然后又更改了几个小地方或者</span><br><span class="line">#小bug，而不想生成新的提交信息，可以使用以下命令</span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line">git commit --amend --no-edit</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 综合 </category>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
            <tag> 版本管理 </tag>
            
            <tag> git服务器部署 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Delta</title>
      <link href="/2023/11/17/PLC/Delta/"/>
      <url>/2023/11/17/PLC/Delta/</url>
      
        <content type="html"><![CDATA[<h1 id="Delta高级"><a href="#Delta高级" class="headerlink" title="Delta高级"></a>Delta高级</h1><h2 id="PID"><a href="#PID" class="headerlink" title="PID"></a>PID</h2><h2 id="定时中断"><a href="#定时中断" class="headerlink" title="定时中断"></a>定时中断</h2><h2 id="计数中断"><a href="#计数中断" class="headerlink" title="计数中断"></a>计数中断</h2><h2 id="IO中断"><a href="#IO中断" class="headerlink" title="IO中断"></a>IO中断</h2><h2 id="模拟量"><a href="#模拟量" class="headerlink" title="模拟量"></a>模拟量</h2><h2 id="串口通信"><a href="#串口通信" class="headerlink" title="串口通信"></a>串口通信</h2><h2 id="网口通信"><a href="#网口通信" class="headerlink" title="网口通信"></a>网口通信</h2><h2 id="浮点运算"><a href="#浮点运算" class="headerlink" title="浮点运算"></a>浮点运算</h2><h2 id="Modbus"><a href="#Modbus" class="headerlink" title="Modbus"></a>Modbus</h2><h3 id="Modbus-RTU-从站"><a href="#Modbus-RTU-从站" class="headerlink" title="Modbus RTU 从站"></a>Modbus RTU 从站</h3><ul><li>规划好使用的串口,设置该串口的波特率,校验位,数据长度,停止位,等.再确认与其通信的设备使用的是ASCII还是RTU.将以上内容设置完成即可(无需写任何通信相关的代码,例如RS,或者置位通信标志等都不需要)</li><li>设置完成后即可作为Modbus RTU 从站设备通信了</li></ul>]]></content>
      
      
      <categories>
          
          <category> PLC </category>
          
          <category> Delta </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 台达 </tag>
            
            <tag> Delta </tag>
            
            <tag> PLC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>STM32</title>
      <link href="/2023/11/17/%E5%B5%8C%E5%85%A5%E5%BC%8F/STM32/"/>
      <url>/2023/11/17/%E5%B5%8C%E5%85%A5%E5%BC%8F/STM32/</url>
      
        <content type="html"><![CDATA[<h1 id="STM32-HAL库"><a href="#STM32-HAL库" class="headerlink" title="STM32-HAL库"></a>STM32-HAL库</h1><h2 id="cubemx创建工程"><a href="#cubemx创建工程" class="headerlink" title="cubemx创建工程"></a>cubemx创建工程</h2><h3 id="下载cubemx"><a href="#下载cubemx" class="headerlink" title="下载cubemx"></a>下载cubemx</h3><p><a href="https://www.st.com/zh/microcontrollers-microprocessors/stm32-32-bit-arm-cortex-mcus.html#tools-software">下载链接:STM32CubeMX</a></p><h3 id="安装步骤"><a href="#安装步骤" class="headerlink" title="安装步骤"></a>安装步骤</h3><p>安装路径中不得出现中文,一路下一步即可</p><h3 id="安装基础包"><a href="#安装基础包" class="headerlink" title="安装基础包"></a>安装基础包</h3><p>找到需要的芯片,展开,勾选需要安装的版本,点击install安装即可,该方式为网络安装,时间较长.</p><p><img src="/../../images/STM32-HAL%E5%BA%93/1711533516759.png" alt="1711533516759"></p><p><img src="/../../images/STM32-HAL%E5%BA%93/1711533526818.png" alt="1711533526818"></p><h3 id="新建工程"><a href="#新建工程" class="headerlink" title="新建工程"></a>新建工程</h3><p><img src="/../../images/STM32-HAL%E5%BA%93/1711533535631.png" alt="1711533535631"></p><h3 id="选择芯片"><a href="#选择芯片" class="headerlink" title="选择芯片"></a>选择芯片</h3><p><img src="/../../images/STM32-HAL%E5%BA%93/1711533544089.png" alt="1711533544089"></p><h3 id="配置引脚"><a href="#配置引脚" class="headerlink" title="配置引脚"></a>配置引脚</h3><p><img src="/../../images/STM32-HAL%E5%BA%93/1711533552679.png" alt="1711533552679"></p><h3 id="配置时钟-外部时钟源"><a href="#配置时钟-外部时钟源" class="headerlink" title="配置时钟(外部时钟源)"></a>配置时钟(外部时钟源)</h3><p><img src="/../../images/STM32-HAL%E5%BA%93/1711533561859.png" alt="1711533561859"></p><p><img src="/../../images/STM32-HAL%E5%BA%93/1711533570357.png" alt="1711533570357"></p><h3 id="配置swd"><a href="#配置swd" class="headerlink" title="配置swd"></a>配置swd</h3><p><img src="/../../images/STM32-HAL%E5%BA%93/1711533579302.png" alt="1711533579302"></p><h3 id="配置定时器-需完善"><a href="#配置定时器-需完善" class="headerlink" title="配置定时器(需完善)"></a>配置定时器(需完善)</h3><p><img src="/../../images/STM32-HAL%E5%BA%93/1711533587286.png" alt="1711533587286"></p><h3 id="配置SPI"><a href="#配置SPI" class="headerlink" title="配置SPI"></a>配置SPI</h3><p><img src="/../../images/STM32-HAL%E5%BA%93/1711533596345.png" alt="1711533596345"></p><h3 id="配置IIC"><a href="#配置IIC" class="headerlink" title="配置IIC"></a>配置IIC</h3><p><img src="/../../images/STM32-HAL%E5%BA%93/1711533606269.png" alt="1711533606269"></p><h3 id="配置USART"><a href="#配置USART" class="headerlink" title="配置USART"></a>配置USART</h3><p><img src="/../../images/STM32-HAL%E5%BA%93/1711533614736.png" alt="1711533614736"></p><h3 id="配置ADC"><a href="#配置ADC" class="headerlink" title="配置ADC"></a>配置ADC</h3><p><img src="/../../images/STM32-HAL%E5%BA%93/1711533623669.png" alt="1711533623669"></p><h3 id="配置DAC"><a href="#配置DAC" class="headerlink" title="配置DAC"></a>配置DAC</h3><p><img src="/../../images/STM32-HAL%E5%BA%93/1711533632742.png" alt="1711533632742"></p><h3 id="设置工程"><a href="#设置工程" class="headerlink" title="设置工程"></a>设置工程</h3><p><img src="/../../images/STM32-HAL%E5%BA%93/1711533640808.png" alt="1711533640808"><br><img src="/../../images/STM32-HAL%E5%BA%93/1711533648469.png" alt="1711533648469"></p><h3 id="生成代码"><a href="#生成代码" class="headerlink" title="生成代码"></a>生成代码</h3><p>确保工程路径后点击,GENERATE CODE</p><p><img src="/../../images/STM32-HAL%E5%BA%93/1711533657277.png" alt="1711533657277"></p><h1 id="vscode-开发stm32"><a href="#vscode-开发stm32" class="headerlink" title="vscode-开发stm32"></a>vscode-开发stm32</h1><h2 id="扩展下载"><a href="#扩展下载" class="headerlink" title="扩展下载"></a>扩展下载</h2><ul><li>keil Assistant</li><li>打开设置</li><li>设置UV4.exe的路径</li><li><img src="/../../images/STM32-HAL%E5%BA%93/1711531665788.png" alt="1711531665788"></li></ul><h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><ul><li>点击KEIL UVISION PROJECT 右侧的加号</li><li>找到keil创建的项目并打开即可，编写代码，编译程序，下载程序等</li></ul><h2 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h2><ul><li>使用vscode写代码的同时可以打开MDK，进行项目文件结构调整，仿真测试等</li></ul><hr><h2 id="title-STM32芯片唯一IDdate-2024-01-25-11-34-34id-1706153674tags-技术-STM32-序列号categories-技术-STM32keywords-keyword1-keyword2description-description"><a href="#title-STM32芯片唯一IDdate-2024-01-25-11-34-34id-1706153674tags-技术-STM32-序列号categories-技术-STM32keywords-keyword1-keyword2description-description" class="headerlink" title="title: STM32芯片唯一IDdate: 2024-01-25 11:34:34id: 1706153674tags:  - 技术  - STM32  - 序列号categories:  - 技术  - STM32keywords: keyword1,keyword2description: description"></a>title: STM32芯片唯一ID<br>date: 2024-01-25 11:34:34<br>id: 1706153674<br>tags:<br>  - 技术<br>  - STM32<br>  - 序列号<br>categories:<br>  - 技术<br>  - STM32<br>keywords: keyword1,keyword2<br>description: description</h2><h1 id="STM32-芯片唯一ID"><a href="#STM32-芯片唯一ID" class="headerlink" title="STM32 芯片唯一ID"></a>STM32 芯片唯一ID</h1><p>实验目的<br>STM32的每一个芯片都有一个电子签名，唯一的身份识别ID。本章我们学习获取STM32的电子签名信息，数据手册请参看第28章。</p><p>实验简介<br>电子签名存放字闪存存储器模块的系统存储区域，可以通过JTAG&#x2F;SWD或者CPU读取。它所包含的芯片识别信息在出厂时编写，用户固件或者外部设备可以读取电子签名，用以自动匹配不同配置的SRM32F10xxx微控制器。</p><p>本实验，我们获取STM32的FLASH容量信息和唯一身份识别ID（96位）。</p><p>代码<br>main.c</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyIncludes.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">char</span> buff[<span class="number">100</span>];</span><br><span class="line"><span class="comment">//用来存储身份信息</span></span><br><span class="line">CHIP_ID_TypeDef stm32_id;</span><br><span class="line"><span class="comment">//id结构体变量声明</span></span><br><span class="line"><span class="type">uint32_t</span> flash_size = <span class="number">0</span>;</span><br><span class="line"><span class="comment">//flash大小变量</span></span><br><span class="line"></span><br><span class="line">u16 sys_cnt = <span class="number">0</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">systick_isr</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line"> <span class="keyword">if</span>(sys_cnt &lt;<span class="number">1000</span>)</span><br><span class="line"> sys_cnt++;</span><br><span class="line"> <span class="keyword">else</span></span><br><span class="line"> &#123;</span><br><span class="line">   sys_cnt = <span class="number">0</span>;</span><br><span class="line">   HAL_GPIO_TogglePin(GPIOC,GPIO_PIN_4|GPIO_PIN_5);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">  System_Init();</span><br><span class="line">  SysTick_Init(systick_isr);</span><br><span class="line">  LED_Init();</span><br><span class="line">  USART1_Init(<span class="number">115200</span>,<span class="literal">NULL</span>,<span class="literal">NULL</span>);</span><br><span class="line">  <span class="comment">//获取芯片ID</span></span><br><span class="line">  ChipID_Get(&amp;stm32_id);      </span><br><span class="line"><span class="comment">//获取芯片大小</span></span><br><span class="line">  flash_size = ChipFlashSize_Get();</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">sprintf</span>(buff,<span class="string">&quot;CHIP ID: %d%d%d\r\n&quot;</span>,stm32_id.ID_H,stm32_id.ID_M,stm32_id.ID_L);</span><br><span class="line">  <span class="comment">//将信息存储在buff数组中</span></span><br><span class="line">  <span class="built_in">printf</span>(buff);</span><br><span class="line">  <span class="comment">//打印buff数组数据</span></span><br><span class="line">  <span class="built_in">sprintf</span>(buff,<span class="string">&quot;CHIP FLASH: %dKB\r\n&quot;</span>,flash_size);</span><br><span class="line">  <span class="built_in">printf</span>(buff);</span><br><span class="line">   </span><br><span class="line">  <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">  &#123;</span><br><span class="line">  </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>chip_id.h</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> __CHIP_ID_H_</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> __CHIP_ID_H_</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stm32f1xx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stm32_types.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stm32f1xx_hal.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="type">uint32_t</span> ID_H;<span class="comment">//高32位字</span></span><br><span class="line">  <span class="type">uint32_t</span> ID_M;<span class="comment">//中32位字</span></span><br><span class="line">  <span class="type">uint32_t</span> ID_L;<span class="comment">//低32位字</span></span><br><span class="line">&#125;CHIP_ID_TypeDef;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CHIP_ID_ADDR ((CHIP_ID_TypeDef *)((uint32_t)0x1FFFF7E8)) </span></span><br><span class="line"><span class="comment">//芯片ID基地址</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CHIP_FLASH_SIZE_ADDR  *((uint32_t*)0x1FFFF7E0)</span></span><br><span class="line"><span class="comment">//芯片FLASH大小基地址</span></span><br><span class="line"><span class="comment">//将0x1ffff7e0中的数据作为一个32位无符号指针使用</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">ChipID_Get</span><span class="params">(CHIP_ID_TypeDef* chip_id)</span>;</span><br><span class="line"><span class="comment">//获取芯片ID</span></span><br><span class="line"><span class="type">uint32_t</span> <span class="title function_">ChipFlashSize_Get</span><span class="params">(<span class="type">void</span>)</span>;</span><br><span class="line"><span class="comment">//获取芯片FLASH大小 单位为KB</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure><p>chip_id.c</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;chip_id.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">ChipID_Get</span><span class="params">(CHIP_ID_TypeDef* chip_id)</span></span><br><span class="line"><span class="comment">//获取芯片ID</span></span><br><span class="line">&#123;</span><br><span class="line">  chip_id-&gt;ID_H = CHIP_ID_ADDR-&gt;ID_H;</span><br><span class="line">  <span class="comment">//高32位</span></span><br><span class="line">  chip_id-&gt;ID_M = CHIP_ID_ADDR-&gt;ID_M;</span><br><span class="line">  <span class="comment">//中32位</span></span><br><span class="line">  chip_id-&gt;ID_L = CHIP_ID_ADDR-&gt;ID_L;</span><br><span class="line">  <span class="comment">//低32位</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">uint32_t</span> <span class="title function_">ChipFlashSize_Get</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line"><span class="comment">//获取芯片FLASH大小</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">return</span> (CHIP_FLASH_SIZE_ADDR &amp; <span class="number">0xFFFF</span>);</span><br><span class="line">  <span class="comment">//低16位为FLASH大小</span></span><br><span class="line">  <span class="comment">//一共32位于0xffff进行与运算，就是16位</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 嵌入式 </category>
          
          <category> STM32 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> STM32 </tag>
            
            <tag> HAL </tag>
            
            <tag> vscode-stm32 </tag>
            
            <tag> 序列号_芯片ID </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HIK</title>
      <link href="/2023/11/16/%E5%B7%A5%E4%B8%9A%E7%9B%B8%E6%9C%BA/HIK/"/>
      <url>/2023/11/16/%E5%B7%A5%E4%B8%9A%E7%9B%B8%E6%9C%BA/HIK/</url>
      
        <content type="html"><![CDATA[<h1 id="HIK"><a href="#HIK" class="headerlink" title="HIK"></a>HIK</h1><h2 id="2K线扫-MV-CL024-91GM"><a href="#2K线扫-MV-CL024-91GM" class="headerlink" title="2K线扫(MV-CL024-91GM)"></a>2K线扫(MV-CL024-91GM)</h2><p><a href="https://www.hikrobotics.com/cn/machinevision/service/download?module=0">MVS下载地址</a></p><h3 id="接口定义"><a href="#接口定义" class="headerlink" title="接口定义"></a>接口定义</h3><p><img src="/../../images/HIK/1711533797153.png" alt="1711533797153"></p><h3 id="引脚定义"><a href="#引脚定义" class="headerlink" title="引脚定义"></a>引脚定义</h3><p><img src="/../../images/HIK/1711533805397.png" alt="1711533805397"></p><h3 id="倍频设置"><a href="#倍频设置" class="headerlink" title="倍频设置"></a>倍频设置</h3><ol><li>IO Input 类别下</li><li>Trigger Selector 设置 Line Start</li><li>Trigger Mode 设置 On</li><li>Trigger Source 设置 Frequency Conveter</li><li>Frequency Converter Contol 类别下</li><li>Input Source 选择 Line0（用哪个选哪个）</li><li>Multiplier 设置 倍频系数 （最大32倍频）</li></ol><p><img src="/../../images/HIK/1711533815173.png" alt="1711533815173"></p><h3 id="编码器模式-部分验证"><a href="#编码器模式-部分验证" class="headerlink" title="编码器模式  (部分验证)"></a>编码器模式  (部分验证)</h3><p><strong>简述</strong>：正反转功能支持42亿，按300周长，每圈1000脉冲计算，可倒转1288490.1882米（一百二十万米） ，  与Basler相同（开启两相输入相当于4倍频，一相输入则相当于2倍频）</p><ol><li>IO Input 类别下</li><li>Trigger Selector 设置 Line Start</li><li>Trigger Mode 设置 On</li><li>Trigger Source 设置 Encoder Module Out</li><li>Encoder Control 类别下</li><li>Encoder Selector 选择 Encoder0</li><li>Encoder Source A 选择 Line0（用哪个选哪个）</li><li>Encoder Source B 选择 Line1</li><li>Encoder Trigger Mode 选择Any Direction（任意方向）还有仅正向或仅反向可选择</li><li>Encoder Counter Mode 选择 Follow Direction&#x2F;Backward Direction（根据方向选择）</li><li>Encoder Counter Max 设置 4294967294</li><li>Encoder Max Reverse Counter 设置 4294967294</li></ol><p><img src="/../../images/HIK/1711533823796.png" alt="1711533823796"><br><img src="/../../images/HIK/1711533831865.png" alt="1711533831865"></p><h4 id="调试中遇到的问题"><a href="#调试中遇到的问题" class="headerlink" title="调试中遇到的问题"></a>调试中遇到的问题</h4><ul><li>若仅使用1路差分拍照，则Encoder Max Reverse Counter 必须设置未0，否则不出图</li></ul><h3 id="输出IO-（已验证-23年12月）"><a href="#输出IO-（已验证-23年12月）" class="headerlink" title="输出IO  （已验证,23年12月）"></a>输出IO  （已验证,23年12月）</h3><p><strong>简述</strong>： 相机相应功能触发时输出信号给外部设备</p><ol><li>Line Selector 选择 Line3（用哪个选哪个）</li><li>Line Mode 选择 Strobe    (频闪输出)</li><li>Line Source 选择 fram end Active （其它说明：曝光开始有效，会每一行曝光都输出信号）</li><li>Strobe Enable 点击开启</li><li>Strobe Line Duration(us) 设置 10000</li></ol><p><img src="/../../images/HIK/1711533841138.png" alt="1711533841138"></p><p>V4.3的驱动(MV-CL086-910C),补充设置如下.海康相机使用line3作为输出信号(差分信号输出),连接差分信号转接板Z+,Z-,通过OUTZ转发给控制器的Z信号输入.控制器开启信号接收打印消息.每张图一个信号,并通过串口返回B3,如图所示.(24年5月29日)</p><p><img src="/../../images/HIK/1716950907144.png" alt="1716950907144"></p><p>信号输出类型如下</p><p><img src="/../../images/HIK/1711533849526.png" alt="1711533849526"></p><h3 id="变帧-（动态图像高度）"><a href="#变帧-（动态图像高度）" class="headerlink" title="变帧 （动态图像高度）"></a>变帧 （动态图像高度）</h3><p><strong>简述</strong>: 相机输出图像的图像高度可变。最高为设定的图像高度。触发行数不足图像高度则根据Partial Image Output Mode 的设置输出图像，若触发行数超过图像高度，则立即输图像高度行数的图像，并继续触发行。</p><ol><li><p>接线</p><ul><li>行信号输入： Line0</li><li>帧信号输入： Line3</li></ul></li><li><p>设置</p><ul><li><p>触发选择器：行开始</p></li><li><p>触发模式：开启</p></li><li><p>触发源：线路0</p></li><li><p>触发极性：上升沿</p></li><li><p>触发选择器：帧开始</p></li><li><p>触发模式：开启</p></li><li><p>触发源：线路3</p></li><li><p>触发极性：低电平</p></li><li><p>Partial Image Output Mode:PartialImageOutput  &#x2F;&#x2F; 部分图像输出模式</p></li><li><p>行触发设置<img src="/../../images/HIK/1711533859287.png" alt="1711533859287"></p></li><li><p>帧触发设置<img src="/../../images/HIK/1711533868705.png" alt="1711533868705"></p></li></ul></li><li><p>Partial Image Output Mode 其它模式说明：</p></li></ol><p><img src="/../../images/HIK/1711533877525.png" alt="1711533877525"></p><h3 id="帧-行触发缓存"><a href="#帧-行触发缓存" class="headerlink" title="帧&#x2F;行触发缓存"></a>帧&#x2F;行触发缓存</h3><h4 id="帧触发缓存"><a href="#帧触发缓存" class="headerlink" title="帧触发缓存"></a>帧触发缓存</h4><p><strong>简述</strong>： 触发过程若接收到新的触发信号，可将该信号保留并进行处理。在处理当前信号时，触发缓存使能最多能保留 3 个触发信号等待处理。</p><ol><li>设置<ul><li>帧触发缓存使能通过 Acquisition Control 属性下的 Trigger Cache Enable 参数进行控制（说明：必须开启帧触发才可以适用该功能）</li><li><img src="/../../images/HIK/1711533887761.png" alt="1711533887761"></li><li>不开启该功能，则触发图像过程中接收到帧信号，则忽略帧信号</li><li>若开启该功能，则触发图像过程中接收到帧信号，则保留帧信号，直到当前图像完成后，立即继续开始第二个帧信号的图像触发，保留的帧信号数量最多可以达到3个。</li><li><img src="/../../images/HIK/1711533896113.png" alt="1711533896113"></li></ul></li></ol><h4 id="行触发缓存"><a href="#行触发缓存" class="headerlink" title="行触发缓存"></a>行触发缓存</h4><p><strong>简述</strong>： 实际测试中，开启行触发缓存与关闭行触发缓存似乎并无区别。</p><ol><li>设置<ul><li><img src="/../../images/HIK/1711533905446.png" alt="1711533905446"></li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> 工业相机 </category>
          
          <category> HIK </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 相机 </tag>
            
            <tag> 海康 </tag>
            
            <tag> HIK </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo</title>
      <link href="/2023/11/15/%E7%BB%BC%E5%90%88/hexo/"/>
      <url>/2023/11/15/%E7%BB%BC%E5%90%88/hexo/</url>
      
        <content type="html"><![CDATA[<h1 id="本地部署博客"><a href="#本地部署博客" class="headerlink" title="本地部署博客"></a>本地部署博客</h1><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>以下方法实现了，同一台主机，部署多个服务，不同域名访问不同服务，同一域名访问不同服务。局域网访问图床图片。的良好体验。</p><h2 id="hexo"><a href="#hexo" class="headerlink" title="hexo"></a>hexo</h2><ol><li>安装node.js <a href="https://nodejs.org/en/download/">下载安装包</a></li><li>安装Git</li><li>安装hexo <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br></pre></td></tr></table></figure></li><li>初始化<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo init blog</span><br><span class="line">cd blog</span><br><span class="line">npm install</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li>安装hexo-deployer-git<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure></li><li>在_config.yml中配置<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: https://github.com/fengjie1223/fengjie1223.github.io</span><br><span class="line">  branch: main</span><br><span class="line">  token:    //从github设置中获取</span><br></pre></td></tr></table></figure></li><li>生产网页并上传<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo d  //三个指令分别为清除，构建，上传</span><br></pre></td></tr></table></figure></li></ol><h2 id="github"><a href="#github" class="headerlink" title="github"></a>github</h2><ol><li>建立名为 &lt;你的 GitHub 用户名&gt;.github.io 的储存库，设置为public</li><li>仓库设置General-&gt;Default branch为main</li><li>仓库设置Pages Build and deployment -&gt; Source-&gt;Github Actions</li><li>Token ：</li></ol><h2 id="minio"><a href="#minio" class="headerlink" title="minio"></a>minio</h2><ol><li>安装minio    <a href="https://min.io/">下载安装包</a></li><li>部署minio    将下载好的exe文件放到准备作为图床文件夹下</li><li>启动minio     用cmd启动，或配置bat文件启动，下述代码为bat文件源码，cmd仅执行最后三行即可<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> @echo off</span><br><span class="line">if &quot;%1&quot; == &quot;h&quot; goto begin</span><br><span class="line">mshta vbscript:createobject(&quot;wscript.shell&quot;).run(&quot;&quot;&quot;%~nx0&quot;&quot; h&quot;,0)(window.close)&amp;&amp;exit</span><br><span class="line">:begin</span><br><span class="line">REM</span><br><span class="line">c:</span><br><span class="line">cd C:\MyServer\markdown_images</span><br><span class="line">setx MINIO_ROOT_USER admin                                  //设置用户名</span><br><span class="line">setx MINIO_ROOT_PASSWORD password                           //设置密码</span><br><span class="line">.\minio.exe server C:\MyServer\markdown_images --address :9000  //启动minio，并将端口号设置为9000（默认为9000）</span><br></pre></td></tr></table></figure></li><li>配置minio    打开127.0.0.1:9000，点击Create Bucket，创建名为mdimage的bucket</li><li>配置权限     点击mdimage仓库，设置Access Policy：为 public</li></ol><h3 id="minio迁移"><a href="#minio迁移" class="headerlink" title="minio迁移"></a>minio迁移</h3><ul><li>推测（未验证）-windows 下迁移，应该是将整个桶文件夹全部复制即可。引用路径似乎是文件夹path+图片名（保存在桶文件里会变成一个以png为后缀的文件夹）</li><li>推测（未验证）下述这三个一起复制即可</li></ul><p><img src="/../../images/hexo/1711530791605.png" alt="1711530791605"></p><h2 id="vscode"><a href="#vscode" class="headerlink" title="vscode"></a>vscode</h2><ol><li>安装扩展 vscode-minio-picman （设置地址路径不要带端口号，否则自动返回的地址不带端口号）</li><li>配置vscode-minio-picman  <ol><li>配置地址 <a href="http://cnbed.com:9000/">http://cnbed.com:9000</a> （这里用了域名映射，原地址为127.0.0.1）</li><li>Access Key   uG7bf1JZBf1eCqpjEZ0S</li><li>Secret Key   HAgtVMhGuFgQkGVbIgVSuo9rOKrGODH29H7PkXCy</li><li>Bucket Name  mdimage （这里填写minio创建的仓库的名字）</li><li>Directory    images&#x2F;vscode-minio-picman<br><img src="/../../images/hexo/1711531089050.png" alt="1711531089050"></li></ol></li></ol><h2 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h2><p>下载地址:<a href="https://nginx.org/en/download.html">nginx</a><br>下载稳定版 stable</p><p>最好获取到域名的SSL证书,否则只能通过http访问不能通过https访问,安全性较差,且速度极慢</p><ol><li>配置多主机模式，将minio的IP地址及端口映射到cnbed.com</li><li>vscode 配置 minio 地址时填写cnbed.com:9000</li><li>返回的图片链接为cnbed.com&#x2F;***即可直接访问（无端口号）</li><li>路由器配置域名映射cnbed.com到服务器地址，内网即可访问图片</li><li>配置域名解析：C:\Windows\System32\drivers\etc下的hosts文件内最后一行填写&lt;IP地址 域名&gt;，端口号则由nginx解析</li><li>配置同一域名多个服务配置：server块中写多个location块即可，例：   <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">location / &#123;</span><br><span class="line">    # root   html;</span><br><span class="line">    # index  index.<span class="property">html</span> index.<span class="property">htm</span>;</span><br><span class="line">    proxy_pass <span class="attr">http</span>:<span class="comment">//127.0.0.1:4000;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location /blog&#123;</span><br><span class="line">    proxy_pass <span class="attr">http</span>:<span class="comment">//127.0.0.1:4000/;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location /download&#123;</span><br><span class="line">    proxy_pass <span class="attr">http</span>:<span class="comment">//127.0.0.1:8000/;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>有些服务器不支持同域名多端口，则需要设置独立的域名，即写多个server块，路由器中也将独立的域名映射到服务器地址，例如：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">   server&#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name cnbed.com;</span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_pass http://127.0.0.1:9000;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    server&#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name cnafgit.com;</span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_pass http://127.0.0.1:3000;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>最后将nginx 使用nssm工具，或使用bat脚本文件，添加到服务中</li></ol><h2 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h2><ol><li>互联网图床 github smms qiniu等</li><li>图床工具 picgo</li><li>配合quick 脚本可以一键上传并返回链接</li><li>配合obsidian可以一键插入图片</li></ol><p>经验：<br>nginx</p><ul><li>反向代理hexo，若使用alias 指向public index.heml可以使用子域名访问，但会导致不能加载主题，解决办法为hexo使用独立的域名，alias指向改为root即可<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">//主页</span><br><span class="line">        location / &#123;</span><br><span class="line">            root   html;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line"></span><br><span class="line">            # root C:/Users/fengj/OneDrive/Programs/hexo_my_note/public;</span><br><span class="line">            # index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">//文件服务器</span><br><span class="line">                location /HID&#123;</span><br><span class="line"></span><br><span class="line">            autoindex on;             #开启索引功能</span><br><span class="line">            autoindex_exact_size off; # 关闭计算文件确切大小（单位bytes），只显示大概大小（单位kb、mb、gb）</span><br><span class="line">            autoindex_localtime on;   # 显示本机时间而非 GMT 时间</span><br><span class="line">#           charset utf-8; # 避免中文乱码</span><br><span class="line">            alias C:/MyServer/download/HID;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //图床</span><br><span class="line">            server&#123;</span><br><span class="line">        listen 80;</span><br><span class="line">        server_name cnbed.com;</span><br><span class="line">        location / &#123;</span><br><span class="line">            proxy_pass http://127.0.0.1:9000;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    //论坛</span><br><span class="line">    server&#123;</span><br><span class="line">        listen 80;</span><br><span class="line">        server_name cnafbb.com;</span><br><span class="line">        location /&#123;</span><br><span class="line">            proxy_pass http://127.0.0.1:4567;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //同步盘</span><br><span class="line">            server&#123;</span><br><span class="line">        listen 80;</span><br><span class="line">        server_name cnafsyncthing.com;</span><br><span class="line">        location /&#123;</span><br><span class="line">            proxy_pass http://127.0.0.1:8384;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">//博客</span><br><span class="line">    server&#123;</span><br><span class="line">        listen 80;</span><br><span class="line">        server_name cnafblog.com;</span><br><span class="line">        location /&#123;</span><br><span class="line">            root C:/Users/fengj/OneDrive/Programs/hexo_my_note/public;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><p>syncthing</p><ul><li>下载syncthing</li><li>nssm安装服务</li><li>打开网页127.0.0.1:8384</li><li>若同一网络已经有syncthing则会发现设备ID</li><li>打开syncthing-gtk，点击“添加设备”</li><li>输入设备ID，点击“添加”</li><li>同步即可</li><li>评价：简单好用的文件同步软件（同步盘）</li></ul><p>hexo </p><ul><li>不要开启服务器运行（会导致一些问题，例如部分文件不能删除等），使用hexo d -g 生成静态文件，然后使用nginx反向代理即可</li></ul><p>nodebb</p><ul><li>参考<a href="https://docs.nodebb.org/installing/os/windows/">文档</a> </li><li>下载nodebb <a href="https://github.com/NodeBB/NodeBB">地址</a></li><li>检查环境 node -v  npm -v  ,若没有，则下载nodejs并安装</li><li>安装Mongodb 注意事项，只安装服务，不要安装gui（安装太慢），再根据参考文档设置，需要注意：use admin之后的指令，需要设置密码，拷贝指令的时候自己修改 <strong>pwd:</strong> 的密码</li><li>创建nodebb，密码也使用nodebb</li><li>在nodebb文件夹下执行 <code>nodebb setup</code></li><li>等待安装，时间会比较长（似乎不需要外网）</li><li>完成后会提示一些内容，按回车确认，注意：提示输入monogdb用户以及密码的时候 ， 输入之前自己设定的用户名nodebb，密码nodebb，另外提示输入管理用户名的时候，输入admin（或自定义），密码admin（或自定义），记住即可。</li><li>启动nodebb <code>nodebb start</code></li><li>访问127.0.0.1:4567</li><li>使用管理用户登录</li><li>管理设置-&gt;全局常规-&gt;修改标头-&gt;修改语言为中文</li><li>界面主题不要改，若改了之后，出现主题样式丢失，改回默认重新构建重启即可</li><li>nodebb所有信息存储在mongodb中，自己设定的nodebb表中，可以重置mongodb，然后删除nodebb文件夹，重新创建。重置mongodb指令如下：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">use your_database_name</span><br><span class="line">db.dropDatabase() </span><br></pre></td></tr></table></figure></li></ul><h3 id="主题"><a href="#主题" class="headerlink" title="主题"></a>主题</h3><p>theme: 3-hexo</p><h2 id="图片处理"><a href="#图片处理" class="headerlink" title="图片处理"></a>图片处理</h2><h3 id="Paste-Image"><a href="#Paste-Image" class="headerlink" title="Paste Image"></a>Paste Image</h3><ul><li>打开hexo文件必须是从根目录打开</li><li>快捷键Ctrl+Alt+v</li><li>settings.json内写下述代码</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="comment">// Paste Image 核心配置</span></span><br><span class="line">  <span class="attr">&quot;pasteImage.path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;projectRoot&#125;/source/images/$&#123;currentFileNameWithoutExt&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;pasteImage.basePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;projectRoot&#125;/source&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;pasteImage.insertPattern&quot;</span><span class="punctuation">:</span> <span class="string">&quot;![$&#123;imageFileName&#125;](../../images/$&#123;currentFileNameWithoutExt&#125;/$&#123;imageFileName&#125;)&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;pasteImage.filePathConfirmInputBoxMode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;always&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// 可选：设置图片命名规则（避免重复）</span></span><br><span class="line">  <span class="attr">&quot;pasteImage.fileName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;YYYYMMDDHHmmss&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// 可选：支持中文路径（避免乱码）</span></span><br><span class="line">  <span class="attr">&quot;files.encoding&quot;</span><span class="punctuation">:</span> <span class="string">&quot;utf8&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;files.autoGuessEncoding&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 综合 </category>
          
          <category> 博客 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客 </tag>
            
            <tag> hexo </tag>
            
            <tag> minio </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Qt</title>
      <link href="/2023/02/14/%E8%BD%AF%E4%BB%B6%E7%BC%96%E7%A8%8B/Qt/"/>
      <url>/2023/02/14/%E8%BD%AF%E4%BB%B6%E7%BC%96%E7%A8%8B/Qt/</url>
      
        <content type="html"><![CDATA[<h1 id="visual-studio-中编写Qt项目"><a href="#visual-studio-中编写Qt项目" class="headerlink" title="visual studio 中编写Qt项目"></a>visual studio 中编写Qt项目</h1><h2 id="一-visual-studio-2022-安装组件的时候可以选择安装编译器版本（需与Qt版本一致，此处使用的vs2019编译器）"><a href="#一-visual-studio-2022-安装组件的时候可以选择安装编译器版本（需与Qt版本一致，此处使用的vs2019编译器）" class="headerlink" title="一. visual studio 2022 安装组件的时候可以选择安装编译器版本（需与Qt版本一致，此处使用的vs2019编译器）"></a>一. visual studio 2022 安装组件的时候可以选择安装编译器版本（需与Qt版本一致，此处使用的vs2019编译器）</h2><p><img src="/../../images/Qt/1711533937422.png" alt="1711533937422"></p><h2 id="二-安装Qt扩展-注-此处使用外网安装较快-若没有梯子-则点击右侧的详细信息-进入网页下载后安装"><a href="#二-安装Qt扩展-注-此处使用外网安装较快-若没有梯子-则点击右侧的详细信息-进入网页下载后安装" class="headerlink" title="二. 安装Qt扩展(注:此处使用外网安装较快,若没有梯子,则点击右侧的详细信息,进入网页下载后安装)"></a>二. 安装Qt扩展(注:此处使用外网安装较快,若没有梯子,则点击右侧的详细信息,进入网页下载后安装)</h2><p><img src="/../../images/Qt/1711533946634.png" alt="1711533946634"></p><h2 id="三-选择Qt版本"><a href="#三-选择Qt版本" class="headerlink" title="三.选择Qt版本"></a>三.选择Qt版本</h2><p><img src="/../../images/Qt/1711533955150.png" alt="1711533955150"></p><p><img src="/../../images/Qt/1711533964408.png" alt="1711533964408"></p><h2 id="四-打开Qt项目-将Qt项目转为vs项目"><a href="#四-打开Qt项目-将Qt项目转为vs项目" class="headerlink" title="四. 打开Qt项目(将Qt项目转为vs项目)"></a>四. 打开Qt项目(将Qt项目转为vs项目)</h2><p><img src="/../../images/Qt/1711533972146.png" alt="1711533972146"></p><h2 id="五-设置默认打开ui文件的打开方式"><a href="#五-设置默认打开ui文件的打开方式" class="headerlink" title="五. 设置默认打开ui文件的打开方式"></a>五. 设置默认打开ui文件的打开方式</h2><p><img src="/../../images/Qt/1711533981456.png" alt="1711533981456"></p><p><img src="/../../images/Qt/1711533989867.png" alt="1711533989867"></p><h2 id="六-执行项目-执行成功"><a href="#六-执行项目-执行成功" class="headerlink" title="六. 执行项目(执行成功)"></a>六. 执行项目(执行成功)</h2><p><img src="/../../images/Qt/1711534001598.png" alt="1711534001598"></p><p><img src="/../../images/Qt/1711534010120.png" alt="1711534010120"></p><h2 id="七-指定exe输出目录-配置属性-常规-输出目录-链接器-常规-输出文件-即可修改生成项目的exe的输出路径"><a href="#七-指定exe输出目录-配置属性-常规-输出目录-链接器-常规-输出文件-即可修改生成项目的exe的输出路径" class="headerlink" title="七. 指定exe输出目录,配置属性-&gt;常规-&gt;输出目录.链接器-&gt;常规-&gt;输出文件.即可修改生成项目的exe的输出路径."></a>七. 指定exe输出目录,配置属性-&gt;常规-&gt;输出目录.链接器-&gt;常规-&gt;输出文件.即可修改生成项目的exe的输出路径.</h2><p><img src="/../../images/Qt/1711534019094.png" alt="1711534019094"></p><p><img src="/../../images/Qt/1711534026687.png" alt="1711534026687"></p><h2 id="八-打开ui文件-几秒后异常退出"><a href="#八-打开ui文件-几秒后异常退出" class="headerlink" title="八. 打开ui文件,几秒后异常退出"></a>八. 打开ui文件,几秒后异常退出</h2><p><img src="/../../images/Qt/1711589652032.png" alt="1711589652032"></p><ul><li>解决方法1: 选择“扩展-&gt;QT VS Tools-&gt;Options”，对话框中左侧选择“Qt-&gt;General”，右侧选择“Qt Designer-&gt;Run in detached window”选项值设为true 即可解决。</li><li>解决方法2: 右键ui文件,选择打开方式,选择默认使用qtdesigner打开即可</li><li><a href="https://blog.csdn.net/weixin_32155265/article/details/114905744">参考资料</a></li></ul><h2 id="九-控制台输出-qdebug信息无输出"><a href="#九-控制台输出-qdebug信息无输出" class="headerlink" title="九. 控制台输出,qdebug信息无输出"></a>九. 控制台输出,qdebug信息无输出</h2><p>方法一：</p><ol><li><p>右键点击项目名，选择属性</p></li><li><p>更改为如下设置</p></li></ol><p><img src="/../../images/Qt/1711592413759.png" alt="1711592413759"></p><ol start="3"><li>在运行时就会额外弹出一个命令行窗口</li></ol><p>若不想再弹出这个窗口，将子系统调回 窗口(&#x2F;SUBSYSTEM:WINSOWS 即可</p><p>方法二：（推荐）</p><ol><li><p>在拓展中找到 Qt 选项</p></li><li><p>按如图所示进行修改</p></li></ol><p><img src="/../../images/Qt/1711592421875.png" alt="1711592421875"></p><ol start="3"><li><p>将 Show debug information 改为 True</p></li><li><p>调试信息将在“输出”栏显示，不会弹出额外的窗口</p></li></ol><p><strong>注意：要在调试器下运行才能看到信息,直接按F5或者点本地windows调试器。</strong></p><p>其他信息：</p><p>将 Qt Designer 中的 Run in detached window 修改为 True，就可以解决部分打不开 .ui 文件的问题</p><p><a href="https://blog.csdn.net/weixin_60101211/article/details/123953957">原文链接：</a></p><h2 id="十-快捷键"><a href="#十-快捷键" class="headerlink" title="十. 快捷键"></a>十. 快捷键</h2><h3 id="格式化代码"><a href="#格式化代码" class="headerlink" title="格式化代码"></a>格式化代码</h3><ol><li>选中需要格式化的代码，然后按Alt+F8</li><li>选中需要格式化的代码，先按Ctrl+K 变成下面的状态，然后再按Ctrl+F</li></ol><h3 id="注释-取消注释"><a href="#注释-取消注释" class="headerlink" title="注释&#x2F;取消注释"></a>注释&#x2F;取消注释</h3><ol><li>注释代码: 选中需要注释的代码，然后按Ctrl+K+C</li><li>取消注释: 选中需要取消注释的代码，然后按Ctrl+K+U</li></ol><h2 id="十一-括号自动补全"><a href="#十一-括号自动补全" class="headerlink" title="十一. 括号自动补全"></a>十一. 括号自动补全</h2><p>工具-&gt;选项-&gt;文本编辑器-&gt;所有语言-&gt;自动补全大括号</p><p><img src="/../../images/Qt/1711594770233.png" alt="1711594770233"></p><h1 id="Qt-vscode-环境搭建"><a href="#Qt-vscode-环境搭建" class="headerlink" title="Qt_vscode_环境搭建"></a>Qt_vscode_环境搭建</h1><h2 id="1-安装Qt"><a href="#1-安装Qt" class="headerlink" title="1. 安装Qt"></a>1. 安装Qt</h2><h2 id="2-安装VSCode"><a href="#2-安装VSCode" class="headerlink" title="2. 安装VSCode"></a>2. 安装VSCode</h2><h2 id="3-安装Qt插件"><a href="#3-安装Qt插件" class="headerlink" title="3. 安装Qt插件"></a>3. 安装Qt插件</h2><h2 id="4-安装CMake插件"><a href="#4-安装CMake插件" class="headerlink" title="4. 安装CMake插件"></a>4. 安装CMake插件</h2><h2 id="5-安装QtCreator插件"><a href="#5-安装QtCreator插件" class="headerlink" title="5. 安装QtCreator插件"></a>5. 安装QtCreator插件</h2><h2 id="6-Qt环境变量配置"><a href="#6-Qt环境变量配置" class="headerlink" title="6. Qt环境变量配置"></a>6. Qt环境变量配置</h2><p><img src="/../../images/Qt/1706798303545.png" alt="1706798303545"></p><ul><li>qt cmake 路径</li></ul><h2 id="7-检查环境变量"><a href="#7-检查环境变量" class="headerlink" title="7. 检查环境变量"></a>7. 检查环境变量</h2><ul><li>打开cmd</li><li>cmake –version</li><li>gcc -v</li></ul><h2 id="8-将Qt项目移植到vscode"><a href="#8-将Qt项目移植到vscode" class="headerlink" title="8. 将Qt项目移植到vscode"></a>8. 将Qt项目移植到vscode</h2><ul><li><input checked disabled type="checkbox"> 复制vs-qt项目的.vs文件夹,scripts文件夹</li><li><input checked disabled type="checkbox"> .vs文件夹下launch.json文件中,修改”program”: “${workspaceRoot}&#x2F;build&#x2F;release&#x2F;<em><strong>.exe”,其中的</strong></em>.exe填写生成的进程名</li><li><input checked disabled type="checkbox"> scripts文件夹下两个bat文件,分别是debug和release,修改文件中含***.pro,***.exe相应的地方</li></ul><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> QT_DIR=d:\Qt\<span class="number">6</span>.<span class="number">7</span>.<span class="number">3</span>\msvc2019_64</span><br><span class="line"><span class="built_in">set</span> SRC_DIR=<span class="variable">%cd%</span></span><br><span class="line"><span class="built_in">set</span> BUILD_DIR=<span class="variable">%cd%</span>\build</span><br><span class="line">::只修改下述两个宏即可</span><br><span class="line">:: ProName是pro文件的名字</span><br><span class="line"><span class="built_in">set</span> ProName=RewindingDetection_V3</span><br><span class="line">:: SoftWareName是生成exe文件的名字   </span><br><span class="line"><span class="built_in">set</span> SoftWareName=RewindingDetection_V3</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exist</span> <span class="variable">%QT_DIR%</span> <span class="keyword">exit</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exist</span> <span class="variable">%SRC_DIR%</span> <span class="keyword">exit</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exist</span> <span class="variable">%BUILD_DIR%</span> <span class="built_in">md</span> <span class="variable">%BUILD_DIR%</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> build</span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> &quot;C:\Program Files (x86)\Microsoft Visual Studio\<span class="number">2019</span>\Community\VC\Auxiliary\Build\vcvarsall.bat&quot; x64</span><br><span class="line"></span><br><span class="line"><span class="variable">%QT_DIR%</span>\bin\qmake.exe <span class="variable">%SRC_DIR%</span>\<span class="variable">%ProName%</span>.pro -spec win32-msvc  &quot;CONFIG+=release&quot;</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">exist</span> <span class="variable">%BUILD_DIR%</span>\release\<span class="variable">%SoftWareName%</span>.exe <span class="built_in">del</span> <span class="variable">%BUILD_DIR%</span>\release\<span class="variable">%SoftWareName%</span>.exe</span><br><span class="line">nmake Release</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exist</span> <span class="variable">%BUILD_DIR%</span>\release\Qt5Core.dll (</span><br><span class="line">  <span class="variable">%QT_DIR%</span>\bin\windeployqt.exe <span class="variable">%BUILD_DIR%</span>\release\<span class="variable">%SoftWareName%</span>.exe</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h1 id="QUdpSocket"><a href="#QUdpSocket" class="headerlink" title="QUdpSocket"></a>QUdpSocket</h1><p>详见Qt高级，Qt_UDP.pdf</p><h1 id="libuv"><a href="#libuv" class="headerlink" title="libuv"></a>libuv</h1><p>两种模式，事件循环调用（回调）</p><p>1.The I&#x2F;O loop</p><p>2.File I&#x2F;O</p><h1 id="系统知识"><a href="#系统知识" class="headerlink" title="系统知识"></a>系统知识</h1><p>系统缓存约64KB字节，（超过这么多字节的数据，则会丢包。直到程序读取走一包数据。）</p><h1 id="测试过程试和验结果"><a href="#测试过程试和验结果" class="headerlink" title="测试过程试和验结果"></a>测试过程试和验结果</h1><p>总结：是否丢包主要取决于系统性能（以及是否繁忙等），低性能设备给高性能设备发数据丢包率小于高性能设备给低性能设备发数据。</p><p>libuv，与QUdpSocket性能相差不大，均为一定概率丢包。系统缓存64KB，不能单独设置缓存。</p><h1 id="测试工具-NetAssist"><a href="#测试工具-NetAssist" class="headerlink" title="测试工具 NetAssist"></a>测试工具 NetAssist</h1><ol><li>必须连接上网络，并且网络设置中已经显示正在识别或未识别的网络（否则可能会无法发现，不能被枚举出来）</li><li>与是否开启高性能模式无关，与是否插电源无关，是否开启无线网络无关，是否安装开启网卡属性中basler等其它gige无关，与是否开启虚拟网络无关</li></ol><p><img src="/../../images/Qt/1711531738424.png" alt="1711531738424"></p><h2 id="UDP"><a href="#UDP" class="headerlink" title="UDP"></a>UDP</h2><h3 id="QUdpSocket-1"><a href="#QUdpSocket-1" class="headerlink" title="QUdpSocket"></a>QUdpSocket</h3><h4 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h4><ol><li>pro文件添加模块，QT       +&#x3D;  network</li><li>添加头文件#include <code>&lt;QUdpSocket&gt;</code> <code>&lt;QHostAddress&gt;</code></li><li>创建对象并实例化  private:    QUdpSocket *udpSocket;    udpSocket&#x3D;new QUdpSocket(this);</li><li>绑定IP地址和端口：udpSocket-&gt;bind(QHostAddress::AnyIPv4,port);&#x2F;&#x2F;port是端口号，任意指定，建议大于1024小于65535</li><li>连接接收数据槽函数   connect(udpSocket,&amp;QUdpSocket::readyRead,this,&amp;MainWindow::read_image);&#x2F;&#x2F;接收数据，处理函数为read_image</li><li>发送数据 udpSocket-&gt;writeDatagram(ui-&gt;textEdit-&gt;toPlainText().toUtf8(),QHostAddress(ui-&gt;linee_IP-&gt;text()),i-&gt;linee_port-&gt;text().toInt());</li></ol><h4 id="其它UDP库"><a href="#其它UDP库" class="headerlink" title="其它UDP库"></a>其它UDP库</h4><p>1.c++系统库 <code>&lt;sys/socket.h&gt;性能较高，非异步，可能会阻塞主线程，需要额外处理</code></p><p>2.libuv <code>&lt;uv.h&gt;异步，性能高，使用单独的事件循环</code></p><p>&lt;**处理接收数据**&gt;</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">QHostAddress address;</span><br><span class="line">    quint16 port;</span><br><span class="line"></span><br><span class="line">    QByteArray array;</span><br><span class="line">    array.<span class="built_in">resize</span>(udpSocket-&gt;<span class="built_in">bytesAvailable</span>());<span class="comment">//根据可读数据来设置空间大小</span></span><br><span class="line">    <span class="comment">//读取数据，获取客户端的IP地址和端口号</span></span><br><span class="line">    <span class="type">int</span> tmp = udpSocket-&gt;<span class="built_in">readDatagram</span>(array.<span class="built_in">data</span>(),array.<span class="built_in">size</span>(),&amp;address,&amp;port);</span><br><span class="line">    <span class="keyword">if</span> (tmp&gt;<span class="number">0</span>&amp;&amp;tmp&lt;=<span class="number">1000</span>) &#123;</span><br><span class="line">           ui-&gt;textEdit-&gt;<span class="built_in">append</span>(<span class="string">&quot;接收来自：&quot;</span>+address.<span class="built_in">toString</span>()+<span class="string">&quot;:&quot;</span>+QString::<span class="built_in">number</span>(port)+array);</span><br><span class="line">       &#125;</span><br><span class="line">    <span class="keyword">if</span> (array.<span class="built_in">size</span>() &gt;<span class="number">1000</span>) &#123; <span class="comment">// 假设2表示其他类型的消息</span></span><br><span class="line">           <span class="comment">// 处理其他类型的消息</span></span><br><span class="line"></span><br><span class="line">           <span class="function">QBuffer <span class="title">buffer</span><span class="params">(&amp;array)</span></span>;<span class="comment">//添加数据到缓冲器</span></span><br><span class="line">           buffer.<span class="built_in">open</span>(QIODevice::ReadOnly);<span class="comment">//读取</span></span><br><span class="line"></span><br><span class="line">           <span class="function">QImageReader <span class="title">reader</span><span class="params">(&amp;buffer,<span class="string">&quot;JPG&quot;</span>)</span></span>;<span class="comment">//读取img</span></span><br><span class="line">           QImage img = reader.<span class="built_in">read</span>();</span><br><span class="line"></span><br><span class="line">           <span class="keyword">if</span>(!img.<span class="built_in">isNull</span>())&#123;</span><br><span class="line"></span><br><span class="line">               QMessageBox::<span class="built_in">information</span>(<span class="literal">NULL</span>,<span class="string">&quot;ima&quot;</span>,<span class="string">&quot;ima&quot;</span>);</span><br><span class="line">               ui-&gt;lb_image_show-&gt;<span class="built_in">setPixmap</span>(QPixmap::<span class="built_in">fromImage</span>(img));</span><br><span class="line">               ui-&gt;lb_image_show-&gt;<span class="built_in">show</span>();</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="built_in">qDebug</span>()&lt;&lt;address&lt;&lt;<span class="string">&quot;---&quot;</span>&lt;&lt;port;</span><br><span class="line"></span><br><span class="line">           ui-&gt;textEdit-&gt;<span class="built_in">append</span>(<span class="string">&quot;接收来自：&quot;</span>+address.<span class="built_in">toString</span>()+<span class="string">&quot;:&quot;</span>+<span class="string">&quot;\r\n&quot;</span>+QString::<span class="built_in">number</span>(port)+array.<span class="built_in">toHex</span>());</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>&lt;**发送图像数据**&gt;</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">QString filename = QFileDialog::<span class="built_in">getOpenFileName</span>(<span class="keyword">this</span>, <span class="built_in">tr</span>(<span class="string">&quot;选择图片&quot;</span>), <span class="string">&quot;&quot;</span>, <span class="built_in">tr</span>(<span class="string">&quot;图片文件 (*.png *.jpg *.jpeg)&quot;</span>));</span><br><span class="line">   <span class="keyword">if</span> (!filename.<span class="built_in">isEmpty</span>()) &#123;</span><br><span class="line">   <span class="comment">// 打开图片并进行相应操作</span></span><br><span class="line"></span><br><span class="line">   QImage image;</span><br><span class="line">   <span class="keyword">if</span> (image.<span class="built_in">load</span>(filename)) &#123;</span><br><span class="line">       QLabel* label = ui-&gt;lb_image_show;</span><br><span class="line">       label-&gt;<span class="built_in">setPixmap</span>(QPixmap::<span class="built_in">fromImage</span>(image));</span><br><span class="line">       label-&gt;<span class="built_in">show</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       QByteArray byteArray;</span><br><span class="line">       QBuffer buffer;</span><br><span class="line">       buffer.<span class="built_in">open</span>(QIODevice::WriteOnly);</span><br><span class="line">       image.<span class="built_in">save</span>(&amp;buffer, <span class="string">&quot;JPG&quot;</span>);  <span class="comment">// 将图片数据保存到byteArray中</span></span><br><span class="line">       byteArray.<span class="built_in">append</span>(buffer.<span class="built_in">data</span>());</span><br><span class="line"></span><br><span class="line">       <span class="keyword">if</span>(udpSocket-&gt;<span class="built_in">writeDatagram</span>(byteArray.<span class="built_in">data</span>(),</span><br><span class="line">            byteArray.<span class="built_in">size</span>(), <span class="built_in">QHostAddress</span>(ui-&gt;linee_IP-&gt;<span class="built_in">text</span>()),</span><br><span class="line">                                    ui-&gt;linee_port-&gt;<span class="built_in">text</span>().<span class="built_in">toInt</span>())==<span class="number">-1</span>)&#123;</span><br><span class="line">           <span class="built_in">qDebug</span>()&lt;&lt;udpSocket-&gt;<span class="built_in">error</span>();</span><br><span class="line">           QMessageBox::<span class="built_in">warning</span>(<span class="literal">NULL</span>,<span class="string">&quot;erro&quot;</span>,udpSocket-&gt;<span class="built_in">errorString</span>());</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       <span class="comment">// 图片加载失败</span></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h3 id="libuv-1"><a href="#libuv-1" class="headerlink" title="libuv"></a>libuv</h3><h4 id="编译安装"><a href="#编译安装" class="headerlink" title="编译安装"></a>编译安装</h4><ol><li>下载源码 <a href="https://github.com/libuv/libuv.git">https://github.com/libuv/libuv.git</a></li><li>下载cmake</li><li>cmake编译源码，使用msvc编译器，记住构建路径，点configure后串口显示的内容中有（生成的lib文件，dll，都在这里）（第四第五步骤可以忽略）</li><li>打开编译好的内容，找到.sln文件打开工程</li><li>选择编译器，release，全部生成</li><li>添加lib文件，dll文件，源码中include文件夹，src文件夹到qt工程中。</li><li>还需要再pro文件中添加以下内容</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">DEFINES += _WIN32_WINNT=<span class="number">0x0602</span></span><br><span class="line">LIBS += -lws2_32</span><br><span class="line">LIBS += -lUserEnv</span><br><span class="line">LIBS += -lIPHLPAPI</span><br><span class="line">LIBS += -lPsapi</span><br><span class="line">LIBS += -ladvapi32</span><br><span class="line">LIBS += -lUser32</span><br><span class="line">LIBS += -lGdi32</span><br></pre></td></tr></table></figure><h2 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h2><h3 id="QThread-线程类"><a href="#QThread-线程类" class="headerlink" title="QThread 线程类"></a>QThread 线程类</h3><h4 id="常用操作函数"><a href="#常用操作函数" class="headerlink" title="常用操作函数"></a>常用操作函数</h4><p>QThread::QThread(QObject * parent&#x3D;0);   &#x2F;&#x2F;构造函数</p><p>void QThread::start();  &#x2F;&#x2F;启动线程</p><p>bool QThread::wait(unsigned long time &#x3D; ULONG_MAX); &#x2F;&#x2F;阻塞调用该函数线程</p><p>void QThread::terminate(); &#x2F;&#x2F;结束线程</p><p>启动线程后，QThread::run()会被调用；</p><h4 id="QThread操作步骤"><a href="#QThread操作步骤" class="headerlink" title="QThread操作步骤"></a>QThread操作步骤</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QThread&gt;</span></span></span><br></pre></td></tr></table></figure><ol><li>新建文件c++类，基类为QThread，继承QObject</li><li>头文件重写虚函数，virtual void run();</li><li>cpp实现，run();</li><li>回主线程，包含子线程头文件</li><li>创建子线程类，MyThread mt；  mt.start();</li></ol><h3 id="QSemaphore-同步"><a href="#QSemaphore-同步" class="headerlink" title="QSemaphore 同步"></a>QSemaphore 同步</h3><p><a href="https://www.bilibili.com/video/BV1ka411y7oP?p=2&amp;spm_id_from=pageDriver&amp;vd_source=468a1f7565d351f1fb1599d05949abd0">https://www.bilibili.com/video/BV1ka411y7oP?p=2&amp;spm_id_from=pageDriver&amp;vd_source=468a1f7565d351f1fb1599d05949abd0</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QSemaphore&gt;</span></span></span><br></pre></td></tr></table></figure><ol><li>新建文件，SemManager，</li><li>包含QSemaphore，私有化单例：SemManager</li><li>公有成员 QSemaphore semA，semB,构造函数分别赋值1，和0</li><li>创建一个单例模式</li><li>子线程中调用sm-&gt;semB.acquire();阻塞B</li><li>子线程中调用sm-&gt;semA.release();释放A</li><li>另一个子线程顺序相反，先sm-&gt;semA.acquire();阻塞B</li><li>然后sm-&gt;semB.release();释放B</li><li>以此实现同步</li></ol><h3 id="QMutex-互斥"><a href="#QMutex-互斥" class="headerlink" title="QMutex  互斥"></a>QMutex  互斥</h3><p>保护一段代码同一个时刻只有一个线程可以执行</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QMutex&gt;</span></span></span><br></pre></td></tr></table></figure><p>常用成员函数：</p><p>QMutex::QMutex(RecurisonMode mode&#x3D; NonRescursive)&#x2F;&#x2F;构造函数<br>void QMutex::lock();&#x2F;&#x2F;上锁<br>void QMutex::unlock();&#x2F;&#x2F;解锁</p><h3 id="moveToThread-委托槽函数给线程执行"><a href="#moveToThread-委托槽函数给线程执行" class="headerlink" title="moveToThread    委托槽函数给线程执行"></a>moveToThread    委托槽函数给线程执行</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QThread&gt;</span></span></span><br><span class="line">SlotObject *slotObj =<span class="keyword">new</span> <span class="built_in">SlotObject</span>(); <span class="comment">//槽函数，功能实现子类,**moveToThread时不能指定父对象**因为没有指定父对象，所以需要自己析构（在关闭窗口中，写delete slotObj;）</span></span><br><span class="line">QThread *thread = <span class="keyword">new</span> <span class="built_in">QThread</span>(<span class="keyword">this</span>);     <span class="comment">//创建一个线程类</span></span><br><span class="line">slotObj-&gt;<span class="built_in">moveToThread</span>(thread);<span class="comment">//委托线程</span></span><br><span class="line"><span class="built_in">connect</span>(ui-&gt;btn_start,QPushbutton::clicked,slotObj,SlotObject::fun);</span><br><span class="line">thread-&gt;<span class="built_in">start</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="插件QPlagin-带界面动态库"><a href="#插件QPlagin-带界面动态库" class="headerlink" title="插件QPlagin(带界面动态库)"></a>插件QPlagin(带界面动态库)</h2><p><a href="https://www.bilibili.com/video/BV1Sh4y1X7wQ/?spm_id_from=333.999.0.0&vd_source=468a1f7565d351f1fb1599d05949abd0">参考视频</a></p><ul><li>创建主框架程序</li><li>创建插件工程</li><li>插件工程添加界面类</li><li>插件创建头文件</li><li>定义接口</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> PLUGININTERFACE_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PLUGININTERFACE_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Qwidget&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PluginInterfaceIID <span class="string">&quot;com.szweebon.PluginInterface/1.0.0&quot;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PluginInterface</span> &#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line"><span class="keyword">virtual</span> ~<span class="built_in">PluginInterface</span>() = <span class="keyword">default</span>;</span><br><span class="line"><span class="function"><span class="keyword">virtual</span> QWidget *<span class="title">genWidget</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">Q_DECLARE_INTERFACE</span>(PluginInterface，PluginInterfaceIID)</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// PLUGININTERFACE_H</span></span></span><br></pre></td></tr></table></figure><p>未完待续</p><h2 id="树形结构浏览器"><a href="#树形结构浏览器" class="headerlink" title="树形结构浏览器"></a>树形结构浏览器</h2><h2 id="显示图片"><a href="#显示图片" class="headerlink" title="显示图片"></a>显示图片</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//QLabel显示OpenCV图像</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_pushButton_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Mat srcImg = <span class="built_in">imread</span>(<span class="string">&quot;1.jpg&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span>(srcImg.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        QMessageBox::<span class="built_in">information</span>(<span class="keyword">this</span>,<span class="string">&quot;警告&quot;</span>,<span class="string">&quot;图片读取失败，请检查图片路径！&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Mat imgShow;</span><br><span class="line">    <span class="built_in">cvtColor</span>(srcImg, imgShow, COLOR_BGR2RGB); <span class="comment">// 图像格式转换</span></span><br><span class="line">    QImage qImg = <span class="built_in">QImage</span>((<span class="type">unsigned</span> <span class="type">char</span>*)(imgShow.data), imgShow.cols,</span><br><span class="line">                             imgShow.rows, imgShow.cols*imgShow.<span class="built_in">channels</span>(), QImage::Format_RGB888);</span><br><span class="line">    ui-&gt;label-&gt;<span class="built_in">setPixmap</span>(QPixmap::<span class="built_in">fromImage</span>(qImg.<span class="built_in">scaled</span>(ui-&gt;label-&gt;<span class="built_in">size</span>(), Qt::KeepAspectRatio)));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//Graphics View显示OpenCV图像</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_pushButton_2_clicked</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Mat srcImg = <span class="built_in">imread</span>(<span class="string">&quot;2.jpg&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span>(srcImg.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        QMessageBox::<span class="built_in">information</span>(<span class="keyword">this</span>,<span class="string">&quot;警告&quot;</span>,<span class="string">&quot;图片读取失败，请检查图片路径！&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Mat imgShow;</span><br><span class="line">    <span class="built_in">cvtColor</span>(srcImg, imgShow, COLOR_BGR2RGB); <span class="comment">// 图像格式转换</span></span><br><span class="line">    QImage qImg = <span class="built_in">QImage</span>((<span class="type">unsigned</span> <span class="type">char</span>*)(imgShow.data), imgShow.cols,</span><br><span class="line">                             imgShow.rows, imgShow.cols*imgShow.<span class="built_in">channels</span>(), QImage::Format_RGB888);</span><br><span class="line"></span><br><span class="line">    QGraphicsScene *scene = <span class="keyword">new</span> QGraphicsScene;<span class="comment">//图像显示</span></span><br><span class="line">    ui-&gt;graphicsView-&gt;<span class="built_in">setScene</span>(scene);</span><br><span class="line">    ui-&gt;graphicsView-&gt;<span class="built_in">show</span>();</span><br><span class="line">    scene-&gt;<span class="built_in">addPixmap</span>(QPixmap::<span class="built_in">fromImage</span>(qImg));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="QML"><a href="#QML" class="headerlink" title="QML"></a>QML</h1><p>QML 是 Qt 的一个图形用户界面语言，它允许你使用 XML 语法来描述界面。<br>QML 是基于 JavaScript 的，因此你可以使用 JavaScript 来编写你的 QML 代码。<br>QML 是一个基于组件的界面语言，这意味着你可以将界面分成多个组件，然后组合在一起。</p><p>优点:界面自由度高,声明式描述语言,较容易实现漂亮的界面,前后端分离,界面代码与逻辑代码解耦<br>缺点:需要学习QML语法,需要学习Quick,相对执行效率低,学习成本高,前后端交互复杂(即QML与C++交互复杂)</p><h2 id="如何在widget中使用QML"><a href="#如何在widget中使用QML" class="headerlink" title="如何在widget中使用QML"></a>如何在widget中使用QML</h2><ol><li>创建一个QML文件，例如main.qml。</li><li>在widget中,使用QQuickWidget对象加载qml文件</li><li>QML文件存放在qrc中,以资源文件的形式存放.(不至于发布程序暴露代码)</li></ol><h3 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">qmlRegisterSingletonInstance</span>(<span class="string">&quot;MyObj&quot;</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="string">&quot;MyObject&quot;</span>,MyObject::<span class="built_in">getInstance</span>());<span class="comment">//注册MyObject单例对象,QML中模块为MyObj,版本号1.0,对象名为MyObject</span></span><br><span class="line"></span><br><span class="line">ui-&gt;list_quick_station_number-&gt;<span class="built_in">setSource</span>(<span class="built_in">QUrl</span>(<span class="string">&quot;qrc:/qml_test.qml&quot;</span>));<span class="comment">//加载qml文件</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="Qt-vscode-外部编辑器修改后qtcreator忽略修改提示"><a href="#Qt-vscode-外部编辑器修改后qtcreator忽略修改提示" class="headerlink" title="Qt_vscode_外部编辑器修改后qtcreator忽略修改提示"></a>Qt_vscode_外部编辑器修改后qtcreator忽略修改提示</h1><p>设置步骤</p><p>Qtcreatro 12.0.1</p><ol><li>工具-&gt;外部-&gt;配置-&gt;环境-&gt;系统-&gt;当外部文件被修改时-&gt;重新载入所有未变更的编辑器</li><li><img src="/../../images/Qt/1711531430189.png" alt="1711531430189"></li></ol><p>Qtcreator 4.9.1</p><ol><li>工具-&gt;选项-&gt;环境-&gt;system-&gt;when fles are externally modified-&gt;reload All Unchanged Editors</li></ol><h1 id="vscode-msvc-qt开发环境搭建"><a href="#vscode-msvc-qt开发环境搭建" class="headerlink" title="vscode_msvc_qt开发环境搭建"></a>vscode_msvc_qt开发环境搭建</h1><h2 id="vscode"><a href="#vscode" class="headerlink" title="vscode"></a>vscode</h2><p><strong>前言</strong></p><p>vscode编写Qt程序,有智能提示,代码错误会报错,有debug信息,控制台运行bat文件可以生成exe文件,控制台运行designer *.ui,可以编辑ui文件.最终达到比较舒服的开发环境.</p><p>下面分为两种方式实现</p><ol><li>纯插件实现</li><li>纯脚本实现</li></ol><p>第一种方案相对简单<br>推荐使用第二种方案,对整个开发编译过程有更好理解.</p><h2 id="方案一"><a href="#方案一" class="headerlink" title="方案一"></a>方案一</h2><h3 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h3><ul><li>C&#x2F;C++</li><li>CMake</li><li>CMake Tools</li><li>Qt Configuration</li><li>Qt tools</li></ul><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><ul><li><p>CMake配置,Cmake Path 填写CMake的安装目录”cmake.exe”</p></li><li><p><img src="/../../images/Qt/1711533418466.png" alt="1711533418466"></p></li><li><p>Qt Configuration, ctrl+shift+p 输入qtconfig 选择set qt dir</p></li><li><p><img src="/../../images/Qt/1711533430661.png" alt="1711533430661"></p></li><li><ul><li>选择Qt的安装目录(若安装了多个版本,则需要选择到想要使用的Qt版本的目录)</li></ul></li><li><p><img src="/../../images/Qt/1711533440347.png" alt="1711533440347"></p></li><li><p>设置&#x2F;修改MSVC的编译器的目录</p></li><li><p><img src="/../../images/Qt/1711533449859.png" alt="1711533449859"></p></li><li><p>设置C&#x2F;C++智能提示,ctrl+shift+p,输入C&#x2F;C++配置(UI)</p></li><li><p><img src="/../../images/Qt/1711533459604.png" alt="1711533459604"></p></li><li><p>选择编译器路径(一般会自动扫描到,下拉选择即可,若没有自动扫描到,则需要手动输入,Everything搜索cl.exe路径)</p></li><li><p><img src="/../../images/Qt/1711533469708.png" alt="1711533469708"></p></li><li><p>选择IntelliSense 模式为 windows msvc x64</p></li><li><p>包含路径,填写Qt的include目录(会自动填写),一般为Qt的安装目录\include</p></li><li><p><img src="/../../images/Qt/1711533478717.png" alt="1711533478717"></p></li></ul><h2 id="方案二"><a href="#方案二" class="headerlink" title="方案二"></a>方案二</h2><h3 id="头文件相关"><a href="#头文件相关" class="headerlink" title="头文件相关"></a>头文件相关</h3><ul><li>Ctrl+shift+p,输入c,选择c++配置(UI)</li><li>选择编译器路径,选择msvc编译器路径,cl.exe(一般会自动搜寻到,选择自己使用的位数x86&#x2F;x64即可)</li><li>选择IntelliSense 模式为 windows msvc x64</li><li>包含路径,${workspaceRoot}&#x2F;**</li><li>包含路径,qt安装目录里相应编译器的include目录,D:&#x2F;Qt&#x2F;Qt6.6.2&#x2F;6.4.3&#x2F;msvc2019_64&#x2F;include&#x2F;**</li><li>若在UI里总是修改失败,则需要手动修改,在.vscode目录下找到c_cpp_properties.json文件修改”includePath”的内容即可</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;configurations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Win32&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;includePath&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;$&#123;workspaceFolder&#125;/**&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;D:/Qt/Qt6.6.2/6.4.3/msvc2019_64/include/**&quot;</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;defines&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;_DEBUG&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;UNICODE&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;_UNICODE&quot;</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;windowsSdkVersion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;10.0.22000.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;compilerPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;C:/Program Files (x86)/Microsoft Visual Studio/2019/Community/VC/Tools/MSVC/14.29.30133/bin/Hostx64/x64/cl.exe&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;cStandard&quot;</span><span class="punctuation">:</span> <span class="string">&quot;c17&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;cppStandard&quot;</span><span class="punctuation">:</span> <span class="string">&quot;c++17&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;intelliSenseMode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;windows-msvc-x64&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="number">4</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="原理分析-vscode编译qt的核心原理"><a href="#原理分析-vscode编译qt的核心原理" class="headerlink" title="原理分析(vscode编译qt的核心原理)"></a>原理分析(vscode编译qt的核心原理)</h3><h4 id="基本原理"><a href="#基本原理" class="headerlink" title="基本原理"></a>基本原理</h4><ul><li>vscode编译qt的原理是使用cmake&#x2F;qmake进行编译,cmake会自动生成编译文件(makefile &#x2F;makefile debug&#x2F; makefile release),然后使用msvc进行编译(nmake makefile debug&#x2F; nmake makefile release),msvc会自动生成exe文件,然后使用exe文件进行运行</li><li>简单理解就三步骤</li><li>1.设置msvc编译器环境  call “C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Auxiliary\Build\vcvarsall.bat” x64</li><li><ol start="2"><li>qmake生成makefile文件  qmake -spec win32-msvc “CONFIG+&#x3D;Release” “CONFIG+&#x3D;console”</li></ol></li><li><ol start="3"><li>makefile文件生成exe文件    nmake Release</li></ol></li><li><ol start="4"><li>exe文件运行    %BUILD_DIR%\Release\X_Line.exe</li></ol></li></ul><p>说明:</p><ul><li>控制台使用qmake指令,qml指令,需要先设置qt的编译器的目录为环境变量</li><li>控制台使用nmake指令,需要先设置msvc编译器的目录为环境变量,即call “C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Auxiliary\Build\vcvarsall.bat” x64</li><li>控制台使用designer指令打开ui文件,需要先设置qt安装目录下tools文件夹下qt5&#x2F;qt6的desiner相关文件夹找到designer.exe设置此文件夹为环境变量<br><img src="/../../images/Qt/1712501472515.png" alt="1712501472515"></li></ul><h4 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h4><ul><li>项目同级目录创建一个bat文件,也可以先创建一个build文件夹,然后把bat文件放在build文件夹中,bat文件内容如下:</li></ul><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> QT_DIR=d:\Qt\<span class="number">6</span>.<span class="number">4</span>.<span class="number">1</span>\msvc2019_64</span><br><span class="line"><span class="built_in">set</span> SRC_DIR=<span class="variable">%cd%</span></span><br><span class="line"><span class="built_in">set</span> BUILD_DIR=<span class="variable">%cd%</span>\build</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exist</span> <span class="variable">%QT_DIR%</span> <span class="keyword">exit</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exist</span> <span class="variable">%SRC_DIR%</span> <span class="keyword">exit</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exist</span> <span class="variable">%BUILD_DIR%</span> <span class="built_in">md</span> <span class="variable">%BUILD_DIR%</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> build</span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> &quot;C:\Program Files (x86)\Microsoft Visual Studio\<span class="number">2019</span>\Community\VC\Auxiliary\Build\vcvarsall.bat&quot; x64</span><br><span class="line"></span><br><span class="line"><span class="variable">%QT_DIR%</span>\bin\qmake.exe <span class="variable">%SRC_DIR%</span>\X_Line.pro -spec win32-msvc  &quot;CONFIG+=Release&quot; &quot;CONFIG+=console&quot;</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">exist</span> <span class="variable">%BUILD_DIR%</span>\Release\X_Line.exe <span class="built_in">del</span> <span class="variable">%BUILD_DIR%</span>\Release\X_Line.exe</span><br><span class="line">nmake Release</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exist</span> <span class="variable">%BUILD_DIR%</span>\Release\Qt5Cored.dll (</span><br><span class="line">  <span class="variable">%QT_DIR%</span>\bin\windeployqt.exe <span class="variable">%BUILD_DIR%</span>\Release\X_Line.exe</span><br><span class="line">)</span><br></pre></td></tr></table></figure><ul><li>运行bat文件,编译完成,会在build文件夹中生成Release文件夹,里面有X_Line.exe文件,运行X_Line.exe即可</li></ul><h4 id="bat文件逐行分析"><a href="#bat文件逐行分析" class="headerlink" title="bat文件逐行分析"></a>bat文件逐行分析</h4><ul><li>@echo off: 禁止显示命令行输出</li><li>set QT_DIR&#x3D;d:\Qt\6.4.1\msvc2019_64: 设置Qt的安装目录</li><li>set SRC_DIR&#x3D;%cd%: 设置项目目录</li><li>set BUILD_DIR&#x3D;%cd%\build: 设置编译目录</li><li>if not exist %QT_DIR% exit: 判断Qt的安装目录是否存在,不存在则退出</li><li>if not exist %SRC_DIR% exit: 判断项目目录是否存在,不存在则退出</li><li>if not exist %BUILD_DIR% md %BUILD_DIR%: 判断编译目录是否存在,不存在则创建</li><li>cd build: 进入编译目录</li><li>call “C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Auxiliary\Build\vcvarsall.bat” x64: 设置编译器为msvc2019_64</li><li>%QT_DIR%\bin\qmake.exe %SRC_DIR%\X_Line.pro -spec win32-msvc “CONFIG+&#x3D;Release” “CONFIG+&#x3D;console”: 使用qmake生成makefile文件,指定编译器为msvc2019_64,指定编译模式为Release,指定编译类型为console</li><li>if exist %BUILD_DIR%\Release\X_Line.exe del %BUILD_DIR%\Release\X_Line.exe: 判断Release目录中是否存在X_Line.exe文件,存在则删除</li><li>nmake Release: 使用nmake编译makefile文件,指定编译模式为Release</li><li>if not exist %BUILD_DIR%\Release\Qt5Cored.dll (</li><li>%QT_DIR%\bin\windeployqt.exe %BUILD_DIR%\Release\X_Line.exe: 使用windeployqt将Qt的dll文件复制到Release目录中</li><li>)</li><li>运行bat文件,编译完成,会在build文件夹中生成Release文件夹,里面有X_Line.exe文件,运行X_Line.exe即可</li></ul><h4 id="优化bat文件"><a href="#优化bat文件" class="headerlink" title="优化bat文件"></a>优化bat文件</h4><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">set</span> QT_DIR=D:\Qt\Qt6.<span class="number">6</span>.<span class="number">2</span>\<span class="number">6</span>.<span class="number">4</span>.<span class="number">3</span>\msvc2019_64</span><br><span class="line"><span class="built_in">set</span> SRC_DIR=<span class="variable">%cd%</span></span><br><span class="line"><span class="built_in">set</span> BUILD_DIR=<span class="variable">%cd%</span>\build</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exist</span> <span class="variable">%QT_DIR%</span> <span class="keyword">exit</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exist</span> <span class="variable">%SRC_DIR%</span> <span class="keyword">exit</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exist</span> <span class="variable">%BUILD_DIR%</span> <span class="built_in">md</span> <span class="variable">%BUILD_DIR%</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> build</span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> &quot;C:\Program Files (x86)\Microsoft Visual Studio\<span class="number">2019</span>\Community\VC\Auxiliary\Build\vcvarsall.bat&quot; x64</span><br><span class="line"></span><br><span class="line"><span class="variable">%QT_DIR%</span>\bin\qmake.exe <span class="variable">%SRC_DIR%</span>\control9_level_kick.pro -spec win32-msvc  &quot;CONFIG+=release&quot;</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">exist</span> <span class="variable">%BUILD_DIR%</span>\release\control9_level_kick.exe <span class="built_in">del</span> <span class="variable">%BUILD_DIR%</span>\release\control9_level_kick.exe</span><br><span class="line">nmake Release</span><br><span class="line"><span class="comment">@REM if not exist %BUILD_DIR%\release\Qt5Core.dll (</span></span><br><span class="line"><span class="comment">@REM   %QT_DIR%\bin\windeployqt.exe %BUILD_DIR%\release\control9_level_kick.exe</span></span><br><span class="line"><span class="comment">@REM )</span></span><br><span class="line"></span><br><span class="line">release\control9_level_kick.exe</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><strong>逐行解析</strong></li><li>@echo off: 禁止显示命令行输出</li><li>set QT_DIR&#x3D;D:\Qt\Qt6.6.2\6.4.3\msvc2019_64: 设置Qt的安装目录</li><li>set SRC_DIR&#x3D;%cd%: 设置项目目录</li><li>set BUILD_DIR&#x3D;%cd%\build: 设置编译目录</li><li>if not exist %QT_DIR% exit: 判断Qt的安装目录是否存在,不存在则退出</li><li>if not exist %SRC_DIR% exit: 判断项目目录是否存在,不存在则退出</li><li>if not exist %BUILD_DIR% md %BUILD_DIR%: 判断编译目录是否存在,不存在则创建</li><li>cd build: 进入编译目录</li><li>call “C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Auxiliary\Build\vcvarsall.bat” x64: 设置编译器为msvc2019_64</li><li>%QT_DIR%\bin\qmake.exe %SRC_DIR%\control9_level_kick.pro -spec win32-msvc “CONFIG+&#x3D;release”: 使用qmake生成makefile文件,指定编译器为msvc2019_64,指定编译模式为Release</li><li>if exist %BUILD_DIR%\release\control9_level_kick.exe del %BUILD_DIR%\release\control9_level_kick.exe: 判断Release目录中是否存在control9_level_kick.exe文件,存在则删除</li><li>nmake Release: 使用nmake编译makefile文件,指定编译模式为Release</li><li>@REM if not exist %BUILD_DIR%\release\Qt5Core.dll (</li><li>@REM   %QT_DIR%\bin\windeployqt.exe %BUILD_DIR%\release\control9_level_kick.exe: 使用windeployqt将Qt的dll文件复制到Release目录中</li><li>@REM )</li><li>release\control9_level_kick.exe: 运行Release目录中的control9_level_kick.exe文件</li><li>cd ..: 返回项目目录</li><li>@REM 是bat文件的行注释符号</li></ul><h2 id="控制台打印输出"><a href="#控制台打印输出" class="headerlink" title="控制台打印输出"></a>控制台打印输出</h2><ul><li>pro文件添加,config+&#x3D;console</li></ul><p><img src="/../../images/Qt/1729069891130.png" alt="1729069891130"></p><h1 id="Qt-QDir文件夹"><a href="#Qt-QDir文件夹" class="headerlink" title="Qt_QDir文件夹"></a>Qt_QDir文件夹</h1><h2 id="创建文件夹"><a href="#创建文件夹" class="headerlink" title="创建文件夹"></a>创建文件夹</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QString logFolderPath = <span class="string">&quot;log&quot;</span>;</span><br><span class="line"><span class="built_in">QDir</span>().<span class="built_in">mkdir</span>(logFolderPath);</span><br></pre></td></tr></table></figure><hr><h2 id="title-PyQt5tags"><a href="#title-PyQt5tags" class="headerlink" title="title: PyQt5tags:"></a>title: PyQt5<br>tags:</h2><h1 id="PyQt5"><a href="#PyQt5" class="headerlink" title="PyQt5"></a>PyQt5</h1><h2 id="1-简介"><a href="#1-简介" class="headerlink" title="1. 简介"></a>1. 简介</h2><p>PyQt5 是 Python 语言的 Qt 绑定库，它提供了 Python 语言中使用 Qt 的完整功能。</p><h2 id="2-安装"><a href="#2-安装" class="headerlink" title="2. 安装"></a>2. 安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install PyQt5 -i https://pypi.douban.com/simple</span><br><span class="line">pip install PyQt5-tools -i https://pypi.douban.com/simple</span><br></pre></td></tr></table></figure><h2 id="3-制作安装包"><a href="#3-制作安装包" class="headerlink" title="3. 制作安装包"></a>3. 制作安装包</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">pip install -i https://pypi.tuna.tsinghua.edu.cn/simple pyinstaller</span><br><span class="line">pyinstaller -w -F test.py Ui_mainwindow.py</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="4-pycharm-配置外部工具"><a href="#4-pycharm-配置外部工具" class="headerlink" title="4. pycharm 配置外部工具"></a>4. pycharm 配置外部工具</h2><p>designer路径<br>pyuic路径</p><ul><li>ui文件上右键，选择外部工具，选择转化即可</li></ul><h2 id="5-vscode-安装插件PYQT-Integration"><a href="#5-vscode-安装插件PYQT-Integration" class="headerlink" title="5. vscode 安装插件PYQT Integration"></a>5. vscode 安装插件PYQT Integration</h2><p>配置designer路径</p><ul><li>ui文件上右键，选择Compile Form 即编译UI文件为py文件</li></ul><h1 id="Qt-qDebug-重定向到日志"><a href="#Qt-qDebug-重定向到日志" class="headerlink" title="Qt_qDebug_重定向到日志"></a>Qt_qDebug_重定向到日志</h1><h2 id="实现思路及API含义"><a href="#实现思路及API含义" class="headerlink" title="实现思路及API含义"></a>实现思路及API含义</h2><ul><li>自定义一个函数作为消息处理器(customMessageHandler)，用于输出调试信息到文件中</li><li>使用qInstallMessageHandler函数注册自定义的消息处理器</li><li>qInstallMessageHandle注册回调函数后,会截断qt的默认输出，所有qDebug()、qInfo()、qWarning()、qCritical()等函数的输出都会通过自定义的消息处理器(customMessageHandler)处理,需要注意的一点是，自定义的消息处理器(customMessageHandler)的输出不会显示到控制台，需要显示到控制台，需要在自定义的消息处理器里使用qDebug()输出。</li></ul><h2 id="取消信息处理-一般不取消"><a href="#取消信息处理-一般不取消" class="headerlink" title="取消信息处理 (一般不取消)"></a>取消信息处理 (一般不取消)</h2><p>只要执行qInstallMessageHandler(0) 就行，但是这会把所有的信息输出都屏蔽掉！</p><p>如果只是想屏蔽debug或者warning信息的输出，这时候就需要预定义宏：<br>在工程文件.pro里面添加</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DEFINES += QT_NO_WARNING_OUTPUT\</span><br><span class="line">QT_NO_DEBUG_OUTPUT</span><br></pre></td></tr></table></figure><p>然后重新构建，这样就能去掉qDebug的打印信息了。<br>也可以设置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Release:DEFINES += QT_NO_WARNING_OUTPUT\</span><br><span class="line">QT_NO_DEBUG_OUTPUT</span><br></pre></td></tr></table></figure><p>这样只是在Release版本的时候不打印对应调试和警告消息。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDebug&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QFile&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QTextStream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDateTime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QMutex&gt;</span></span></span><br><span class="line"><span class="type">static</span> QMutex mutex;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">customMessageHandler</span><span class="params">(QtMsgType type,</span></span></span><br><span class="line"><span class="params"><span class="function">                          <span class="type">const</span> QMessageLogContext &amp;context,</span></span></span><br><span class="line"><span class="params"><span class="function">                          <span class="type">const</span> QString &amp;msg)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//QMutexLocker locker(&amp;mutex);  //自动释放锁</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//Q_UNUSED(context)</span></span><br><span class="line">    QDateTime _datetime = QDateTime::<span class="built_in">currentDateTime</span>();</span><br><span class="line">    QString szDate = _datetime.<span class="built_in">toString</span>(<span class="string">&quot;hh:mm:ss.zzz&quot;</span>);<span class="comment">//&quot;yyyy-MM-dd hh:mm:ss ddd&quot;</span></span><br><span class="line">    <span class="function">QString <span class="title">txt</span><span class="params">(szDate)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> (type)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">case</span> QtDebugMsg:<span class="comment">//调试信息提示</span></span><br><span class="line">    &#123;</span><br><span class="line">        txt += <span class="built_in">QString</span>(<span class="string">&quot; [Debug] &quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">case</span> QtInfoMsg:<span class="comment">//信息输出</span></span><br><span class="line">    &#123;</span><br><span class="line">        txt += <span class="built_in">QString</span>(<span class="string">&quot; [Info] &quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">case</span> QtWarningMsg:<span class="comment">//一般的warning提示</span></span><br><span class="line">    &#123;</span><br><span class="line">        txt += <span class="built_in">QString</span>(<span class="string">&quot; [Warning] &quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">case</span> QtCriticalMsg:<span class="comment">//严重错误提示</span></span><br><span class="line">    &#123;</span><br><span class="line">        txt += <span class="built_in">QString</span>(<span class="string">&quot; [Critical] &quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">case</span> QtFatalMsg:<span class="comment">//致命错误提示</span></span><br><span class="line">    &#123;</span><br><span class="line">        txt += <span class="built_in">QString</span>(<span class="string">&quot; [Fatal] &quot;</span>);</span><br><span class="line">        <span class="comment">//abort();</span></span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">    &#123;</span><br><span class="line">        txt += <span class="built_in">QString</span>(<span class="string">&quot; [Trace] &quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    txt.<span class="built_in">append</span>( <span class="built_in">QString</span>(<span class="string">&quot; %1&quot;</span>).<span class="built_in">arg</span>(context.file) );</span><br><span class="line">    txt.<span class="built_in">append</span>( <span class="built_in">QString</span>(<span class="string">&quot;&lt;%1&gt;: &quot;</span>).<span class="built_in">arg</span>(context.line) );</span><br><span class="line">    txt.<span class="built_in">append</span>(msg);</span><br><span class="line">    <span class="built_in">qDebug</span>()&lt;&lt;txt;</span><br><span class="line"></span><br><span class="line">    mutex.<span class="built_in">lock</span>();</span><br><span class="line">    <span class="comment">//一天一个日志</span></span><br><span class="line">    <span class="function">QString <span class="title">fileName</span><span class="params">( <span class="string">&quot;./日志//&quot;</span> + _datetime.toString(<span class="string">&quot;yyyy-MM-dd&quot;</span>) + <span class="string">&quot;.log&quot;</span>)</span></span>;</span><br><span class="line">    <span class="function">QFile <span class="title">file</span><span class="params">(fileName)</span></span>;</span><br><span class="line">    file.<span class="built_in">open</span>(QIODevice::WriteOnly | QIODevice::Append);</span><br><span class="line">    <span class="function">QTextStream <span class="title">text_stream</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">    text_stream &lt;&lt; txt &lt;&lt; <span class="string">&quot;\r\n&quot;</span>;</span><br><span class="line">    file.<span class="built_in">flush</span>();</span><br><span class="line">    file.<span class="built_in">close</span>();</span><br><span class="line">    mutex.<span class="built_in">unlock</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//注册MessageHandler</span></span><br><span class="line">    <span class="built_in">qInstallMessageHandler</span>(customMessageHandler);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;this is QtDebugMsg&quot;</span>;</span><br><span class="line">    <span class="built_in">qInfo</span>() &lt;&lt; <span class="string">&quot;this is QtInfoMsg&quot;</span>;</span><br><span class="line">    <span class="built_in">qWarning</span>() &lt;&lt; <span class="string">&quot;this is QtWarningMsg&quot;</span>;</span><br><span class="line">    <span class="built_in">qCritical</span>() &lt;&lt; <span class="string">&quot;this is QtCriticalMsg&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//GBK修饰的输出带双引号,GBK_LOG修饰的不会带双引号</span></span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; (<span class="string">&quot;测试qDebug&quot;</span>);</span><br><span class="line">    <span class="built_in">qInfo</span>() &lt;&lt; (<span class="string">&quot;测试qInfo&quot;</span>);</span><br><span class="line">    <span class="built_in">qWarning</span>() &lt;&lt; (<span class="string">&quot;测试qWarning&quot;</span>);</span><br><span class="line">    <span class="built_in">qCritical</span>() &lt;&lt; (<span class="string">&quot;测试qCritical&quot;</span>);</span><br><span class="line">    <span class="comment">//qFatal() &lt;&lt; &quot;QtFatalMsg&quot;;</span></span><br><span class="line">    <span class="comment">//qFatal(&quot;This is a fatal message&quot;);</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="Qt"><a href="#Qt" class="headerlink" title="Qt"></a>Qt</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">QByteArray data;</span><br><span class="line">    data.<span class="built_in">clear</span>();</span><br><span class="line">    data.<span class="built_in">append</span>(<span class="number">0xac</span>);</span><br><span class="line">    data.<span class="built_in">append</span>(<span class="number">0x02</span>);</span><br><span class="line">    data.<span class="built_in">append</span>(<span class="number">0x55</span>);</span><br><span class="line">    serial-&gt;<span class="built_in">write</span>(data);</span><br></pre></td></tr></table></figure><h2 id="ini文件中文"><a href="#ini文件中文" class="headerlink" title="ini文件中文"></a>ini文件中文</h2><p>Qt的ini配置文件默认不支持直接读写中文，需要手动设置下编码格式才行，强烈建议统一用utf-8<br>编码，包括代码文件。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置了编码以后配置文件内容为 Company=上海物联网技术研究中心</span></span><br><span class="line"><span class="comment">//没有设置编码则配置文件内容为</span></span><br><span class="line">Company=\xe4\xb8\x8a\xe6\xb5\xb7\xe7\x89\xa9\xe8\x81\x94\xe7\xbd\x91\xe6\x8a</span><br><span class="line">\x80\xe6\x9c\xaf\xe7\xa0\x94\xe7\xa9\xb6\xe4\xb8\xad\xe5\xbf\x83</span><br><span class="line"><span class="type">void</span> App::<span class="built_in">readConfig</span>()</span><br><span class="line">&#123;</span><br><span class="line">QSettings <span class="built_in">set</span>(App::ConfigFile, QSettings::IniFormat);</span><br><span class="line">set.<span class="built_in">setIniCodec</span>(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">set.<span class="built_in">beginGroup</span>(<span class="string">&quot;AppConfig1&quot;</span>);</span><br><span class="line">App::Company = set.<span class="built_in">value</span>(<span class="string">&quot;Company&quot;</span>, App::Company).<span class="built_in">toString</span>();</span><br><span class="line">set.<span class="built_in">endGroup</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">App::writeConfig</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="function">QSettings <span class="title">set</span><span class="params">(App::ConfigFile, QSettings::IniFormat)</span></span>;</span><br><span class="line">set.<span class="built_in">setIniCodec</span>(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">set.<span class="built_in">beginGroup</span>(<span class="string">&quot;AppConfig1&quot;</span>);</span><br><span class="line">set.<span class="built_in">setValue</span>(<span class="string">&quot;Company&quot;</span>, App::Company);</span><br><span class="line">set.<span class="built_in">endGroup</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Qt多线程"><a href="#Qt多线程" class="headerlink" title="Qt多线程"></a>Qt多线程</h2><h2 id="QtConcurrent"><a href="#QtConcurrent" class="headerlink" title="QtConcurrent"></a>QtConcurrent</h2><p>keyword: QtConcurrent, Qt多线程, Qt多线程编程</p><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><ul><li>QtConcurrent模块提供了在Qt应用程序中使用多线程的类和函数。</li><li>可以在任意位置，使用该方法将需要执行的函数传入，并返回一个future对象，该对象可以用来判断函数是否执行完成，以及获取函数的返回值。</li></ul><h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><p>QtConcurrent::run()</p><h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">QFuture&lt;<span class="type">void</span>&gt; future = QtConcurrent::<span class="built_in">run</span>([=]()&#123;</span><br><span class="line">      QMutexLocker <span class="built_in">locker</span>(&amp;serial_qmutex);  <span class="comment">//加锁并自动释放</span></span><br><span class="line">        <span class="built_in">serialPort_readyRead</span>();</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><h2 id="线程锁"><a href="#线程锁" class="headerlink" title="线程锁"></a>线程锁</h2><h3 id="QMutexLocker"><a href="#QMutexLocker" class="headerlink" title="QMutexLocker"></a>QMutexLocker</h3><p>keyword: QMutexLocker, Qt多线程, Qt多线程编程</p><h3 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h3><ul><li>QMutexLocker类是QMutex的包装类，用于自动加锁和解锁。</li><li>该类在构造函数中传入QMutex对象，并在析构函数中自动解锁。</li></ul><h3 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">QFuture&lt;<span class="type">void</span>&gt; future = QtConcurrent::<span class="built_in">run</span>([=]()&#123;</span><br><span class="line">      QMutexLocker <span class="built_in">locker</span>(&amp;serial_qmutex);  <span class="comment">//加锁并自动释放</span></span><br><span class="line">        <span class="built_in">serialPort_readyRead</span>();</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><h1 id="C-Modbus"><a href="#C-Modbus" class="headerlink" title="C++_Modbus"></a>C++_Modbus</h1><h2 id="Server"><a href="#Server" class="headerlink" title="Server"></a>Server</h2><ol><li>使用QModbusTcpServer即可</li><li>也可使用libmodbus,相对复杂一点</li></ol><h2 id="Client"><a href="#Client" class="headerlink" title="Client"></a>Client</h2><ol><li>不建议使用QModbusTcpClient</li><li>使用libmodbus即可</li></ol><h2 id="HMI"><a href="#HMI" class="headerlink" title="HMI"></a>HMI</h2><h3 id="库的选择"><a href="#库的选择" class="headerlink" title="库的选择"></a>库的选择</h3><ol><li>使用libmodbus库通信,创建自定义控件,lineedit用于显示内容</li><li>lineedit中添加鼠标点击事件,使得点击该控件时,弹出数据设置窗口</li><li>在lineedit同名文件中添加类,该类为一个窗口,内部包含一个doublespinbox控件和一个按钮,分别用于输入数据以及发送数据到从设备.</li><li>在lineedit中开辟多线程,多线程用于处理周期读取数据.创建线程使用线程接受函数的方法,不用run()循环执行</li><li>不论读取数据还是写入数据,都必须使用线程锁,否则很容易会造成通信异常.</li></ol><h3 id="组件实现"><a href="#组件实现" class="headerlink" title="组件实现"></a>组件实现</h3><p>创建modbus结构体,该结构体包含,modbus实例,以及相对应的线程锁</p><ol><li>数据显示器:<ul><li>显示数据</li><li>点击后弹窗修改数据(弹窗使用dialog,小窗置顶,弹出时屏蔽其它窗体)</li><li>实例化时候可设置最大最小值,通信地址,数据类型(小数&#x2F;整数)小数位数</li><li>error信号反射(即通信异常的错误处理)</li></ul></li><li>按钮点击器:<ul><li>按钮点击事件(瞬动,反转,置位,复位)</li><li>按钮显示内容(与标志位挂钩,为0时显示,与为1时显示)</li><li>按钮显示颜色(与标志位挂钩,为0时显示,与为1时显示)</li><li>error信号反射</li></ul></li><li>日志记录</li><li>配方</li></ol>]]></content>
      
      
      <categories>
          
          <category> 软件编程 </category>
          
          <category> Qt </category>
          
      </categories>
      
      
        <tags>
            
            <tag> visual studio </tag>
            
            <tag> Qt </tag>
            
            <tag> vscode-Qt </tag>
            
            <tag> QUdpSocket </tag>
            
            <tag> QML </tag>
            
            <tag> Qt_QDir </tag>
            
            <tag> qDebug_重定向到日志 </tag>
            
            <tag> ini乱码 </tag>
            
            <tag> 多线程 </tag>
            
            <tag> Modbus </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
